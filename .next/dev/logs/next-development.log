[00:00:00.935] Server  LOG      ✓ Ready in 609ms
[00:00:02.226] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:00:02.229] Server  LOG     [DB] Values: [50]
[00:00:02.240] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:00:02.241] Server  LOG     [DB] Values: ["2,1"]
[00:00:02.242] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:00:02.243] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:00:02.245] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:00:03.984] Server  LOG      ○ Compiling /api/orders ...
[00:00:06.300] Browser INFO    %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[00:00:06.611] Browser LOG     %c[Vercel Web Analytics]%c Debug mode is enabled by default in development. No requests will be sent to the server. color: rgb(120, 120, 120) color: inherit
[00:00:06.611] Browser LOG     %c[Vercel Web Analytics]%c Running queued event color: rgb(120, 120, 120) color: inherit pageview {"path":"/","route":"/"}
[00:00:06.611] Browser LOG     %c[Vercel Web Analytics]%c [pageview] http://localhost:3000/ color: rgb(120, 120, 120) color: inherit {"dp":"/","o":"http://localhost:3000/","sdkn":"@vercel/analytics/next","sdkv":"1.5.0","sv":"0.1.3","ts":1767352179986}
[00:00:21.231] Browser INFO    %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[00:00:21.352] Browser LOG     %c[Vercel Web Analytics]%c Debug mode is enabled by default in development. No requests will be sent to the server. color: rgb(120, 120, 120) color: inherit
[00:00:21.352] Browser LOG     %c[Vercel Web Analytics]%c Running queued event color: rgb(120, 120, 120) color: inherit pageview {"path":"/","route":"/"}
[00:00:21.352] Browser LOG     %c[Vercel Web Analytics]%c [pageview] http://localhost:3000/ color: rgb(120, 120, 120) color: inherit {"dp":"/","o":"http://localhost:3000/","sdkn":"@vercel/analytics/next","sdkv":"1.5.0","sv":"0.1.3","ts":1767352194861}
[00:00:21.626] Browser INFO    %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[00:00:21.751] Browser LOG     %c[Vercel Web Analytics]%c Debug mode is enabled by default in development. No requests will be sent to the server. color: rgb(120, 120, 120) color: inherit
[00:00:21.751] Browser LOG     %c[Vercel Web Analytics]%c Running queued event color: rgb(120, 120, 120) color: inherit pageview {"path":"/","route":"/"}
[00:00:21.751] Browser LOG     %c[Vercel Web Analytics]%c [pageview] http://localhost:3000/ color: rgb(120, 120, 120) color: inherit {"dp":"/","o":"http://localhost:3000/","sdkn":"@vercel/analytics/next","sdkv":"1.5.0","sv":"0.1.3","ts":1767352195259}
[00:00:22.061] Browser INFO    %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[00:00:22.188] Browser LOG     %c[Vercel Web Analytics]%c Debug mode is enabled by default in development. No requests will be sent to the server. color: rgb(120, 120, 120) color: inherit
[00:00:22.188] Browser LOG     %c[Vercel Web Analytics]%c Running queued event color: rgb(120, 120, 120) color: inherit pageview {"path":"/","route":"/"}
[00:00:22.188] Browser LOG     %c[Vercel Web Analytics]%c [pageview] http://localhost:3000/ color: rgb(120, 120, 120) color: inherit {"dp":"/","o":"http://localhost:3000/","sdkn":"@vercel/analytics/next","sdkv":"1.5.0","sv":"0.1.3","ts":1767352195692}
[00:00:22.362] Browser INFO    %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[00:00:22.396] Browser LOG     %c[Vercel Web Analytics]%c Debug mode is enabled by default in development. No requests will be sent to the server. color: rgb(120, 120, 120) color: inherit
[00:00:22.396] Browser LOG     %c[Vercel Web Analytics]%c Running queued event color: rgb(120, 120, 120) color: inherit pageview {"path":"/","route":"/"}
[00:00:22.396] Browser LOG     %c[Vercel Web Analytics]%c [pageview] http://localhost:3000/ color: rgb(120, 120, 120) color: inherit {"dp":"/","o":"http://localhost:3000/","sdkn":"@vercel/analytics/next","sdkv":"1.5.0","sv":"0.1.3","ts":1767352195988}
[00:00:22.530] Browser INFO    %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[00:00:22.654] Browser LOG     %c[Vercel Web Analytics]%c Debug mode is enabled by default in development. No requests will be sent to the server. color: rgb(120, 120, 120) color: inherit
[00:00:22.654] Browser LOG     %c[Vercel Web Analytics]%c Running queued event color: rgb(120, 120, 120) color: inherit pageview {"path":"/","route":"/"}
[00:00:22.654] Browser LOG     %c[Vercel Web Analytics]%c [pageview] http://localhost:3000/ color: rgb(120, 120, 120) color: inherit {"dp":"/","o":"http://localhost:3000/","sdkn":"@vercel/analytics/next","sdkv":"1.5.0","sv":"0.1.3","ts":1767352196162}
[00:00:24.581] Server  LOG     [DB] Query: SELECT id, email, name, role, is_active FROM users WHERE email = ?
[00:00:24.582] Server  LOG     [DB] Values: ["cashier@sodalicious.com"]
[00:00:24.583] Server  LOG     [DB] Query: INSERT INTO activity_logs (user_id, action, action_type, entity_type, entity_id, details) VALUES (?, 'Logged in', 'login', 'User', ?, 'User logged into the system')
[00:00:24.583] Server  LOG     [DB] Values: [1,1]
[00:00:24.743] Server  ERROR   [DB ERROR] Query failed: Error: CONSTRAINT `activity_logs.details` failed for `sodalicious_db`.`activity_logs`
[00:00:24.811] Server  ERROR   Failed to log login activity Error: CONSTRAINT `activity_logs.details` failed for `sodalicious_db`.`activity_logs`
[00:00:24.906] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:00:24.915] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:00:24.927] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:00:24.930] Server  LOG     [DB] Values: [50]
[00:00:24.941] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:00:24.942] Server  LOG     [DB] Values: ["2,1"]
[00:00:24.958] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:00:24.958] Server  LOG     [DB] Values: [50]
[00:00:24.961] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:00:24.962] Server  LOG     [DB] Values: ["2,1"]
[00:00:26.909] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:00:26.910] Server  LOG     [DB] Values: [50]
[00:00:26.911] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:00:26.911] Server  LOG     [DB] Values: ["2,1"]
[00:00:28.911] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:00:28.911] Server  LOG     [DB] Values: [50]
[00:00:28.913] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:00:28.913] Server  LOG     [DB] Values: ["2,1"]
[00:00:29.905] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:00:30.213] Server  LOG     [Order API] Incoming POST request
[00:00:30.214] Server  LOG     [Order API] Processing order with 1 items
[00:00:30.215] Server  LOG     [DB] Query: SELECT id FROM users WHERE role = 'cashier' LIMIT 1
[00:00:30.216] Server  LOG     [Order API] Using Cashier ID: 1
[00:00:30.216] Server  LOG     [DB] Query: INSERT INTO orders (order_number, cashier_id, customer_name, total_amount, payment_method, order_status) VALUES (?, ?, ?, ?, ?, 'completed')
[00:00:30.217] Server  LOG     [DB] Values: ["ORD-1767352203822",1,"Walk-in",59.4,"cash"]
[00:00:30.218] Server  LOG     [DB] Query: SELECT id FROM orders WHERE order_number = ? LIMIT 1
[00:00:30.219] Server  LOG     [DB] Values: ["ORD-1767352203822"]
[00:00:30.220] Server  LOG     [Order API] Created DB Order ID: 3
[00:00:30.220] Server  LOG     [Order API] Mapping item: "Americano" (Base: "Americano")
[00:00:30.222] Server  LOG     [DB] Query: SELECT id FROM products WHERE name = ? LIMIT 1
[00:00:30.223] Server  LOG     [DB] Values: ["Americano"]
[00:00:30.224] Server  LOG     [Order API] Found DB Product: Americano (ID: 1)
[00:00:30.224] Server  LOG     [DB] Query: INSERT INTO order_items (order_id, product_id, quantity, unit_price, subtotal) VALUES (?, ?, ?, ?, ?)
[00:00:30.225] Server  LOG     [DB] Values: [3,1,1,55,55]
[00:00:30.226] Server  LOG     [DB] Query: UPDATE products SET stock_quantity = stock_quantity - ? WHERE id = ?
[00:00:30.227] Server  LOG     [DB] Values: [1,1]
[00:00:30.228] Server  LOG     [Order API] Deducted 1 from product stock (ID: 1)
[00:00:30.229] Server  LOG     [DB] Query: SELECT pi.ingredient_id, pi.amount, i.stock_quantity, i.name as ing_name FROM product_ingredients pi JOIN ingredients i ON pi.ingredient_id = i.id WHERE pi.product_id = ?
[00:00:30.229] Server  LOG     [DB] Values: [1]
[00:00:30.230] Server  LOG     [Order API] Found 1 ingredients for Americano
[00:00:30.230] Server  LOG     [Order API] Deducting 18 from Espresso Beans. Prev: 5000, New: 4982
[00:00:30.231] Server  LOG     [DB] Query: UPDATE ingredients SET stock_quantity = ? WHERE id = ?
[00:00:30.231] Server  LOG     [DB] Values: [4982,1]
[00:00:30.233] Server  LOG     [DB] Query: INSERT INTO inventory_logs (ingredient_id, user_id, log_type, quantity_changed, reason) VALUES (?, ?, 'sale', ?, ?)
[00:00:30.233] Server  LOG     [DB] Values: [1,1,-18,"Order ORD-1767352203822"]
[00:00:30.234] Server  LOG     [Order API] ✓ Order ORD-1767352203822 fully processed and synced.
[00:00:30.267] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:00:30.902] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:00:30.903] Server  LOG     [DB] Values: [50]
[00:00:30.904] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:00:30.905] Server  LOG     [DB] Values: ["3,2,1"]
[00:00:32.911] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:00:32.912] Server  LOG     [DB] Values: [50]
[00:00:32.913] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:00:32.913] Server  LOG     [DB] Values: ["3,2,1"]
[00:00:34.903] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:00:34.908] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:00:34.909] Server  LOG     [DB] Values: [50]
[00:00:34.913] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:00:34.913] Server  LOG     [DB] Values: ["3,2,1"]
[00:00:36.911] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:00:36.911] Server  LOG     [DB] Values: [50]
[00:00:36.913] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:00:36.913] Server  LOG     [DB] Values: ["3,2,1"]
[00:00:38.911] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:00:38.912] Server  LOG     [DB] Values: [50]
[00:00:38.913] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:00:38.913] Server  LOG     [DB] Values: ["3,2,1"]
[00:00:40.619] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:00:41.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:00:41.618] Server  LOG     [DB] Values: [50]
[00:00:41.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:00:41.619] Server  LOG     [DB] Values: ["3,2,1"]
[00:00:43.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:00:43.618] Server  LOG     [DB] Values: [50]
[00:00:43.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:00:43.619] Server  LOG     [DB] Values: ["3,2,1"]
[00:00:45.615] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:00:45.620] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:00:45.620] Server  LOG     [DB] Values: [50]
[00:00:45.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:00:45.624] Server  LOG     [DB] Values: ["3,2,1"]
[00:00:47.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:00:47.624] Server  LOG     [DB] Values: [50]
[00:00:47.625] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:00:47.626] Server  LOG     [DB] Values: ["3,2,1"]
[00:00:49.620] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:00:49.621] Server  LOG     [DB] Values: [50]
[00:00:49.622] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:00:49.622] Server  LOG     [DB] Values: ["3,2,1"]
[00:00:50.621] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:00:51.619] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:00:51.619] Server  LOG     [DB] Values: [50]
[00:00:51.620] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:00:51.621] Server  LOG     [DB] Values: ["3,2,1"]
[00:00:53.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:00:53.624] Server  LOG     [DB] Values: [50]
[00:00:53.625] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:00:53.625] Server  LOG     [DB] Values: ["3,2,1"]
[00:00:55.621] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:00:55.625] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:00:55.626] Server  LOG     [DB] Values: [50]
[00:00:55.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:00:55.630] Server  LOG     [DB] Values: ["3,2,1"]
[00:00:57.620] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:00:57.620] Server  LOG     [DB] Values: [50]
[00:00:57.622] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:00:57.622] Server  LOG     [DB] Values: ["3,2,1"]
[00:00:59.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:00:59.625] Server  LOG     [DB] Values: [50]
[00:00:59.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:00:59.626] Server  LOG     [DB] Values: ["3,2,1"]
[00:01:00.611] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:01:01.619] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:01:01.620] Server  LOG     [DB] Values: [50]
[00:01:01.622] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:01:01.622] Server  LOG     [DB] Values: ["3,2,1"]
[00:01:03.612] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:01:03.612] Server  LOG     [DB] Values: [50]
[00:01:03.613] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:01:03.613] Server  LOG     [DB] Values: ["3,2,1"]
[00:01:05.623] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:01:05.628] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:01:05.629] Server  LOG     [DB] Values: [50]
[00:01:05.649] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:01:05.650] Server  LOG     [DB] Values: ["3,2,1"]
[00:01:07.622] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:01:07.623] Server  LOG     [DB] Values: [50]
[00:01:07.624] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:01:07.625] Server  LOG     [DB] Values: ["3,2,1"]
[00:01:09.619] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:01:09.619] Server  LOG     [DB] Values: [50]
[00:01:09.620] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:01:09.621] Server  LOG     [DB] Values: ["3,2,1"]
[00:01:10.620] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:01:11.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:01:11.625] Server  LOG     [DB] Values: [50]
[00:01:11.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:01:11.626] Server  LOG     [DB] Values: ["3,2,1"]
[00:01:13.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:01:13.624] Server  LOG     [DB] Values: [50]
[00:01:13.625] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:01:13.626] Server  LOG     [DB] Values: ["3,2,1"]
[00:01:15.614] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:01:15.618] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:01:15.619] Server  LOG     [DB] Values: [50]
[00:01:15.622] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:01:15.622] Server  LOG     [DB] Values: ["3,2,1"]
[00:01:17.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:01:17.622] Server  LOG     [DB] Values: [50]
[00:01:17.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:01:17.623] Server  LOG     [DB] Values: ["3,2,1"]
[00:01:19.618] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:01:19.619] Server  LOG     [DB] Values: [50]
[00:01:19.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:01:19.620] Server  LOG     [DB] Values: ["3,2,1"]
[00:01:20.617] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:01:21.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:01:21.617] Server  LOG     [DB] Values: [50]
[00:01:21.618] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:01:21.618] Server  LOG     [DB] Values: ["3,2,1"]
[00:01:23.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:01:23.615] Server  LOG     [DB] Values: [50]
[00:01:23.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:01:23.616] Server  LOG     [DB] Values: ["3,2,1"]
[00:01:25.626] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:01:25.631] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:01:25.631] Server  LOG     [DB] Values: [50]
[00:01:25.634] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:01:25.635] Server  LOG     [DB] Values: ["3,2,1"]
[00:01:27.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:01:27.614] Server  LOG     [DB] Values: [50]
[00:01:27.615] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:01:27.616] Server  LOG     [DB] Values: ["3,2,1"]
[00:01:29.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:01:29.624] Server  LOG     [DB] Values: [50]
[00:01:29.625] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:01:29.626] Server  LOG     [DB] Values: ["3,2,1"]
[00:01:30.621] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:01:31.622] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:01:31.623] Server  LOG     [DB] Values: [50]
[00:01:31.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:01:31.624] Server  LOG     [DB] Values: ["3,2,1"]
[00:01:33.622] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:01:33.622] Server  LOG     [DB] Values: [50]
[00:01:33.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:01:33.624] Server  LOG     [DB] Values: ["3,2,1"]
[00:01:35.621] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:01:35.627] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:01:35.627] Server  LOG     [DB] Values: [50]
[00:01:35.631] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:01:35.631] Server  LOG     [DB] Values: ["3,2,1"]
[00:01:37.613] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:01:37.614] Server  LOG     [DB] Values: [50]
[00:01:37.615] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:01:37.615] Server  LOG     [DB] Values: ["3,2,1"]
[00:01:54.220] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:01:54.221] Server  LOG     [DB] Values: [50]
[00:01:54.231] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:01:54.232] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:01:54.233] Server  LOG     [DB] Values: ["3,2,1"]
[00:01:54.904] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:01:54.908] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:01:54.909] Server  LOG     [DB] Values: [50]
[00:01:54.940] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:01:54.941] Server  LOG     [DB] Values: ["3,2,1"]
[00:01:56.902] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:01:56.903] Server  LOG     [DB] Values: [50]
[00:01:56.904] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:01:56.904] Server  LOG     [DB] Values: ["3,2,1"]
[00:01:58.917] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:01:58.918] Server  LOG     [DB] Values: [50]
[00:01:58.919] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:01:58.920] Server  LOG     [DB] Values: ["3,2,1"]
[00:01:59.916] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:02:00.902] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:00.902] Server  LOG     [DB] Values: [50]
[00:02:00.903] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:00.904] Server  LOG     [DB] Values: ["3,2,1"]
[00:02:02.909] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:02.909] Server  LOG     [DB] Values: [50]
[00:02:02.911] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:02.911] Server  LOG     [DB] Values: ["3,2,1"]
[00:02:04.905] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:02:04.911] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:04.912] Server  LOG     [DB] Values: [50]
[00:02:04.915] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:04.916] Server  LOG     [DB] Values: ["3,2,1"]
[00:02:06.929] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:06.929] Server  LOG     [DB] Values: [50]
[00:02:06.930] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:06.931] Server  LOG     [DB] Values: ["3,2,1"]
[00:02:08.902] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:08.903] Server  LOG     [DB] Values: [50]
[00:02:08.904] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:08.905] Server  LOG     [DB] Values: ["3,2,1"]
[00:02:09.902] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:02:10.903] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:10.903] Server  LOG     [DB] Values: [50]
[00:02:10.904] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:10.905] Server  LOG     [DB] Values: ["3,2,1"]
[00:02:12.903] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:12.903] Server  LOG     [DB] Values: [50]
[00:02:12.904] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:12.905] Server  LOG     [DB] Values: ["3,2,1"]
[00:02:15.620] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:02:15.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:15.625] Server  LOG     [DB] Values: [50]
[00:02:15.628] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:15.628] Server  LOG     [DB] Values: ["3,2,1"]
[00:02:17.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:17.623] Server  LOG     [DB] Values: [50]
[00:02:17.624] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:17.625] Server  LOG     [DB] Values: ["3,2,1"]
[00:02:19.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:19.622] Server  LOG     [DB] Values: [50]
[00:02:19.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:19.623] Server  LOG     [DB] Values: ["3,2,1"]
[00:02:20.615] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:02:21.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:21.611] Server  LOG     [DB] Values: [50]
[00:02:21.612] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:21.613] Server  LOG     [DB] Values: ["3,2,1"]
[00:02:23.610] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:23.610] Server  LOG     [DB] Values: [50]
[00:02:23.612] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:23.612] Server  LOG     [DB] Values: ["3,2,1"]
[00:02:25.615] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:02:25.620] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:25.620] Server  LOG     [DB] Values: [50]
[00:02:25.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:25.623] Server  LOG     [DB] Values: ["3,2,1"]
[00:02:27.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:27.624] Server  LOG     [DB] Values: [50]
[00:02:27.625] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:27.626] Server  LOG     [DB] Values: ["3,2,1"]
[00:02:29.610] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:29.610] Server  LOG     [DB] Values: [50]
[00:02:29.613] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:29.613] Server  LOG     [DB] Values: ["3,2,1"]
[00:02:30.610] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:02:31.619] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:31.619] Server  LOG     [DB] Values: [50]
[00:02:31.620] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:31.621] Server  LOG     [DB] Values: ["3,2,1"]
[00:02:33.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:33.623] Server  LOG     [DB] Values: [50]
[00:02:33.624] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:33.624] Server  LOG     [DB] Values: ["3,2,1"]
[00:02:35.614] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:02:35.619] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:35.619] Server  LOG     [DB] Values: [50]
[00:02:35.622] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:35.622] Server  LOG     [DB] Values: ["3,2,1"]
[00:02:37.612] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:37.613] Server  LOG     [DB] Values: [50]
[00:02:37.614] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:37.614] Server  LOG     [DB] Values: ["3,2,1"]
[00:02:39.610] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:39.610] Server  LOG     [DB] Values: [50]
[00:02:39.611] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:39.612] Server  LOG     [DB] Values: ["3,2,1"]
[00:02:40.619] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:02:41.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:41.617] Server  LOG     [DB] Values: [50]
[00:02:41.618] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:41.618] Server  LOG     [DB] Values: ["3,2,1"]
[00:02:42.904] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:42.904] Server  LOG     [DB] Values: [50]
[00:02:42.905] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:42.906] Server  LOG     [DB] Values: ["3,2,1"]
[00:02:44.903] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:02:44.907] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:44.908] Server  LOG     [DB] Values: [50]
[00:02:44.911] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:44.911] Server  LOG     [DB] Values: ["3,2,1"]
[00:02:46.908] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:46.908] Server  LOG     [DB] Values: [50]
[00:02:46.910] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:46.910] Server  LOG     [DB] Values: ["3,2,1"]
[00:02:48.122] Server  LOG     [Order API] Incoming POST request
[00:02:48.122] Server  LOG     [Order API] Processing order with 1 items
[00:02:48.123] Server  LOG     [DB] Query: SELECT id FROM users WHERE role = 'cashier' LIMIT 1
[00:02:48.124] Server  LOG     [Order API] Using Cashier ID: 1
[00:02:48.125] Server  LOG     [DB] Query: INSERT INTO orders (order_number, cashier_id, customer_name, total_amount, payment_method, order_status) VALUES (?, ?, ?, ?, ?, 'completed')
[00:02:48.125] Server  LOG     [DB] Values: ["ORD-1767352341731",1,"Walk-in",2667.6,"cash"]
[00:02:48.126] Server  LOG     [DB] Query: SELECT id FROM orders WHERE order_number = ? LIMIT 1
[00:02:48.127] Server  LOG     [DB] Values: ["ORD-1767352341731"]
[00:02:48.128] Server  LOG     [Order API] Created DB Order ID: 4
[00:02:48.129] Server  LOG     [Order API] Mapping item: "Americano" (Base: "Americano")
[00:02:48.130] Server  LOG     [DB] Query: SELECT id FROM products WHERE name = ? LIMIT 1
[00:02:48.130] Server  LOG     [DB] Values: ["Americano"]
[00:02:48.131] Server  LOG     [Order API] Found DB Product: Americano (ID: 1)
[00:02:48.132] Server  LOG     [DB] Query: INSERT INTO order_items (order_id, product_id, quantity, unit_price, subtotal) VALUES (?, ?, ?, ?, ?)
[00:02:48.132] Server  LOG     [DB] Values: [4,1,38,65,2470]
[00:02:48.133] Server  LOG     [DB] Query: UPDATE products SET stock_quantity = stock_quantity - ? WHERE id = ?
[00:02:48.134] Server  LOG     [DB] Values: [38,1]
[00:02:48.136] Server  LOG     [Order API] Deducted 38 from product stock (ID: 1)
[00:02:48.136] Server  LOG     [DB] Query: SELECT pi.ingredient_id, pi.amount, i.stock_quantity, i.name as ing_name FROM product_ingredients pi JOIN ingredients i ON pi.ingredient_id = i.id WHERE pi.product_id = ?
[00:02:48.136] Server  LOG     [DB] Values: [1]
[00:02:48.137] Server  LOG     [Order API] Found 1 ingredients for Americano
[00:02:48.138] Server  LOG     [Order API] Deducting 684 from Espresso Beans. Prev: 4982, New: 4298
[00:02:48.138] Server  LOG     [DB] Query: UPDATE ingredients SET stock_quantity = ? WHERE id = ?
[00:02:48.138] Server  LOG     [DB] Values: [4298,1]
[00:02:48.139] Server  LOG     [DB] Query: INSERT INTO inventory_logs (ingredient_id, user_id, log_type, quantity_changed, reason) VALUES (?, ?, 'sale', ?, ?)
[00:02:48.140] Server  LOG     [DB] Values: [1,1,-684,"Order ORD-1767352341731"]
[00:02:48.142] Server  LOG     [Order API] ✓ Order ORD-1767352341731 fully processed and synced.
[00:02:48.174] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:02:48.901] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:48.902] Server  LOG     [DB] Values: [50]
[00:02:48.903] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:48.903] Server  LOG     [DB] Values: ["4,3,2,1"]
[00:02:49.902] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:02:50.903] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:50.903] Server  LOG     [DB] Values: [50]
[00:02:50.904] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:50.905] Server  LOG     [DB] Values: ["4,3,2,1"]
[00:02:52.903] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:52.903] Server  LOG     [DB] Values: [50]
[00:02:52.904] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:52.905] Server  LOG     [DB] Values: ["4,3,2,1"]
[00:02:54.904] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:02:54.908] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:54.909] Server  LOG     [DB] Values: [50]
[00:02:54.934] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:54.934] Server  LOG     [DB] Values: ["4,3,2,1"]
[00:02:56.903] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:56.903] Server  LOG     [DB] Values: [50]
[00:02:56.904] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:56.904] Server  LOG     [DB] Values: ["4,3,2,1"]
[00:02:56.991] Server  LOG     [Order API] Incoming POST request
[00:02:56.992] Server  LOG     [Order API] Processing order with 1 items
[00:02:56.993] Server  LOG     [DB] Query: SELECT id FROM users WHERE role = 'cashier' LIMIT 1
[00:02:56.994] Server  LOG     [Order API] Using Cashier ID: 1
[00:02:56.995] Server  LOG     [DB] Query: INSERT INTO orders (order_number, cashier_id, customer_name, total_amount, payment_method, order_status) VALUES (?, ?, ?, ?, ?, 'completed')
[00:02:56.995] Server  LOG     [DB] Values: ["ORD-1767352350602",1,"Walk-in",70.2,"cash"]
[00:02:56.997] Server  LOG     [DB] Query: SELECT id FROM orders WHERE order_number = ? LIMIT 1
[00:02:56.997] Server  LOG     [DB] Values: ["ORD-1767352350602"]
[00:02:56.999] Server  LOG     [Order API] Created DB Order ID: 5
[00:02:56.999] Server  LOG     [Order API] Mapping item: "Americano" (Base: "Americano")
[00:02:57.000] Server  LOG     [DB] Query: SELECT id FROM products WHERE name = ? LIMIT 1
[00:02:57.000] Server  LOG     [DB] Values: ["Americano"]
[00:02:57.001] Server  LOG     [Order API] Found DB Product: Americano (ID: 1)
[00:02:57.001] Server  LOG     [DB] Query: INSERT INTO order_items (order_id, product_id, quantity, unit_price, subtotal) VALUES (?, ?, ?, ?, ?)
[00:02:57.002] Server  LOG     [DB] Values: [5,1,1,65,65]
[00:02:57.003] Server  LOG     [DB] Query: UPDATE products SET stock_quantity = stock_quantity - ? WHERE id = ?
[00:02:57.004] Server  LOG     [DB] Values: [1,1]
[00:02:57.005] Server  LOG     [Order API] Deducted 1 from product stock (ID: 1)
[00:02:57.005] Server  LOG     [DB] Query: SELECT pi.ingredient_id, pi.amount, i.stock_quantity, i.name as ing_name FROM product_ingredients pi JOIN ingredients i ON pi.ingredient_id = i.id WHERE pi.product_id = ?
[00:02:57.006] Server  LOG     [DB] Values: [1]
[00:02:57.006] Server  LOG     [Order API] Found 1 ingredients for Americano
[00:02:57.007] Server  LOG     [Order API] Deducting 18 from Espresso Beans. Prev: 4298, New: 4280
[00:02:57.007] Server  LOG     [DB] Query: UPDATE ingredients SET stock_quantity = ? WHERE id = ?
[00:02:57.007] Server  LOG     [DB] Values: [4280,1]
[00:02:57.008] Server  LOG     [DB] Query: INSERT INTO inventory_logs (ingredient_id, user_id, log_type, quantity_changed, reason) VALUES (?, ?, 'sale', ?, ?)
[00:02:57.009] Server  LOG     [DB] Values: [1,1,-18,"Order ORD-1767352350602"]
[00:02:57.010] Server  LOG     [Order API] ✓ Order ORD-1767352350602 fully processed and synced.
[00:02:57.043] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:02:58.919] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:02:58.930] Server  LOG     [DB] Values: [50]
[00:02:58.938] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:02:58.939] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:02:59.903] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:03:00.903] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:00.904] Server  LOG     [DB] Values: [50]
[00:03:00.905] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:00.905] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:02.902] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:02.903] Server  LOG     [DB] Values: [50]
[00:03:02.904] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:02.904] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:04.903] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:03:04.908] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:04.908] Server  LOG     [DB] Values: [50]
[00:03:04.912] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:04.913] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:07.641] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:07.643] Server  LOG     [DB] Values: [50]
[00:03:07.644] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:07.645] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:09.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:09.621] Server  LOG     [DB] Values: [50]
[00:03:09.622] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:09.623] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:10.613] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:03:11.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:11.612] Server  LOG     [DB] Values: [50]
[00:03:11.613] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:11.613] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:13.618] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:13.619] Server  LOG     [DB] Values: [50]
[00:03:13.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:13.620] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:15.624] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:03:15.627] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:15.628] Server  LOG     [DB] Values: [50]
[00:03:15.632] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:15.632] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:17.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:17.615] Server  LOG     [DB] Values: [50]
[00:03:17.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:17.616] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:19.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:19.622] Server  LOG     [DB] Values: [50]
[00:03:19.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:19.623] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:20.611] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:03:21.618] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:21.618] Server  LOG     [DB] Values: [50]
[00:03:21.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:21.620] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:23.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:23.625] Server  LOG     [DB] Values: [50]
[00:03:23.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:23.626] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:25.613] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:03:25.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:25.617] Server  LOG     [DB] Values: [50]
[00:03:25.634] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:25.634] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:27.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:27.615] Server  LOG     [DB] Values: [50]
[00:03:27.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:27.617] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:29.615] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:29.616] Server  LOG     [DB] Values: [50]
[00:03:29.617] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:29.617] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:30.613] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:03:31.610] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:31.611] Server  LOG     [DB] Values: [50]
[00:03:31.612] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:31.612] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:33.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:33.622] Server  LOG     [DB] Values: [50]
[00:03:33.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:33.623] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:35.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:35.617] Server  LOG     [DB] Values: [50]
[00:03:35.622] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:03:35.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:35.624] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:37.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:37.616] Server  LOG     [DB] Values: [50]
[00:03:37.617] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:37.618] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:39.612] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:39.613] Server  LOG     [DB] Values: [50]
[00:03:39.614] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:39.614] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:40.623] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:03:41.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:41.611] Server  LOG     [DB] Values: [50]
[00:03:41.613] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:41.613] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:43.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:43.623] Server  LOG     [DB] Values: [50]
[00:03:43.624] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:43.625] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:45.622] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:03:45.625] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:45.626] Server  LOG     [DB] Values: [50]
[00:03:45.630] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:45.630] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:46.905] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:46.906] Server  LOG     [DB] Values: [50]
[00:03:46.907] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:46.907] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:48.756] Server  LOG     [DB] Query: INSERT INTO activity_logs (user_id, action, action_type, entity_type, entity_id, details) VALUES (?, 'Logged out', 'logout', 'User', ?, ?)
[00:03:48.757] Server  LOG     [DB] Values: [1,1,"{\"message\":\"User logged out\"}"]
[00:03:50.883] Server  LOG     [DB] Query: SELECT id, email, name, role, is_active FROM users WHERE email = ?
[00:03:50.883] Server  LOG     [DB] Values: ["manager@sodalicious.com"]
[00:03:50.885] Server  LOG     [DB] Query: INSERT INTO activity_logs (user_id, action, action_type, entity_type, entity_id, details) VALUES (?, 'Logged in', 'login', 'User', ?, 'User logged into the system')
[00:03:50.885] Server  LOG     [DB] Values: [2,2]
[00:03:50.971] Server  ERROR   [DB ERROR] Query failed: Error: CONSTRAINT `activity_logs.details` failed for `sodalicious_db`.`activity_logs`
[00:03:51.049] Server  ERROR   Failed to log login activity Error: CONSTRAINT `activity_logs.details` failed for `sodalicious_db`.`activity_logs`
[00:03:51.087] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:03:51.093] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:03:51.108] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:51.109] Server  LOG     [DB] Values: [50]
[00:03:51.113] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:03:51.115] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:51.116] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:51.129] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:03:51.140] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:03:51.148] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:51.155] Server  LOG     [DB] Values: [50]
[00:03:51.159] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:51.160] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:51.171] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:03:51.234] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:03:51.261] Server  LOG     [DB] Query: SELECT id, name, email as username, role, is_active FROM users ORDER BY id ASC
[00:03:51.276] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:03:51.281] Server  LOG     [DB] Query: SELECT id, name, email as username, role, is_active FROM users ORDER BY id ASC
[00:03:53.096] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:03:53.099] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:53.101] Server  LOG     [DB] Values: [50]
[00:03:53.104] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:53.105] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:53.562] Server  LOG      ✓ Compiled in 141ms
[00:03:55.087] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:55.087] Server  LOG     [DB] Values: [50]
[00:03:55.091] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:03:55.091] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:55.092] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:56.085] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:03:56.089] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:03:56.099] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:03:57.090] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:57.091] Server  LOG     [DB] Values: [50]
[00:03:57.095] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:03:57.096] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:57.097] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:03:59.090] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:03:59.095] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:03:59.096] Server  LOG     [DB] Values: [50]
[00:03:59.103] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:03:59.104] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:00.511] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:04:00.515] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:04:01.092] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:01.093] Server  LOG     [DB] Values: [50]
[00:04:01.096] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:01.099] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:04:01.101] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:01.102] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:03.085] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:03.086] Server  LOG     [DB] Values: [50]
[00:04:03.090] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:03.091] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:03.091] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:05.090] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:05.091] Server  LOG     [DB] Values: [50]
[00:04:05.092] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:05.093] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:05.096] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:05.511] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:04:06.087] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:04:07.091] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:07.092] Server  LOG     [DB] Values: [50]
[00:04:07.095] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:07.096] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:07.097] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:09.093] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:09.094] Server  LOG     [DB] Values: [50]
[00:04:09.097] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:09.098] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:09.098] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:10.511] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:04:11.094] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:11.094] Server  LOG     [DB] Values: [50]
[00:04:11.098] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:11.103] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:04:11.103] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:11.104] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:13.086] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:13.087] Server  LOG     [DB] Values: [50]
[00:04:13.090] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:13.091] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:13.092] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:15.086] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:15.086] Server  LOG     [DB] Values: [50]
[00:04:15.090] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:15.091] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:15.091] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:15.521] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:04:16.089] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:04:17.086] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:17.087] Server  LOG     [DB] Values: [50]
[00:04:17.094] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:17.094] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:17.095] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:19.086] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:19.086] Server  LOG     [DB] Values: [50]
[00:04:19.090] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:19.091] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:19.092] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:20.513] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:04:21.093] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:21.093] Server  LOG     [DB] Values: [50]
[00:04:21.097] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:21.101] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:04:21.106] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:21.107] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:23.093] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:23.093] Server  LOG     [DB] Values: [50]
[00:04:23.097] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:23.097] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:23.098] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:24.415] Server  LOG      ✓ Compiled in 109ms
[00:04:25.091] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:25.091] Server  LOG     [DB] Values: [50]
[00:04:25.094] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:25.095] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:25.095] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:25.526] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:04:26.089] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:04:27.087] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:27.087] Server  LOG     [DB] Values: [50]
[00:04:27.090] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:27.091] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:27.092] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:29.085] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:29.086] Server  LOG     [DB] Values: [50]
[00:04:29.090] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:29.091] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:29.091] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:30.515] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:04:31.090] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:31.090] Server  LOG     [DB] Values: [50]
[00:04:31.093] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:31.097] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:04:31.098] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:31.099] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:33.101] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:33.106] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:33.107] Server  LOG     [DB] Values: [50]
[00:04:33.109] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:33.110] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:35.086] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:35.087] Server  LOG     [DB] Values: [50]
[00:04:35.090] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:35.091] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:35.092] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:35.511] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:04:36.092] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:04:37.094] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:37.094] Server  LOG     [DB] Values: [50]
[00:04:37.098] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:37.099] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:37.099] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:39.084] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:39.085] Server  LOG     [DB] Values: [50]
[00:04:39.089] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:39.090] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:39.090] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:40.511] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:04:41.085] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:41.086] Server  LOG     [DB] Values: [50]
[00:04:41.090] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:41.094] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:04:41.095] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:41.095] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:43.089] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:43.090] Server  LOG     [DB] Values: [50]
[00:04:43.093] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:43.095] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:43.095] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:45.084] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:45.085] Server  LOG     [DB] Values: [50]
[00:04:45.089] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:45.090] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:45.091] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:45.511] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:04:46.087] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:04:47.083] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:47.083] Server  LOG     [DB] Values: [50]
[00:04:47.084] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:47.085] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:47.132] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:49.132] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:49.132] Server  LOG     [DB] Values: [50]
[00:04:49.136] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:49.137] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:49.138] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:50.512] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:04:51.094] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:51.094] Server  LOG     [DB] Values: [50]
[00:04:51.098] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:51.099] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:51.099] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:51.103] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:04:53.094] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:53.095] Server  LOG     [DB] Values: [50]
[00:04:53.098] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:53.099] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:53.099] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:55.095] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:55.095] Server  LOG     [DB] Values: [50]
[00:04:55.099] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:55.100] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:55.100] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:55.513] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:04:56.096] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:04:57.618] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:57.618] Server  LOG     [DB] Values: [50]
[00:04:57.622] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:57.637] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:57.637] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:04:59.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:04:59.624] Server  LOG     [DB] Values: [50]
[00:04:59.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:04:59.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:04:59.629] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:00.624] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:05:01.623] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:05:01.626] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:01.627] Server  LOG     [DB] Values: [50]
[00:05:01.630] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:01.633] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:01.634] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:03.620] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:03.621] Server  LOG     [DB] Values: [50]
[00:05:03.624] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:03.625] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:03.625] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:05.612] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:05.613] Server  LOG     [DB] Values: [50]
[00:05:05.616] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:05:05.620] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:05.621] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:05.621] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:06.620] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:05:07.613] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:07.613] Server  LOG     [DB] Values: [50]
[00:05:07.617] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:07.618] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:07.618] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:09.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:09.611] Server  LOG     [DB] Values: [50]
[00:05:09.614] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:09.615] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:09.616] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:10.614] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:05:11.622] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:11.622] Server  LOG     [DB] Values: [50]
[00:05:11.626] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:11.629] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:05:11.630] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:11.630] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:13.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:13.615] Server  LOG     [DB] Values: [50]
[00:05:13.618] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:13.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:13.619] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:15.620] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:15.620] Server  LOG     [DB] Values: [50]
[00:05:15.624] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:05:15.627] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:15.628] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:15.629] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:16.621] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:05:17.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:17.612] Server  LOG     [DB] Values: [50]
[00:05:17.615] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:17.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:17.617] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:19.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:19.617] Server  LOG     [DB] Values: [50]
[00:05:19.620] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:19.621] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:19.622] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:20.610] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:05:21.628] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:21.628] Server  LOG     [DB] Values: [50]
[00:05:21.632] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:21.635] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:05:21.636] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:21.637] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:23.615] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:23.615] Server  LOG     [DB] Values: [50]
[00:05:23.619] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:23.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:23.620] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:25.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:25.617] Server  LOG     [DB] Values: [50]
[00:05:25.621] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:05:25.625] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:25.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:25.626] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:26.619] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:05:27.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:27.615] Server  LOG     [DB] Values: [50]
[00:05:27.618] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:27.633] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:27.634] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:29.615] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:29.616] Server  LOG     [DB] Values: [50]
[00:05:29.619] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:29.620] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:29.620] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:30.511] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:05:31.620] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:31.620] Server  LOG     [DB] Values: [50]
[00:05:31.624] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:31.627] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:05:31.628] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:31.628] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:33.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:33.621] Server  LOG     [DB] Values: [50]
[00:05:33.625] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:33.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:33.626] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:35.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:35.625] Server  LOG     [DB] Values: [50]
[00:05:35.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:35.627] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:35.630] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:35.637] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:05:36.612] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:05:37.622] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:37.622] Server  LOG     [DB] Values: [50]
[00:05:37.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:37.624] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:37.629] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:39.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:39.624] Server  LOG     [DB] Values: [50]
[00:05:39.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:39.628] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:39.629] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:40.623] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:05:41.615] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:41.615] Server  LOG     [DB] Values: [50]
[00:05:41.618] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:41.622] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:05:41.622] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:41.623] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:43.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:43.623] Server  LOG     [DB] Values: [50]
[00:05:43.627] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:43.627] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:43.628] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:45.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:45.611] Server  LOG     [DB] Values: [50]
[00:05:45.615] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:45.618] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:05:45.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:45.620] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:46.615] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:05:47.620] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:47.621] Server  LOG     [DB] Values: [50]
[00:05:47.624] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:47.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:47.626] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:49.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:49.617] Server  LOG     [DB] Values: [50]
[00:05:49.621] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:49.622] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:49.622] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:50.621] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:05:51.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:51.616] Server  LOG     [DB] Values: [50]
[00:05:51.620] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:51.623] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:05:51.624] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:51.625] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:53.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:53.612] Server  LOG     [DB] Values: [50]
[00:05:53.615] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:53.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:53.616] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:55.431] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:55.431] Server  LOG     [DB] Values: [50]
[00:05:55.432] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:55.432] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:55.438] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:55.552] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:05:56.433] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:05:57.085] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:57.086] Server  LOG     [DB] Values: [50]
[00:05:57.089] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:57.090] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:57.091] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:05:59.086] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:05:59.086] Server  LOG     [DB] Values: [50]
[00:05:59.089] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:05:59.091] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:05:59.092] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:00.512] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:06:01.098] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:01.098] Server  LOG     [DB] Values: [50]
[00:06:01.100] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:01.100] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:01.104] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:01.110] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:06:03.097] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:03.097] Server  LOG     [DB] Values: [50]
[00:06:03.100] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:03.101] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:03.102] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:05.084] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:05.085] Server  LOG     [DB] Values: [50]
[00:06:05.088] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:05.089] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:05.090] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:05.516] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:06:06.098] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:06:07.086] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:07.087] Server  LOG     [DB] Values: [50]
[00:06:07.090] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:07.091] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:07.092] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:09.088] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:09.089] Server  LOG     [DB] Values: [50]
[00:06:09.092] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:09.093] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:09.094] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:10.514] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:06:11.098] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:11.099] Server  LOG     [DB] Values: [50]
[00:06:11.102] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:11.105] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:06:11.106] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:11.107] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:13.096] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:13.097] Server  LOG     [DB] Values: [50]
[00:06:13.100] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:13.101] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:13.101] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:15.085] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:15.085] Server  LOG     [DB] Values: [50]
[00:06:15.089] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:15.090] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:15.090] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:15.511] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:06:16.085] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:06:17.090] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:17.090] Server  LOG     [DB] Values: [50]
[00:06:17.094] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:17.095] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:17.095] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:17.312] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:06:17.321] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:06:19.083] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:19.084] Server  LOG     [DB] Values: [50]
[00:06:19.085] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:19.085] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:19.096] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:21.096] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:21.099] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:21.100] Server  LOG     [DB] Values: [50]
[00:06:21.103] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:06:21.106] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:21.106] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:22.314] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:06:23.099] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:23.105] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:23.106] Server  LOG     [DB] Values: [50]
[00:06:23.135] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:23.138] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:25.083] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:25.084] Server  LOG     [DB] Values: [50]
[00:06:25.085] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:25.085] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:25.098] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:26.085] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:06:27.085] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:27.086] Server  LOG     [DB] Values: [50]
[00:06:27.089] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:27.090] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:27.090] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:27.321] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:06:29.088] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:29.089] Server  LOG     [DB] Values: [50]
[00:06:29.092] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:29.093] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:29.093] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:31.084] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:31.084] Server  LOG     [DB] Values: [50]
[00:06:31.085] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:31.086] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:31.110] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:31.114] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:06:32.314] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:06:33.086] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:33.086] Server  LOG     [DB] Values: [50]
[00:06:33.089] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:33.090] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:33.091] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:35.084] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:35.084] Server  LOG     [DB] Values: [50]
[00:06:35.085] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:35.085] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:35.099] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:35.973] Server  LOG     [Inventory API] Incoming adjustment request
[00:06:35.975] Server  LOG     [DB] Query: SELECT id, name, stock_quantity FROM ingredients WHERE id = ? OR name = ? LIMIT 1
[00:06:35.975] Server  LOG     [DB] Values: [18,"18"]
[00:06:35.977] Server  LOG     [DB] Query: SELECT id FROM users WHERE id = ? LIMIT 1
[00:06:35.977] Server  LOG     [DB] Values: [1]
[00:06:35.978] Server  LOG     [Inventory API] Updating Chocolate Cake: 10 -> 210
[00:06:35.978] Server  LOG     [DB] Query: UPDATE ingredients SET stock_quantity = ? WHERE id = ?
[00:06:35.979] Server  LOG     [DB] Values: [210,18]
[00:06:35.980] Server  LOG     [DB] Query: INSERT INTO inventory_logs (ingredient_id, user_id, log_type, quantity_changed, reason, previous_quantity, new_quantity) VALUES (?, ?, ?, ?, ?, ?, ?)
[00:06:35.981] Server  LOG     [DB] Values: [18,1,"restock",200,"Manual Adjustment",10,210]
[00:06:36.079] Server  ERROR   [DB ERROR] Query failed: Error: Unknown column 'previous_quantity' in 'field list'
[00:06:36.145] Server  ERROR   [Inventory API] ❌ POST error: Error: Unknown column 'previous_quantity' in 'field list'
[00:06:36.203] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:06:36.259] Browser ERROR   Failed to update inventory
[00:06:37.096] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:37.096] Server  LOG     [DB] Values: [50]
[00:06:37.100] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:37.100] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:37.101] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:37.312] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:06:39.084] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:39.085] Server  LOG     [DB] Values: [50]
[00:06:39.088] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:39.089] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:39.089] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:41.094] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:06:41.099] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:41.103] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:41.104] Server  LOG     [DB] Values: [50]
[00:06:41.108] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:41.109] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:42.611] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:06:43.615] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:43.615] Server  LOG     [DB] Values: [50]
[00:06:43.618] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:43.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:43.620] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:45.610] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:45.610] Server  LOG     [DB] Values: [50]
[00:06:45.614] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:45.615] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:45.615] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:46.619] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:06:47.618] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:47.618] Server  LOG     [DB] Values: [50]
[00:06:47.622] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:47.626] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:06:47.627] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:47.628] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:49.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:49.625] Server  LOG     [DB] Values: [50]
[00:06:49.629] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:49.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:49.630] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:51.625] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:51.625] Server  LOG     [DB] Values: [50]
[00:06:51.633] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:51.633] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:51.671] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:51.675] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:06:52.614] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:06:53.622] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:53.622] Server  LOG     [DB] Values: [50]
[00:06:53.626] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:53.627] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:53.627] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:55.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:55.624] Server  LOG     [DB] Values: [50]
[00:06:55.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:55.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:55.629] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:56.615] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:06:57.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:57.617] Server  LOG     [DB] Values: [50]
[00:06:57.621] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:57.621] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:57.622] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:06:57.625] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:06:59.618] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:06:59.619] Server  LOG     [DB] Values: [50]
[00:06:59.622] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:06:59.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:06:59.624] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:07:01.625] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:07:01.626] Server  LOG     [DB] Values: [50]
[00:07:01.630] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:07:01.633] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:07:01.634] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:07:01.634] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:07:02.621] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:07:03.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:07:03.611] Server  LOG     [DB] Values: [50]
[00:07:03.615] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:07:03.615] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:07:03.616] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:07:05.620] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:07:05.621] Server  LOG     [DB] Values: [50]
[00:07:05.624] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:07:05.625] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:07:05.625] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:07:06.623] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:07:07.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:07:07.615] Server  LOG     [DB] Values: [50]
[00:07:07.619] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:07:07.622] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:07:07.624] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:07:07.624] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:07:09.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:07:09.612] Server  LOG     [DB] Values: [50]
[00:07:09.615] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:07:09.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:07:09.616] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:07:11.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:07:11.623] Server  LOG     [DB] Values: [50]
[00:07:11.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:07:11.627] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:07:11.631] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:07:11.634] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:07:12.617] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:07:13.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:07:13.615] Server  LOG     [DB] Values: [50]
[00:07:13.618] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:07:13.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:07:13.619] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:07:15.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:07:15.624] Server  LOG     [DB] Values: [50]
[00:07:15.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:07:15.630] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:07:15.630] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:07:16.611] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:07:17.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:07:17.617] Server  LOG     [DB] Values: [50]
[00:07:17.621] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:07:17.625] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:07:17.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:07:17.627] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:07:19.613] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:07:19.613] Server  LOG     [DB] Values: [50]
[00:07:19.617] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:07:19.618] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:07:19.618] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:07:21.654] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:07:21.658] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:07:21.658] Server  LOG     [DB] Values: [50]
[00:07:21.662] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:07:21.665] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:07:21.665] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:07:22.617] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:07:23.620] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:07:23.621] Server  LOG     [DB] Values: [50]
[00:07:23.624] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:07:23.625] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:07:23.625] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:07:25.643] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:07:25.644] Server  LOG     [DB] Values: [50]
[00:07:25.664] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:07:25.665] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:07:25.694] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:07:26.614] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:07:27.613] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:07:27.613] Server  LOG     [DB] Values: [50]
[00:07:27.617] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:07:27.620] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:07:27.621] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:07:27.622] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:07:29.622] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:07:29.623] Server  LOG     [DB] Values: [50]
[00:07:29.626] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:07:29.627] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:07:29.628] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:07:31.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:07:31.616] Server  LOG     [DB] Values: [50]
[00:07:31.620] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:07:31.623] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:07:31.624] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:07:31.625] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:07:32.611] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:07:33.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:07:33.615] Server  LOG     [DB] Values: [50]
[00:07:33.618] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:07:33.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:07:33.619] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:07:35.615] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:07:35.615] Server  LOG     [DB] Values: [50]
[00:07:35.619] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:07:35.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:07:35.620] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:07:36.616] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:07:37.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:07:37.624] Server  LOG     [DB] Values: [50]
[00:07:37.627] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:07:37.630] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:07:37.631] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:07:37.632] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:07:39.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:07:39.611] Server  LOG     [DB] Values: [50]
[00:07:39.612] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:07:39.613] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:07:39.619] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:07:58.625] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:07:58.625] Server  LOG     [DB] Values: [50]
[00:07:58.627] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:07:58.627] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:07:58.717] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:07:58.722] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:07:58.756] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:08:58.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:08:58.615] Server  LOG     [DB] Values: [50]
[00:08:58.619] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:08:58.624] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:08:58.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:08:58.626] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:08:58.634] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:09:25.059] Server  LOG      ✓ Compiled in 70ms
[00:09:25.062] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:09:25.066] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:09:25.067] Server  LOG     [DB] Values: [50]
[00:09:25.072] Server  LOG     [DB] Query: SELECT id, name, email as username, role, is_active FROM users ORDER BY id ASC
[00:09:25.162] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:09:25.182] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:09:25.183] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:09:25.188] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:09:25.206] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:09:27.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:09:27.617] Server  LOG     [DB] Values: [50]
[00:09:27.620] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:09:27.621] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:09:27.622] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:09:29.619] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:09:29.619] Server  LOG     [DB] Values: [50]
[00:09:29.623] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:09:29.624] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:09:29.625] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:09:30.613] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:09:30.617] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:09:30.621] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:09:31.612] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:09:31.612] Server  LOG     [DB] Values: [50]
[00:09:31.616] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:09:31.617] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:09:31.618] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:09:33.625] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:09:33.625] Server  LOG     [DB] Values: [50]
[00:09:33.630] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:09:33.631] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:09:33.632] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:09:35.614] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:09:35.619] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:09:35.623] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:09:40.613] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:09:40.617] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:09:40.621] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:09:45.625] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:09:45.630] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:09:45.634] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:09:58.631] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:09:58.631] Server  LOG     [DB] Values: [50]
[00:09:58.636] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:09:58.641] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:09:58.641] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:09:58.643] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:09:58.653] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:09:58.658] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:10:27.311] Server  LOG      ✓ Compiled in 76ms
[00:10:27.613] Browser ERROR   ./components/manager/product-management.tsx:44:3
Parsing ecmascript source code failed
  42 |     item.name.toLowerCase().includes(searchTerm.toLowerCase())
  43 |   )
> 44 | } else {
     |   ^^^^
  45 |   products.addProduct(formData)
  46 | }
  47 | setShowForm(false)

Expression expected

Import traces:
  Client Component Browser:
    ./components/manager/product-management.tsx [Client Component Browser]
    ./components/manager-dashboard.tsx [Client Component Browser]
    ./app/page.tsx [Client Component Browser]
    ./app/page.tsx [Server Component]

  Client Component SSR:
    ./components/manager/product-management.tsx [Client Component SSR]
    ./components/manager-dashboard.tsx [Client Component SSR]
    ./app/page.tsx [Client Component SSR]
    ./app/page.tsx [Server Component]
[00:10:58.625] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:10:58.626] Server  LOG     [DB] Values: [50]
[00:10:58.631] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:10:58.632] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:10:58.632] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:10:58.644] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:10:58.648] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:10:58.652] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:10:59.610] Browser ERROR   ./components/manager/product-management.tsx:44:3
Parsing ecmascript source code failed
  42 |     item.name.toLowerCase().includes(searchTerm.toLowerCase())
  43 |   )
> 44 | } else {
     |   ^^^^
  45 |   products.addProduct(formData)
  46 | }
  47 | setShowForm(false)

Expression expected

Import traces:
  Client Component Browser:
    ./components/manager/product-management.tsx [Client Component Browser]
    ./components/manager-dashboard.tsx [Client Component Browser]
    ./app/page.tsx [Client Component Browser]
    ./app/page.tsx [Server Component]

  Client Component SSR:
    ./components/manager/product-management.tsx [Client Component SSR]
    ./components/manager-dashboard.tsx [Client Component SSR]
    ./app/page.tsx [Client Component SSR]
    ./app/page.tsx [Server Component]
[00:11:26.630] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:11:26.630] Server  LOG     [DB] Values: [50]
[00:11:26.633] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:11:26.633] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:11:26.641] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:11:26.646] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:11:26.650] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:11:26.662] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:11:27.620] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:11:27.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:11:27.625] Server  LOG     [DB] Values: [50]
[00:11:27.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:11:27.630] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:11:58.613] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:11:58.614] Server  LOG     [DB] Values: [50]
[00:11:58.617] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:11:58.617] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:11:58.625] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:11:58.632] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:11:58.636] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:11:58.639] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:12:58.620] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:12:58.621] Server  LOG     [DB] Values: [50]
[00:12:58.624] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:12:58.628] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:12:58.632] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:12:58.635] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:12:58.637] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:12:58.637] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:13:58.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:13:58.617] Server  LOG     [DB] Values: [50]
[00:13:58.621] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:13:58.626] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:13:58.627] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:13:58.627] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:13:58.632] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:13:58.639] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:14:58.622] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:14:58.626] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:14:58.626] Server  LOG     [DB] Values: [50]
[00:14:58.631] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:14:58.636] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:14:58.639] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:14:58.639] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:14:58.649] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:15:58.615] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:15:58.616] Server  LOG     [DB] Values: [50]
[00:15:58.620] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:15:58.625] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:15:58.630] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:15:58.631] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:15:58.631] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:15:58.657] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:16:58.626] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:16:58.631] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:16:58.632] Server  LOG     [DB] Values: [50]
[00:16:58.636] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:16:58.640] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:16:58.644] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:16:58.644] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:16:58.654] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:17:07.602] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:17:07.602] Server  LOG     [DB] Values: [50]
[00:17:07.606] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:17:07.610] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:17:07.614] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:17:07.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:17:07.617] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:17:07.658] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:17:09.056] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:17:09.057] Server  LOG     [DB] Values: [50]
[00:17:09.058] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:17:09.059] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:17:09.073] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:17:09.401] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:17:09.409] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:17:10.060] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:17:11.057] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:17:11.057] Server  LOG     [DB] Values: [50]
[00:17:11.061] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:17:11.061] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:17:11.062] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:17:11.238] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:17:11.242] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:17:11.251] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:17:11.257] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:17:13.057] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:17:13.058] Server  LOG     [DB] Values: [50]
[00:17:13.063] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:17:13.064] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:17:13.064] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:17:15.064] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:17:15.065] Server  LOG     [DB] Values: [50]
[00:17:15.068] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:17:15.069] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:17:15.070] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:17:15.102] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:17:16.616] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:17:16.620] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:17:17.632] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:17:17.633] Server  LOG     [DB] Values: [50]
[00:17:17.637] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:17:17.646] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:17:17.646] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:17:19.620] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:17:19.620] Server  LOG     [DB] Values: [50]
[00:17:19.624] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:17:19.624] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:17:19.625] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:17:20.619] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:17:21.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:17:21.617] Server  LOG     [DB] Values: [50]
[00:17:21.621] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:17:21.625] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:17:21.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:17:21.626] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:17:21.669] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:17:23.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:17:23.624] Server  LOG     [DB] Values: [50]
[00:17:23.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:17:23.628] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:17:23.629] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:17:25.625] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:17:25.626] Server  LOG     [DB] Values: [50]
[00:17:25.629] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:17:25.632] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:17:25.633] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:17:25.634] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:17:26.243] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:17:26.247] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:17:27.055] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:17:27.056] Server  LOG     [DB] Values: [50]
[00:17:27.057] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:17:27.058] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:17:27.107] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:17:29.056] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:17:29.056] Server  LOG     [DB] Values: [50]
[00:17:29.058] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:17:29.058] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:17:29.103] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:17:30.066] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:17:30.429] Server  LOG     [DB] Query: SELECT * FROM products WHERE id = ?
[00:17:30.431] Server  LOG     [DB] Values: ["HC001"]
[00:17:42.333] Browser ERROR   {}
[00:17:42.349] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:17:42.355] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:17:42.356] Server  LOG     [DB] Values: [50]
[00:17:42.360] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:17:42.365] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:17:42.369] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:17:42.369] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:17:42.381] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:17:43.057] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:17:43.057] Server  LOG     [DB] Values: [50]
[00:17:43.058] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:17:43.059] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:17:43.102] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:17:45.056] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:17:45.057] Server  LOG     [DB] Values: [50]
[00:17:45.058] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:17:45.058] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:17:45.107] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:17:45.160] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:17:46.625] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:17:46.628] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:17:47.619] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:17:47.619] Server  LOG     [DB] Values: [50]
[00:17:47.623] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:17:47.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:17:47.624] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:17:49.622] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:17:49.623] Server  LOG     [DB] Values: [50]
[00:17:49.626] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:17:49.627] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:17:49.628] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:17:50.615] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:17:51.615] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:17:51.619] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:17:51.622] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:17:51.623] Server  LOG     [DB] Values: [50]
[00:17:51.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:17:51.629] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:17:51.668] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:17:53.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:17:53.611] Server  LOG     [DB] Values: [50]
[00:17:53.615] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:17:53.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:17:53.616] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:17:55.620] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:17:55.620] Server  LOG     [DB] Values: [50]
[00:17:55.624] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:17:55.627] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:17:55.628] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:17:55.629] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:17:56.612] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:17:56.616] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:17:57.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:17:57.612] Server  LOG     [DB] Values: [50]
[00:17:57.615] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:17:57.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:17:57.617] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:17:59.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:17:59.623] Server  LOG     [DB] Values: [50]
[00:17:59.626] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:17:59.627] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:17:59.628] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:00.612] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:18:01.059] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:01.059] Server  LOG     [DB] Values: [50]
[00:18:01.063] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:01.065] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:01.065] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:01.241] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:18:01.245] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:18:03.058] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:03.059] Server  LOG     [DB] Values: [50]
[00:18:03.062] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:03.063] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:03.063] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:03.591] Server  LOG     [DB] Query: INSERT INTO activity_logs (user_id, action, action_type, entity_type, entity_id, details) VALUES (?, 'Logged out', 'logout', 'User', ?, ?)
[00:18:03.591] Server  LOG     [DB] Values: [2,2,"{\"message\":\"User logged out\"}"]
[00:18:05.972] Server  LOG     [DB] Query: SELECT id, email, name, role, is_active FROM users WHERE email = ?
[00:18:05.972] Server  LOG     [DB] Values: ["manager@sodalicious.com"]
[00:18:05.974] Server  LOG     [DB] Query: INSERT INTO activity_logs (user_id, action, action_type, entity_type, entity_id, details) VALUES (?, 'Logged in', 'login', 'User', ?, 'User logged into the system')
[00:18:05.974] Server  LOG     [DB] Values: [2,2]
[00:18:06.074] Server  ERROR   [DB ERROR] Query failed: Error: CONSTRAINT `activity_logs.details` failed for `sodalicious_db`.`activity_logs`
[00:18:06.165] Server  ERROR   Failed to log login activity Error: CONSTRAINT `activity_logs.details` failed for `sodalicious_db`.`activity_logs`
[00:18:06.200] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:18:06.209] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:18:06.213] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:06.213] Server  LOG     [DB] Values: [50]
[00:18:06.217] Server  LOG     [DB] Query: SELECT id, name, email as username, role, is_active FROM users ORDER BY id ASC
[00:18:06.223] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:06.223] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:06.229] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:06.237] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:18:06.247] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:18:06.255] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:18:06.259] Server  LOG     [DB] Query: SELECT id, name, email as username, role, is_active FROM users ORDER BY id ASC
[00:18:06.270] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:06.270] Server  LOG     [DB] Values: [50]
[00:18:06.276] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:06.278] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:06.278] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:06.287] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:18:08.194] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:08.194] Server  LOG     [DB] Values: [50]
[00:18:08.198] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:08.199] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:08.199] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:09.773] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:18:09.781] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:18:10.202] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:10.202] Server  LOG     [DB] Values: [50]
[00:18:10.205] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:10.206] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:10.207] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:11.193] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:18:12.193] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:12.193] Server  LOG     [DB] Values: [50]
[00:18:12.194] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:12.195] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:12.208] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:14.198] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:14.199] Server  LOG     [DB] Values: [50]
[00:18:14.202] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:14.203] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:14.204] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:14.776] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:18:15.567] Server  LOG     [Inventory API] Incoming adjustment request
[00:18:15.568] Server  LOG     [DB] Query: SELECT id, name, stock_quantity FROM ingredients WHERE id = ? OR name = ? LIMIT 1
[00:18:15.569] Server  LOG     [DB] Values: [19,"19"]
[00:18:15.571] Server  LOG     [DB] Query: SELECT id FROM users WHERE id = ? LIMIT 1
[00:18:15.571] Server  LOG     [DB] Values: [1]
[00:18:15.572] Server  LOG     [Inventory API] Updating Blueberry Muffin: 15 -> 170
[00:18:15.572] Server  LOG     [DB] Query: UPDATE ingredients SET stock_quantity = ? WHERE id = ?
[00:18:15.573] Server  LOG     [DB] Values: [170,19]
[00:18:15.575] Server  LOG     [DB] Query: INSERT INTO inventory_logs (ingredient_id, user_id, log_type, quantity_changed, reason) VALUES (?, ?, ?, ?, ?)
[00:18:15.575] Server  LOG     [DB] Values: [19,1,"restock",155,"Manual Adjustment"]
[00:18:15.576] Server  LOG     [Inventory API] ✓ Stock updated and logged.
[00:18:15.585] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:15.590] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:18:16.200] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:16.200] Server  LOG     [DB] Values: [50]
[00:18:16.204] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:16.207] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:18:16.208] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:16.209] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:18.194] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:18.194] Server  LOG     [DB] Values: [50]
[00:18:18.197] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:18.198] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:18.199] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:19.776] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:18:20.193] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:20.193] Server  LOG     [DB] Values: [50]
[00:18:20.194] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:20.194] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:20.207] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:21.194] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:18:22.208] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:22.209] Server  LOG     [DB] Values: [50]
[00:18:22.212] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:22.214] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:22.214] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:24.205] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:24.205] Server  LOG     [DB] Values: [50]
[00:18:24.209] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:24.211] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:24.211] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:24.773] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:18:26.203] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:18:26.207] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:26.207] Server  LOG     [DB] Values: [50]
[00:18:26.211] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:26.215] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:26.215] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:26.599] Server  LOG     [Inventory API] Incoming adjustment request
[00:18:26.600] Server  LOG     [DB] Query: SELECT id, name, stock_quantity FROM ingredients WHERE id = ? OR name = ? LIMIT 1
[00:18:26.601] Server  LOG     [DB] Values: [20,"20"]
[00:18:26.602] Server  LOG     [DB] Query: SELECT id FROM users WHERE id = ? LIMIT 1
[00:18:26.603] Server  LOG     [DB] Values: [1]
[00:18:26.604] Server  LOG     [Inventory API] Updating Cheese Danish: 12 -> 24
[00:18:26.604] Server  LOG     [DB] Query: UPDATE ingredients SET stock_quantity = ? WHERE id = ?
[00:18:26.605] Server  LOG     [DB] Values: [24,20]
[00:18:26.606] Server  LOG     [DB] Query: INSERT INTO inventory_logs (ingredient_id, user_id, log_type, quantity_changed, reason) VALUES (?, ?, ?, ?, ?)
[00:18:26.607] Server  LOG     [DB] Values: [20,1,"restock",12,"Manual Adjustment"]
[00:18:26.608] Server  LOG     [Inventory API] ✓ Stock updated and logged.
[00:18:26.616] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:26.620] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:18:28.195] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:28.195] Server  LOG     [DB] Values: [50]
[00:18:28.199] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:28.199] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:28.200] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:29.776] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:18:30.194] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:30.195] Server  LOG     [DB] Values: [50]
[00:18:30.201] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:30.202] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:30.202] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:30.718] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:18:30.723] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:18:30.729] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:18:30.748] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:18:31.195] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:18:32.001] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:18:32.005] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:18:32.016] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:18:32.022] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:18:32.207] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:32.207] Server  LOG     [DB] Values: [50]
[00:18:32.211] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:32.213] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:32.213] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:34.197] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:34.197] Server  LOG     [DB] Values: [50]
[00:18:34.201] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:34.202] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:34.202] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:36.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:36.618] Server  LOG     [DB] Values: [50]
[00:18:36.621] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:36.624] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:18:36.625] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:36.626] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:37.618] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:18:37.622] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:18:38.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:38.617] Server  LOG     [DB] Values: [50]
[00:18:38.621] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:38.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:38.623] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:40.612] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:40.612] Server  LOG     [DB] Values: [50]
[00:18:40.616] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:40.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:40.617] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:41.614] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:18:42.620] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:18:42.624] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:18:42.627] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:42.628] Server  LOG     [DB] Values: [50]
[00:18:42.632] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:42.636] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:42.637] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:44.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:44.622] Server  LOG     [DB] Values: [50]
[00:18:44.625] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:44.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:44.626] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:46.625] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:46.626] Server  LOG     [DB] Values: [50]
[00:18:46.629] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:46.632] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:18:46.633] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:46.634] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:47.618] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:18:47.622] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:18:48.615] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:48.615] Server  LOG     [DB] Values: [50]
[00:18:48.619] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:48.620] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:48.621] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:50.194] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:50.194] Server  LOG     [DB] Values: [50]
[00:18:50.196] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:50.196] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:50.248] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:50.919] Server  LOG     [DB] Query: SELECT * FROM products WHERE id = ?
[00:18:50.920] Server  LOG     [DB] Values: ["HC001"]
[00:18:52.451] Browser ERROR   {}
[00:18:52.461] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:18:52.465] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:18:52.471] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:18:52.475] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:52.475] Server  LOG     [DB] Values: [50]
[00:18:52.482] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:52.482] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:52.486] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:54.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:54.611] Server  LOG     [DB] Values: [50]
[00:18:54.613] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:54.613] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:54.617] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:56.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:56.611] Server  LOG     [DB] Values: [50]
[00:18:56.614] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:18:56.618] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:18:56.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:56.619] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:57.616] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:18:57.620] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:18:58.615] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:18:58.615] Server  LOG     [DB] Values: [50]
[00:18:58.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:18:58.617] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:18:58.623] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:00.694] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:00.694] Server  LOG     [DB] Values: [50]
[00:19:00.696] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:00.696] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:00.700] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:01.621] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:19:02.613] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:19:02.623] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:19:02.627] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:02.627] Server  LOG     [DB] Values: [50]
[00:19:02.631] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:02.634] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:02.634] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:04.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:04.622] Server  LOG     [DB] Values: [50]
[00:19:04.625] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:04.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:04.627] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:06.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:06.612] Server  LOG     [DB] Values: [50]
[00:19:06.615] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:06.619] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:19:06.620] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:06.620] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:07.617] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:19:07.621] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:19:08.612] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:08.612] Server  LOG     [DB] Values: [50]
[00:19:08.615] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:08.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:08.617] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:10.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:10.611] Server  LOG     [DB] Values: [50]
[00:19:10.615] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:10.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:10.616] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:11.618] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:19:12.614] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:19:12.617] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:19:12.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:12.622] Server  LOG     [DB] Values: [50]
[00:19:12.627] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:12.627] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:12.632] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:14.622] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:14.623] Server  LOG     [DB] Values: [50]
[00:19:14.626] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:14.627] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:14.628] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:16.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:16.616] Server  LOG     [DB] Values: [50]
[00:19:16.620] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:16.623] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:19:16.624] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:16.624] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:17.622] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:19:17.626] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:19:18.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:18.614] Server  LOG     [DB] Values: [50]
[00:19:18.617] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:18.618] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:18.619] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:20.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:20.622] Server  LOG     [DB] Values: [50]
[00:19:20.626] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:20.627] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:20.627] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:21.610] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:19:22.611] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:19:22.615] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:19:22.619] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:22.619] Server  LOG     [DB] Values: [50]
[00:19:22.624] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:22.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:22.630] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:24.615] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:24.615] Server  LOG     [DB] Values: [50]
[00:19:24.618] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:24.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:24.620] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:26.625] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:26.626] Server  LOG     [DB] Values: [50]
[00:19:26.629] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:26.633] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:19:26.634] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:26.634] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:27.614] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:19:27.618] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:19:28.618] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:28.619] Server  LOG     [DB] Values: [50]
[00:19:28.622] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:28.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:28.624] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:30.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:30.625] Server  LOG     [DB] Values: [50]
[00:19:30.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:30.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:30.629] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:31.621] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:19:32.616] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:19:32.620] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:19:32.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:32.624] Server  LOG     [DB] Values: [50]
[00:19:32.631] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:32.632] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:32.633] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:34.619] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:34.619] Server  LOG     [DB] Values: [50]
[00:19:34.623] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:34.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:34.624] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:36.618] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:36.619] Server  LOG     [DB] Values: [50]
[00:19:36.622] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:36.626] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:19:36.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:36.627] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:37.623] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:19:37.627] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:19:38.625] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:38.626] Server  LOG     [DB] Values: [50]
[00:19:38.629] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:38.630] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:38.631] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:40.648] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:40.649] Server  LOG     [DB] Values: [50]
[00:19:40.651] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:40.651] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:40.661] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:41.196] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:19:42.003] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:19:42.008] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:19:42.195] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:42.196] Server  LOG     [DB] Values: [50]
[00:19:42.199] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:42.201] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:42.201] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:44.198] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:44.198] Server  LOG     [DB] Values: [50]
[00:19:44.202] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:44.204] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:44.204] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:46.199] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:46.199] Server  LOG     [DB] Values: [50]
[00:19:46.203] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:46.206] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:19:46.207] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:46.208] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:47.014] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:19:47.018] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:19:48.195] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:48.196] Server  LOG     [DB] Values: [50]
[00:19:48.199] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:19:48.200] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:48.201] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:48.427] Server  LOG     [DB] Query: INSERT INTO activity_logs (user_id, action, action_type, entity_type, entity_id, details) VALUES (?, 'Logged out', 'logout', 'User', ?, ?)
[00:19:48.428] Server  LOG     [DB] Values: [2,2,"{\"message\":\"User logged out\"}"]
[00:19:49.607] Server  LOG     [DB] Query: SELECT id, email, name, role, is_active FROM users WHERE email = ?
[00:19:49.608] Server  LOG     [DB] Values: ["cashier@sodalicious.com"]
[00:19:49.611] Server  LOG     [DB] Query: INSERT INTO activity_logs (user_id, action, action_type, entity_type, entity_id, details) VALUES (?, 'Logged in', 'login', 'User', ?, 'User logged into the system')
[00:19:49.611] Server  LOG     [DB] Values: [1,1]
[00:19:49.720] Server  ERROR   [DB ERROR] Query failed: Error: CONSTRAINT `activity_logs.details` failed for `sodalicious_db`.`activity_logs`
[00:19:49.800] Server  ERROR   Failed to log login activity Error: CONSTRAINT `activity_logs.details` failed for `sodalicious_db`.`activity_logs`
[00:19:49.890] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:19:49.905] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:19:49.910] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:49.910] Server  LOG     [DB] Values: [50]
[00:19:49.918] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:49.918] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:49.927] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:49.928] Server  LOG     [DB] Values: [50]
[00:19:49.930] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:49.934] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:51.879] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:51.879] Server  LOG     [DB] Values: [50]
[00:19:51.880] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:51.880] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:53.881] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:53.882] Server  LOG     [DB] Values: [50]
[00:19:53.883] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:53.883] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:54.882] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:19:55.877] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:55.877] Server  LOG     [DB] Values: [50]
[00:19:55.881] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:55.882] Server  LOG     [DB] Values: ["5,4,3,2,1"]
[00:19:56.717] Server  LOG     [Order API] Incoming POST request
[00:19:56.718] Server  LOG     [Order API] Processing order with 1 items
[00:19:56.719] Server  LOG     [DB] Query: SELECT id FROM users WHERE role = 'cashier' LIMIT 1
[00:19:56.719] Server  LOG     [Order API] Using Cashier ID: 1
[00:19:56.720] Server  LOG     [DB] Query: INSERT INTO orders (order_number, cashier_id, customer_name, total_amount, payment_method, order_status) VALUES (?, ?, ?, ?, ?, 'completed')
[00:19:56.720] Server  LOG     [DB] Values: ["ORD-1767353370326",1,"Walk-in",59.4,"cash"]
[00:19:56.722] Server  LOG     [DB] Query: SELECT id FROM orders WHERE order_number = ? LIMIT 1
[00:19:56.722] Server  LOG     [DB] Values: ["ORD-1767353370326"]
[00:19:56.724] Server  LOG     [Order API] Created DB Order ID: 6
[00:19:56.724] Server  LOG     [Order API] Mapping item: "Café Latte" (Base: "Café Latte")
[00:19:56.726] Server  LOG     [DB] Query: SELECT id FROM products WHERE name = ? LIMIT 1
[00:19:56.727] Server  LOG     [DB] Values: ["Café Latte"]
[00:19:56.728] Server  LOG     [Order API] Found DB Product: Café Latte (ID: 2)
[00:19:56.728] Server  LOG     [DB] Query: INSERT INTO order_items (order_id, product_id, quantity, unit_price, subtotal) VALUES (?, ?, ?, ?, ?)
[00:19:56.729] Server  LOG     [DB] Values: [6,2,1,55,55]
[00:19:56.730] Server  LOG     [DB] Query: UPDATE products SET stock_quantity = stock_quantity - ? WHERE id = ?
[00:19:56.731] Server  LOG     [DB] Values: [1,2]
[00:19:56.732] Server  LOG     [Order API] Deducted 1 from product stock (ID: 2)
[00:19:56.733] Server  LOG     [DB] Query: SELECT pi.ingredient_id, pi.amount, i.stock_quantity, i.name as ing_name FROM product_ingredients pi JOIN ingredients i ON pi.ingredient_id = i.id WHERE pi.product_id = ?
[00:19:56.734] Server  LOG     [DB] Values: [2]
[00:19:56.735] Server  LOG     [Order API] Found 2 ingredients for Café Latte
[00:19:56.735] Server  LOG     [Order API] Deducting 18 from Espresso Beans. Prev: 4280, New: 4262
[00:19:56.735] Server  LOG     [DB] Query: UPDATE ingredients SET stock_quantity = ? WHERE id = ?
[00:19:56.736] Server  LOG     [DB] Values: [4262,1]
[00:19:56.737] Server  LOG     [DB] Query: INSERT INTO inventory_logs (ingredient_id, user_id, log_type, quantity_changed, reason) VALUES (?, ?, 'sale', ?, ?)
[00:19:56.737] Server  LOG     [DB] Values: [1,1,-18,"Order ORD-1767353370326"]
[00:19:56.738] Server  LOG     [Order API] Deducting 200 from Milk. Prev: 10000, New: 9800
[00:19:56.739] Server  LOG     [DB] Query: UPDATE ingredients SET stock_quantity = ? WHERE id = ?
[00:19:56.739] Server  LOG     [DB] Values: [9800,2]
[00:19:56.740] Server  LOG     [DB] Query: INSERT INTO inventory_logs (ingredient_id, user_id, log_type, quantity_changed, reason) VALUES (?, ?, 'sale', ?, ?)
[00:19:56.741] Server  LOG     [DB] Values: [2,1,-200,"Order ORD-1767353370326"]
[00:19:56.743] Server  LOG     [Order API] ✓ Order ORD-1767353370326 fully processed and synced.
[00:19:56.769] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:19:57.881] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:57.881] Server  LOG     [DB] Values: [50]
[00:19:57.883] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:57.884] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:19:59.883] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:19:59.888] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:19:59.888] Server  LOG     [DB] Values: [50]
[00:19:59.892] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:19:59.893] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:01.878] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:01.878] Server  LOG     [DB] Values: [50]
[00:20:01.880] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:01.880] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:04.613] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:04.613] Server  LOG     [DB] Values: [50]
[00:20:04.614] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:04.615] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:05.615] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:20:06.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:06.625] Server  LOG     [DB] Values: [50]
[00:20:06.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:06.626] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:08.612] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:08.613] Server  LOG     [DB] Values: [50]
[00:20:08.614] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:08.614] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:10.625] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:20:10.629] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:10.630] Server  LOG     [DB] Values: [50]
[00:20:10.633] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:10.633] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:12.619] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:12.619] Server  LOG     [DB] Values: [50]
[00:20:12.620] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:12.621] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:14.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:14.611] Server  LOG     [DB] Values: [50]
[00:20:14.612] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:14.613] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:15.617] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:20:16.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:16.612] Server  LOG     [DB] Values: [50]
[00:20:16.613] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:16.613] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:18.622] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:18.622] Server  LOG     [DB] Values: [50]
[00:20:18.624] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:18.624] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:20.624] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:20:20.629] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:20.629] Server  LOG     [DB] Values: [50]
[00:20:20.632] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:20.633] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:22.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:22.615] Server  LOG     [DB] Values: [50]
[00:20:22.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:22.616] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:24.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:24.623] Server  LOG     [DB] Values: [50]
[00:20:24.624] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:24.625] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:25.610] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:20:26.619] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:26.620] Server  LOG     [DB] Values: [50]
[00:20:26.621] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:26.621] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:28.622] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:28.623] Server  LOG     [DB] Values: [50]
[00:20:28.624] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:28.624] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:30.612] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:20:30.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:30.617] Server  LOG     [DB] Values: [50]
[00:20:30.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:30.620] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:32.615] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:32.615] Server  LOG     [DB] Values: [50]
[00:20:32.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:32.617] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:34.610] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:34.611] Server  LOG     [DB] Values: [50]
[00:20:34.613] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:34.613] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:35.617] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:20:36.670] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:36.671] Server  LOG     [DB] Values: [50]
[00:20:36.672] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:36.672] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:38.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:38.615] Server  LOG     [DB] Values: [50]
[00:20:38.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:38.617] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:40.625] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:20:40.629] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:40.630] Server  LOG     [DB] Values: [50]
[00:20:40.632] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:40.633] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:42.612] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:42.612] Server  LOG     [DB] Values: [50]
[00:20:42.613] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:42.613] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:44.610] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:44.610] Server  LOG     [DB] Values: [50]
[00:20:44.612] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:44.612] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:45.624] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:20:46.613] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:46.613] Server  LOG     [DB] Values: [50]
[00:20:46.635] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:46.636] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:48.615] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:48.616] Server  LOG     [DB] Values: [50]
[00:20:48.617] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:48.617] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:50.624] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:20:50.629] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:50.630] Server  LOG     [DB] Values: [50]
[00:20:50.633] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:50.634] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:52.613] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:52.613] Server  LOG     [DB] Values: [50]
[00:20:52.615] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:52.615] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:54.622] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:54.623] Server  LOG     [DB] Values: [50]
[00:20:54.624] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:54.624] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:55.617] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:20:56.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:56.615] Server  LOG     [DB] Values: [50]
[00:20:56.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:56.616] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:20:58.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:20:58.614] Server  LOG     [DB] Values: [50]
[00:20:58.615] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:20:58.616] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:21:00.612] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:21:00.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:21:00.617] Server  LOG     [DB] Values: [50]
[00:21:00.620] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:21:00.620] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:21:02.618] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:21:02.619] Server  LOG     [DB] Values: [50]
[00:21:02.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:21:02.620] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:21:58.621] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:21:58.625] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:21:58.625] Server  LOG     [DB] Values: [50]
[00:21:58.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:21:58.629] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:22:58.618] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:22:58.622] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:22:58.623] Server  LOG     [DB] Values: [50]
[00:22:58.625] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:22:58.626] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:23:58.623] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:23:58.628] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:23:58.629] Server  LOG     [DB] Values: [50]
[00:23:58.632] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:23:58.632] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:24:34.601] Server  LOG      ✓ Compiled in 223ms
[00:24:58.624] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:24:58.628] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:24:58.629] Server  LOG     [DB] Values: [50]
[00:24:58.632] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:24:58.633] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:11.096] Server  LOG      ✓ Compiled in 66ms
[00:25:11.134] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:25:11.138] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:11.139] Server  LOG     [DB] Values: [50]
[00:25:11.141] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:11.141] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:13.609] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:13.610] Server  LOG     [DB] Values: [50]
[00:25:13.611] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:13.612] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:15.622] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:15.623] Server  LOG     [DB] Values: [50]
[00:25:15.624] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:15.624] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:16.614] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:25:17.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:17.623] Server  LOG     [DB] Values: [50]
[00:25:17.624] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:17.624] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:19.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:19.617] Server  LOG     [DB] Values: [50]
[00:25:19.618] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:19.619] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:21.138] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:21.139] Server  LOG     [DB] Values: [50]
[00:25:21.143] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:25:21.144] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:21.145] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:23.137] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:23.137] Server  LOG     [DB] Values: [50]
[00:25:23.138] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:23.139] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:23.477] Server  LOG     [DB] Query: INSERT INTO activity_logs (user_id, action, action_type, entity_type, entity_id, details) VALUES (?, 'Logged out', 'logout', 'User', ?, ?)
[00:25:23.477] Server  LOG     [DB] Values: [1,1,"{\"message\":\"User logged out\"}"]
[00:25:26.269] Server  LOG     [DB] Query: SELECT id, email, name, role, is_active FROM users WHERE email = ?
[00:25:26.269] Server  LOG     [DB] Values: ["manager@sodalicious.com"]
[00:25:26.288] Server  LOG     [DB] Query: INSERT INTO activity_logs (user_id, action, action_type, entity_type, entity_id, details) VALUES (?, 'Logged in', 'login', 'User', ?, 'User logged into the system')
[00:25:26.289] Server  LOG     [DB] Values: [2,2]
[00:25:26.383] Server  ERROR   [DB ERROR] Query failed: Error: CONSTRAINT `activity_logs.details` failed for `sodalicious_db`.`activity_logs`
[00:25:26.448] Server  ERROR   Failed to log login activity Error: CONSTRAINT `activity_logs.details` failed for `sodalicious_db`.`activity_logs`
[00:25:26.504] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:25:26.508] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:25:26.518] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:25:26.521] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:26.522] Server  LOG     [DB] Values: [50]
[00:25:26.525] Server  LOG     [DB] Query: SELECT id, name, email as username, role, is_active FROM users ORDER BY id ASC
[00:25:26.532] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:25:26.537] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:26.537] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:26.552] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:25:26.557] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:25:26.562] Server  LOG     [DB] Query: SELECT id, name, email as username, role, is_active FROM users ORDER BY id ASC
[00:25:26.566] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:25:26.576] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:26.576] Server  LOG     [DB] Values: [50]
[00:25:26.583] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:26.583] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:26.590] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:25:28.484] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:28.484] Server  LOG     [DB] Values: [50]
[00:25:28.486] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:28.486] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:28.490] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:25:30.483] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:25:30.488] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:30.488] Server  LOG     [DB] Values: [50]
[00:25:30.491] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:30.492] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:31.484] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:25:31.489] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:25:31.493] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:25:32.483] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:32.484] Server  LOG     [DB] Values: [50]
[00:25:32.488] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:25:32.489] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:32.489] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:33.060] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:25:33.069] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:25:34.484] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:34.484] Server  LOG     [DB] Values: [50]
[00:25:34.488] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:25:34.488] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:34.489] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:35.493] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:25:35.497] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:25:35.505] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:25:35.510] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:25:36.477] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:36.477] Server  LOG     [DB] Values: [50]
[00:25:36.482] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:36.482] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:36.515] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:25:36.556] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:25:38.476] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:38.477] Server  LOG     [DB] Values: [50]
[00:25:38.478] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:38.478] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:38.524] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:25:40.480] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:40.480] Server  LOG     [DB] Values: [50]
[00:25:40.484] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:25:40.485] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:40.485] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:40.537] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:25:40.541] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:25:41.614] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:25:42.696] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:42.697] Server  LOG     [DB] Values: [50]
[00:25:42.702] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:25:42.703] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:42.703] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:44.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:44.617] Server  LOG     [DB] Values: [50]
[00:25:44.620] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:25:44.621] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:44.622] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:45.615] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:25:45.619] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:25:46.481] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:46.482] Server  LOG     [DB] Values: [50]
[00:25:46.485] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:25:46.489] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:25:46.490] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:46.490] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:48.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:48.612] Server  LOG     [DB] Values: [50]
[00:25:48.616] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:25:48.617] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:48.617] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:50.624] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:25:50.628] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:50.628] Server  LOG     [DB] Values: [50]
[00:25:50.632] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:25:50.635] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:25:50.638] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:50.639] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:51.626] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:25:52.613] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:52.613] Server  LOG     [DB] Values: [50]
[00:25:52.616] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:25:52.617] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:52.618] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:54.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:54.617] Server  LOG     [DB] Values: [50]
[00:25:54.621] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:25:54.621] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:54.622] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:55.621] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:25:55.625] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:25:56.615] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:56.615] Server  LOG     [DB] Values: [50]
[00:25:56.619] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:25:56.622] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:25:56.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:56.623] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:25:58.613] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:25:58.614] Server  LOG     [DB] Values: [50]
[00:25:58.618] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:25:58.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:25:58.619] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:26:00.613] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:26:00.613] Server  LOG     [DB] Values: [50]
[00:26:00.617] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:26:00.621] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:26:00.625] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:26:00.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:26:00.626] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:26:01.614] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:26:02.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:26:02.624] Server  LOG     [DB] Values: [50]
[00:26:02.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:26:02.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:26:02.629] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:26:04.625] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:26:04.625] Server  LOG     [DB] Values: [50]
[00:26:04.629] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:26:04.630] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:26:04.630] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:26:05.623] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:26:05.628] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:26:06.486] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:26:06.486] Server  LOG     [DB] Values: [50]
[00:26:06.491] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:26:06.495] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:26:06.496] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:26:06.497] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:26:08.480] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:26:08.481] Server  LOG     [DB] Values: [50]
[00:26:08.484] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:26:08.485] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:26:08.485] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:26:10.487] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:26:10.487] Server  LOG     [DB] Values: [50]
[00:26:10.490] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:26:10.492] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:26:10.493] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:26:10.544] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:26:10.548] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:26:11.478] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:26:12.478] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:26:12.479] Server  LOG     [DB] Values: [50]
[00:26:12.483] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:26:12.485] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:26:12.485] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:26:14.478] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:26:14.478] Server  LOG     [DB] Values: [50]
[00:26:14.483] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:26:14.484] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:26:14.484] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:26:15.505] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:26:15.509] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:26:16.479] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:26:16.484] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:26:16.484] Server  LOG     [DB] Values: [50]
[00:26:16.490] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:26:16.492] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:26:16.493] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:26:18.477] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:26:18.478] Server  LOG     [DB] Values: [50]
[00:26:18.479] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:26:18.479] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:26:18.530] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:26:20.479] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:26:20.480] Server  LOG     [DB] Values: [50]
[00:26:20.484] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:26:20.485] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:26:20.485] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:26:20.533] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:26:20.536] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:26:21.487] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:26:22.484] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:26:22.484] Server  LOG     [DB] Values: [50]
[00:26:22.488] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:26:22.488] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:26:22.489] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:26:24.488] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:26:24.488] Server  LOG     [DB] Values: [50]
[00:26:24.492] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:26:24.493] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:26:24.494] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:26:25.494] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:26:25.498] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:26:26.292] Server  LOG     [DB] Query: SELECT * FROM products WHERE id = ?
[00:26:26.293] Server  LOG     [DB] Values: ["HC002"]
[00:26:41.539] Browser LOG     Fetching details for: HC002
[00:26:41.539] Browser ERROR   Fetch failed: 404 Not Found
[00:26:41.539] Browser ERROR   {}
[00:26:41.549] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:26:41.550] Server  LOG     [DB] Values: [50]
[00:26:41.553] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:26:41.557] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:26:41.561] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:26:41.566] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:26:41.567] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:26:41.567] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:26:42.482] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:26:42.482] Server  LOG     [DB] Values: [50]
[00:26:42.486] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:26:42.487] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:26:42.488] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:26:44.487] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:26:44.488] Server  LOG     [DB] Values: [50]
[00:26:44.491] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:26:44.492] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:26:44.492] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:26:45.496] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:26:45.501] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:26:46.491] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:26:46.491] Server  LOG     [DB] Values: [50]
[00:26:46.494] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:26:46.498] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:26:46.499] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:26:46.499] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:26:48.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:26:48.625] Server  LOG     [DB] Values: [50]
[00:26:48.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:26:48.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:26:48.630] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:26:50.628] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:26:50.628] Server  LOG     [DB] Values: [50]
[00:26:50.632] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:26:50.638] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:26:50.639] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:26:50.639] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:26:50.668] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:26:51.613] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:26:52.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:26:52.617] Server  LOG     [DB] Values: [50]
[00:26:52.620] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:26:52.621] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:26:52.621] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:26:54.481] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:26:54.482] Server  LOG     [DB] Values: [50]
[00:26:54.486] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:26:54.487] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:26:54.487] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:26:55.497] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:26:55.501] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:26:56.487] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:26:56.488] Server  LOG     [DB] Values: [50]
[00:26:56.491] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:26:56.495] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:26:56.498] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:26:56.499] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:26:58.615] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:26:58.616] Server  LOG     [DB] Values: [50]
[00:26:58.620] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:26:58.621] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:26:58.621] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:00.617] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:27:00.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:00.622] Server  LOG     [DB] Values: [50]
[00:27:00.626] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:00.629] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:27:00.632] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:00.633] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:01.612] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:27:02.618] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:02.619] Server  LOG     [DB] Values: [50]
[00:27:02.622] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:02.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:02.623] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:04.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:04.625] Server  LOG     [DB] Values: [50]
[00:27:04.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:04.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:04.629] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:05.624] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:27:05.627] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:27:06.618] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:06.619] Server  LOG     [DB] Values: [50]
[00:27:06.622] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:06.625] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:27:06.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:06.626] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:08.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:08.611] Server  LOG     [DB] Values: [50]
[00:27:08.614] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:08.615] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:08.616] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:10.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:10.622] Server  LOG     [DB] Values: [50]
[00:27:10.625] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:27:10.629] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:10.633] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:27:10.634] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:10.635] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:11.618] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:27:12.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:12.625] Server  LOG     [DB] Values: [50]
[00:27:12.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:12.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:12.630] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:14.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:14.624] Server  LOG     [DB] Values: [50]
[00:27:14.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:14.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:14.629] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:15.617] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:27:15.621] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:27:16.612] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:16.612] Server  LOG     [DB] Values: [50]
[00:27:16.616] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:16.620] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:27:16.621] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:16.621] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:18.625] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:18.625] Server  LOG     [DB] Values: [50]
[00:27:18.629] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:18.630] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:18.630] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:20.490] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:20.491] Server  LOG     [DB] Values: [50]
[00:27:20.494] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:20.495] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:20.495] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:20.542] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:27:20.545] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:27:21.478] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:27:22.480] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:22.480] Server  LOG     [DB] Values: [50]
[00:27:22.483] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:22.484] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:22.485] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:24.479] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:24.480] Server  LOG     [DB] Values: [50]
[00:27:24.483] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:24.484] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:24.484] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:25.494] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:27:25.498] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:27:26.481] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:26.481] Server  LOG     [DB] Values: [50]
[00:27:26.485] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:26.489] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:27:26.490] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:26.490] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:28.528] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:28.532] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:28.533] Server  LOG     [DB] Values: [50]
[00:27:28.536] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:28.537] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:30.478] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:30.479] Server  LOG     [DB] Values: [50]
[00:27:30.482] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:30.483] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:30.483] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:30.532] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:27:30.537] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:27:31.480] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:27:32.481] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:32.482] Server  LOG     [DB] Values: [50]
[00:27:32.486] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:32.487] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:32.487] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:34.618] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:34.618] Server  LOG     [DB] Values: [50]
[00:27:34.622] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:34.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:34.624] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:35.624] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:27:35.628] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:27:36.615] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:36.616] Server  LOG     [DB] Values: [50]
[00:27:36.619] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:36.622] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:27:36.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:36.623] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:38.615] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:38.616] Server  LOG     [DB] Values: [50]
[00:27:38.619] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:38.620] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:38.620] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:40.622] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:40.623] Server  LOG     [DB] Values: [50]
[00:27:40.626] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:40.630] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:27:40.631] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:40.631] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:40.637] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:27:41.614] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:27:42.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:42.615] Server  LOG     [DB] Values: [50]
[00:27:42.618] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:42.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:42.620] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:44.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:44.612] Server  LOG     [DB] Values: [50]
[00:27:44.615] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:44.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:44.617] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:45.627] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:27:45.631] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:27:46.613] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:46.614] Server  LOG     [DB] Values: [50]
[00:27:46.617] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:46.621] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:27:46.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:46.624] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:48.622] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:48.623] Server  LOG     [DB] Values: [50]
[00:27:48.626] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:48.628] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:48.628] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:50.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:50.622] Server  LOG     [DB] Values: [50]
[00:27:50.627] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:27:50.630] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:50.634] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:27:50.635] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:50.635] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:51.615] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:27:52.612] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:52.613] Server  LOG     [DB] Values: [50]
[00:27:52.616] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:52.617] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:52.617] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:54.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:54.624] Server  LOG     [DB] Values: [50]
[00:27:54.629] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:54.630] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:54.630] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:55.497] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:27:55.506] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:27:56.488] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:27:56.492] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:27:56.497] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:56.498] Server  LOG     [DB] Values: [50]
[00:27:56.507] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:56.507] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:58.478] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:27:58.478] Server  LOG     [DB] Values: [50]
[00:27:58.479] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:27:58.480] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:27:58.527] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:00.483] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:00.483] Server  LOG     [DB] Values: [50]
[00:28:00.486] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:00.487] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:00.488] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:00.533] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:28:00.538] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:28:01.487] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:28:02.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:02.624] Server  LOG     [DB] Values: [50]
[00:28:02.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:02.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:02.630] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:04.292] Server  LOG      ✓ Compiled in 67ms
[00:28:04.338] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:28:04.343] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:28:04.347] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:04.348] Server  LOG     [DB] Values: [50]
[00:28:04.354] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:04.355] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:04.359] Server  LOG     [DB] Query: SELECT id, name, email as username, role, is_active FROM users ORDER BY id ASC
[00:28:04.365] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:04.372] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:28:06.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:06.615] Server  LOG     [DB] Values: [50]
[00:28:06.618] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:06.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:06.619] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:08.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:08.623] Server  LOG     [DB] Values: [50]
[00:28:08.627] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:08.628] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:08.628] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:09.610] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:28:09.614] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:28:09.617] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:28:10.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:10.622] Server  LOG     [DB] Values: [50]
[00:28:10.625] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:10.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:10.626] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:12.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:12.618] Server  LOG     [DB] Values: [50]
[00:28:12.621] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:12.622] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:12.622] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:14.619] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:28:14.624] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:28:14.628] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:14.628] Server  LOG     [DB] Values: [50]
[00:28:14.632] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:14.637] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:28:14.641] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:14.642] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:16.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:16.622] Server  LOG     [DB] Values: [50]
[00:28:16.625] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:16.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:16.626] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:17.933] Server  LOG      ✓ Compiled in 61ms
[00:28:17.980] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:28:17.984] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:28:17.988] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:17.989] Server  LOG     [DB] Values: [50]
[00:28:17.997] Server  LOG     [DB] Query: SELECT id, name, email as username, role, is_active FROM users ORDER BY id ASC
[00:28:17.997] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:17.998] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:18.003] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:18.029] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:28:20.615] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:20.615] Server  LOG     [DB] Values: [50]
[00:28:20.619] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:20.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:20.620] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:22.618] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:22.619] Server  LOG     [DB] Values: [50]
[00:28:22.622] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:22.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:22.623] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:23.625] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:28:23.629] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:28:23.632] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:28:24.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:24.622] Server  LOG     [DB] Values: [50]
[00:28:24.625] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:24.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:24.626] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:26.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:26.617] Server  LOG     [DB] Values: [50]
[00:28:26.620] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:26.621] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:26.622] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:28.627] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:28:28.630] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:28:28.634] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:28.634] Server  LOG     [DB] Values: [50]
[00:28:28.639] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:28.644] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:28.644] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:28.648] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:28:30.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:30.616] Server  LOG     [DB] Values: [50]
[00:28:30.620] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:30.620] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:30.621] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:32.618] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:32.618] Server  LOG     [DB] Values: [50]
[00:28:32.622] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:32.622] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:32.623] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:33.617] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:28:33.621] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:28:33.624] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:28:34.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:34.625] Server  LOG     [DB] Values: [50]
[00:28:34.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:34.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:34.629] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:36.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:36.622] Server  LOG     [DB] Values: [50]
[00:28:36.625] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:36.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:36.626] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:38.618] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:28:38.621] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:28:38.626] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:38.627] Server  LOG     [DB] Values: [50]
[00:28:38.634] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:38.641] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:28:38.642] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:38.643] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:40.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:40.624] Server  LOG     [DB] Values: [50]
[00:28:40.627] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:40.628] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:40.629] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:42.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:42.617] Server  LOG     [DB] Values: [50]
[00:28:42.620] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:42.621] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:42.621] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:43.625] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:28:43.629] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:28:43.632] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:28:44.613] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:44.613] Server  LOG     [DB] Values: [50]
[00:28:44.617] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:44.617] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:44.618] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:46.615] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:46.615] Server  LOG     [DB] Values: [50]
[00:28:46.619] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:46.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:46.620] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:48.622] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:28:48.626] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:28:48.630] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:48.630] Server  LOG     [DB] Values: [50]
[00:28:48.635] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:48.645] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:28:48.646] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:48.646] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:50.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:50.617] Server  LOG     [DB] Values: [50]
[00:28:50.621] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:50.622] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:50.622] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:52.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:52.614] Server  LOG     [DB] Values: [50]
[00:28:52.618] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:52.618] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:52.619] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:53.625] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:28:53.629] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:28:53.632] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:28:54.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:54.615] Server  LOG     [DB] Values: [50]
[00:28:54.618] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:54.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:54.619] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:56.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:56.615] Server  LOG     [DB] Values: [50]
[00:28:56.618] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:56.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:56.619] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:58.620] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:28:58.625] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:28:58.629] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:28:58.630] Server  LOG     [DB] Values: [50]
[00:28:58.638] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:28:58.640] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:28:58.640] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:28:58.647] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:29:00.610] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:00.610] Server  LOG     [DB] Values: [50]
[00:29:00.614] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:00.614] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:00.615] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:13.586] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:13.587] Server  LOG     [DB] Values: [50]
[00:29:13.596] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:13.597] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:13.604] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:29:13.611] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:13.616] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:29:13.620] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:29:13.977] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:13.978] Server  LOG     [DB] Values: [50]
[00:29:13.979] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:13.979] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:14.030] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:15.981] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:15.982] Server  LOG     [DB] Values: [50]
[00:29:15.985] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:15.986] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:15.986] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:17.978] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:29:17.982] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:29:17.985] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:17.985] Server  LOG     [DB] Values: [50]
[00:29:17.990] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:17.991] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:18.030] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:18.034] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:29:20.684] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:20.685] Server  LOG     [DB] Values: [50]
[00:29:20.689] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:20.691] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:20.691] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:22.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:22.615] Server  LOG     [DB] Values: [50]
[00:29:22.619] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:22.620] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:22.621] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:23.610] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:29:23.614] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:29:23.618] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:29:24.619] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:24.620] Server  LOG     [DB] Values: [50]
[00:29:24.624] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:24.625] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:24.625] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:26.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:26.624] Server  LOG     [DB] Values: [50]
[00:29:26.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:26.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:26.629] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:28.612] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:29:28.616] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:29:28.622] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:28.622] Server  LOG     [DB] Values: [50]
[00:29:28.649] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:28.653] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:29:28.654] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:28.654] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:30.637] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:30.638] Server  LOG     [DB] Values: [50]
[00:29:30.639] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:30.640] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:30.657] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:32.619] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:32.620] Server  LOG     [DB] Values: [50]
[00:29:32.624] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:32.625] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:32.625] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:33.616] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:29:33.623] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:29:33.629] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:29:34.615] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:34.616] Server  LOG     [DB] Values: [50]
[00:29:34.619] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:34.620] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:34.621] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:36.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:36.617] Server  LOG     [DB] Values: [50]
[00:29:36.620] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:36.621] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:36.621] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:38.615] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:29:38.619] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:29:38.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:38.624] Server  LOG     [DB] Values: [50]
[00:29:38.631] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:38.635] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:29:38.637] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:38.638] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:40.620] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:40.621] Server  LOG     [DB] Values: [50]
[00:29:40.624] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:40.625] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:40.625] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:41.984] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:41.984] Server  LOG     [DB] Values: [50]
[00:29:41.988] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:41.990] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:41.991] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:42.985] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:29:42.988] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:29:42.992] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:29:43.980] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:43.981] Server  LOG     [DB] Values: [50]
[00:29:43.982] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:43.983] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:44.032] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:45.981] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:45.981] Server  LOG     [DB] Values: [50]
[00:29:45.985] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:45.986] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:45.986] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:47.986] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:29:47.991] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:29:47.996] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:47.997] Server  LOG     [DB] Values: [50]
[00:29:48.004] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:48.036] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:29:48.037] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:48.038] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:48.689] Server  LOG     [Product API] Fetching ID: "1"
[00:29:48.698] Browser LOG     Fetching details for: 1
[00:29:48.702] Server  LOG     [DB] Query: SELECT * FROM products WHERE id = ?
[00:29:48.703] Server  LOG     [DB] Values: ["1"]
[00:29:48.706] Server  LOG     [Product API] Result count: 1
[00:29:48.706] Server  LOG     [Product API] Product found: "Americano" "55.00"
[00:29:48.707] Server  LOG     [DB] Query: SELECT pi.ingredient_id, i.name, i.unit, pi.amount FROM product_ingredients pi JOIN ingredients i ON pi.ingredient_id = i.id WHERE pi.product_id = ?
[00:29:48.707] Server  LOG     [DB] Values: ["1"]
[00:29:48.828] Browser LOG     Details fetched: {"category":"Hot Coffee","created_at":"2026-01-02T11:03:33.000Z","description":"Classic Italian espresso with hot water","id":1,"ingredients":[{"amount":"18.00","ingredient_id":1,"name":"Espresso Beans","unit":"g"}],"is_active":1,"min_threshold":10,"name":"Americano","price":"55.00","stock_quantity":0,"updated_at":"2026-01-02T11:12:30.000Z"}
[00:29:49.984] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:49.985] Server  LOG     [DB] Values: [50]
[00:29:49.988] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:49.989] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:49.989] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:51.983] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:51.983] Server  LOG     [DB] Values: [50]
[00:29:51.987] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:51.988] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:51.988] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:52.976] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:29:52.980] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:29:53.027] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:29:53.984] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:53.985] Server  LOG     [DB] Values: [50]
[00:29:53.988] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:53.989] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:53.990] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:55.984] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:55.985] Server  LOG     [DB] Values: [50]
[00:29:55.988] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:55.989] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:55.989] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:57.324] Server  LOG     [DB] Query: UPDATE products SET name = ?, category = ?, price = ?, description = ?, stock_quantity = ?, min_threshold = ? WHERE id = ?
[00:29:57.325] Server  LOG     [DB] Values: ["Americano","Hot Coffee",55,"Classic Italian espresso with hot water",10000,10,"1"]
[00:29:57.327] Server  LOG     [DB] Query: DELETE FROM product_ingredients WHERE product_id = ?
[00:29:57.328] Server  LOG     [DB] Values: ["1"]
[00:29:57.330] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) VALUES (?, ?, ?)
[00:29:57.330] Server  LOG     [DB] Values: ["1",1,"18.00"]
[00:29:57.339] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:29:57.388] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:29:57.991] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:29:57.996] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:29:58.000] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:29:58.004] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:29:58.005] Server  LOG     [DB] Values: [50]
[00:29:58.013] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:29:58.016] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:29:58.017] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:29:59.784] Server  LOG     [DB] Query: INSERT INTO activity_logs (user_id, action, action_type, entity_type, entity_id, details) VALUES (?, 'Logged out', 'logout', 'User', ?, ?)
[00:29:59.784] Server  LOG     [DB] Values: [2,2,"{\"message\":\"User logged out\"}"]
[00:30:01.243] Server  LOG     [DB] Query: SELECT id, email, name, role, is_active FROM users WHERE email = ?
[00:30:01.244] Server  LOG     [DB] Values: ["cashier@sodalicious.com"]
[00:30:01.247] Server  LOG     [DB] Query: INSERT INTO activity_logs (user_id, action, action_type, entity_type, entity_id, details) VALUES (?, 'Logged in', 'login', 'User', ?, 'User logged into the system')
[00:30:01.248] Server  LOG     [DB] Values: [1,1]
[00:30:01.353] Server  ERROR   [DB ERROR] Query failed: Error: CONSTRAINT `activity_logs.details` failed for `sodalicious_db`.`activity_logs`
[00:30:01.420] Server  ERROR   Failed to log login activity Error: CONSTRAINT `activity_logs.details` failed for `sodalicious_db`.`activity_logs`
[00:30:01.520] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:30:01.551] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:01.552] Server  LOG     [DB] Values: [50]
[00:30:01.553] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:30:01.554] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:01.555] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:01.564] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:01.565] Server  LOG     [DB] Values: [50]
[00:30:01.566] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:01.567] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:03.499] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:03.499] Server  LOG     [DB] Values: [50]
[00:30:03.501] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:03.501] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:05.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:05.617] Server  LOG     [DB] Values: [50]
[00:30:05.618] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:05.618] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:06.677] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:30:07.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:07.611] Server  LOG     [DB] Values: [50]
[00:30:07.613] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:07.613] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:09.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:09.624] Server  LOG     [DB] Values: [50]
[00:30:09.625] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:09.625] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:10.665] Server  LOG      ✓ Compiled in 137ms
[00:30:11.501] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:30:11.505] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:11.505] Server  LOG     [DB] Values: [50]
[00:30:11.508] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:11.508] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:13.502] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:13.502] Server  LOG     [DB] Values: [50]
[00:30:13.503] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:13.504] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:15.502] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:15.503] Server  LOG     [DB] Values: [50]
[00:30:15.504] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:15.504] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:16.507] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:30:17.500] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:17.500] Server  LOG     [DB] Values: [50]
[00:30:17.501] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:17.502] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:19.501] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:19.502] Server  LOG     [DB] Values: [50]
[00:30:19.503] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:19.503] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:21.505] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:30:21.509] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:21.509] Server  LOG     [DB] Values: [50]
[00:30:21.515] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:21.515] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:23.507] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:23.507] Server  LOG     [DB] Values: [50]
[00:30:23.509] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:23.509] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:25.500] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:25.500] Server  LOG     [DB] Values: [50]
[00:30:25.501] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:25.502] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:26.503] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:30:27.502] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:27.503] Server  LOG     [DB] Values: [50]
[00:30:27.504] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:27.504] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:29.502] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:29.503] Server  LOG     [DB] Values: [50]
[00:30:29.504] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:29.505] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:31.505] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:30:31.509] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:31.510] Server  LOG     [DB] Values: [50]
[00:30:31.516] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:31.517] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:33.503] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:33.503] Server  LOG     [DB] Values: [50]
[00:30:33.504] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:33.505] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:35.504] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:35.504] Server  LOG     [DB] Values: [50]
[00:30:35.505] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:35.506] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:36.500] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:30:37.504] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:37.505] Server  LOG     [DB] Values: [50]
[00:30:37.506] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:37.506] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:39.499] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:39.499] Server  LOG     [DB] Values: [50]
[00:30:39.500] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:39.500] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:41.619] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:30:41.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:41.623] Server  LOG     [DB] Values: [50]
[00:30:41.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:41.627] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:43.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:43.622] Server  LOG     [DB] Values: [50]
[00:30:43.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:43.623] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:45.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:45.611] Server  LOG     [DB] Values: [50]
[00:30:45.613] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:45.613] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:46.504] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:30:47.499] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:47.500] Server  LOG     [DB] Values: [50]
[00:30:47.501] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:47.501] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:49.500] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:49.500] Server  LOG     [DB] Values: [50]
[00:30:49.501] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:49.502] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:51.507] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:30:51.511] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:51.512] Server  LOG     [DB] Values: [50]
[00:30:51.517] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:51.518] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:53.505] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:53.505] Server  LOG     [DB] Values: [50]
[00:30:53.506] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:53.507] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:53.773] Server  LOG     [DB] Query: INSERT INTO activity_logs (user_id, action, action_type, entity_type, entity_id, details) VALUES (?, 'Logged out', 'logout', 'User', ?, ?)
[00:30:53.774] Server  LOG     [DB] Values: [1,1,"{\"message\":\"User logged out\"}"]
[00:30:56.142] Server  LOG     [DB] Query: SELECT id, email, name, role, is_active FROM users WHERE email = ?
[00:30:56.142] Server  LOG     [DB] Values: ["manager@sodalicious.com"]
[00:30:56.144] Server  LOG     [DB] Query: INSERT INTO activity_logs (user_id, action, action_type, entity_type, entity_id, details) VALUES (?, 'Logged in', 'login', 'User', ?, 'User logged into the system')
[00:30:56.144] Server  LOG     [DB] Values: [2,2]
[00:30:56.229] Server  ERROR   [DB ERROR] Query failed: Error: CONSTRAINT `activity_logs.details` failed for `sodalicious_db`.`activity_logs`
[00:30:56.323] Server  ERROR   Failed to log login activity Error: CONSTRAINT `activity_logs.details` failed for `sodalicious_db`.`activity_logs`
[00:30:56.357] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:30:56.368] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:30:56.372] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:56.373] Server  LOG     [DB] Values: [50]
[00:30:56.400] Server  LOG     [DB] Query: SELECT id, name, email as username, role, is_active FROM users ORDER BY id ASC
[00:30:56.404] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:56.405] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:56.428] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:30:56.454] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:30:56.488] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:30:56.495] Server  LOG     [DB] Query: SELECT id, name, email as username, role, is_active FROM users ORDER BY id ASC
[00:30:56.503] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:56.503] Server  LOG     [DB] Values: [50]
[00:30:56.507] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:30:56.508] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:56.509] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:56.514] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:30:56.524] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:30:58.351] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:30:58.352] Server  LOG     [DB] Values: [50]
[00:30:58.353] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:30:58.353] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:30:58.361] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:00.357] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:00.358] Server  LOG     [DB] Values: [50]
[00:31:00.362] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:00.363] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:00.363] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:01.289] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:31:01.292] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:31:01.301] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:31:01.308] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:31:01.393] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:31:02.355] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:02.355] Server  LOG     [DB] Values: [50]
[00:31:02.359] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:02.360] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:02.360] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:04.356] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:04.356] Server  LOG     [DB] Values: [50]
[00:31:04.360] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:04.361] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:04.362] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:06.622] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:31:06.625] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:31:06.631] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:06.631] Server  LOG     [DB] Values: [50]
[00:31:06.643] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:06.649] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:31:06.650] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:06.651] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:08.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:08.611] Server  LOG     [DB] Values: [50]
[00:31:08.615] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:08.615] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:08.616] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:10.356] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:10.357] Server  LOG     [DB] Values: [50]
[00:31:10.360] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:10.395] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:10.396] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:11.292] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:31:11.296] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:31:11.357] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:31:12.353] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:12.353] Server  LOG     [DB] Values: [50]
[00:31:12.357] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:12.358] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:12.358] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:13.679] Server  LOG     [Product API] Fetching ID: "FR001"
[00:31:13.680] Server  LOG     [DB] Query: SELECT * FROM products WHERE id = ?
[00:31:13.681] Server  LOG     [DB] Values: ["FR001"]
[00:31:13.682] Server  LOG     [Product API] Result count: 0
[00:31:13.682] Server  LOG     [Product API] Product not found
[00:31:19.938] Browser LOG     Fetching details for: FR001
[00:31:19.938] Browser ERROR   Fetch failed: 404 Not Found
[00:31:19.938] Browser ERROR   {}
[00:31:19.945] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:19.945] Server  LOG     [DB] Values: [50]
[00:31:19.949] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:19.952] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:19.953] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:19.966] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:31:19.971] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:31:19.975] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:31:20.357] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:20.358] Server  LOG     [DB] Values: [50]
[00:31:20.361] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:20.362] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:20.362] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:21.261] Server  LOG     [Product API] Fetching ID: "14"
[00:31:21.261] Server  LOG     [DB] Query: SELECT * FROM products WHERE id = ?
[00:31:21.262] Server  LOG     [DB] Values: ["14"]
[00:31:21.263] Server  LOG     [Product API] Result count: 1
[00:31:21.263] Server  LOG     [Product API] Product found: "Iced Caramel" "70.00"
[00:31:21.264] Server  LOG     [DB] Query: SELECT pi.ingredient_id, i.name, i.unit, pi.amount FROM product_ingredients pi JOIN ingredients i ON pi.ingredient_id = i.id WHERE pi.product_id = ?
[00:31:21.264] Server  LOG     [DB] Values: ["14"]
[00:31:21.313] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:31:21.319] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:31:21.430] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:31:21.505] Browser LOG     Fetching details for: 14
[00:31:21.505] Browser LOG     Details fetched: {"category":"Iced Coffee","created_at":"2026-01-02T11:03:33.000Z","description":"Caramel macchiato served over ice","id":14,"ingredients":[{"amount":"18.00","ingredient_id":1,"name":"Espresso Beans","unit":"g"},{"amount":"200.00","ingredient_id":2,"name":"Milk","unit":"ml"},{"amount":"30.00","ingredient_id":3,"name":"Caramel Syrup","unit":"ml"}],"is_active":1,"min_threshold":10,"name":"Iced Caramel","price":"70.00","stock_quantity":40,"updated_at":"2026-01-02T11:03:33.000Z"}
[00:31:22.353] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:22.353] Server  LOG     [DB] Values: [50]
[00:31:22.357] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:22.357] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:22.358] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:24.618] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:24.618] Server  LOG     [DB] Values: [50]
[00:31:24.622] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:24.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:24.624] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:26.618] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:31:26.622] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:31:26.626] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:26.627] Server  LOG     [DB] Values: [50]
[00:31:26.634] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:26.638] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:31:26.642] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:26.642] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:28.610] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:28.611] Server  LOG     [DB] Values: [50]
[00:31:28.614] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:28.615] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:28.616] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:30.612] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:30.613] Server  LOG     [DB] Values: [50]
[00:31:30.617] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:30.618] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:30.618] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:31.618] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:31:31.622] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:31:31.625] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:31:32.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:32.622] Server  LOG     [DB] Values: [50]
[00:31:32.625] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:32.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:32.627] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:34.613] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:34.614] Server  LOG     [DB] Values: [50]
[00:31:34.617] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:34.618] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:34.618] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:36.614] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:31:36.620] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:31:36.626] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:36.627] Server  LOG     [DB] Values: [50]
[00:31:36.640] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:36.641] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:36.644] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:36.645] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:31:38.357] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:38.358] Server  LOG     [DB] Values: [50]
[00:31:38.361] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:38.363] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:38.363] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:40.352] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:40.353] Server  LOG     [DB] Values: [50]
[00:31:40.356] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:40.357] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:40.358] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:41.617] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:31:41.621] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:31:41.625] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:31:42.573] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:42.574] Server  LOG     [DB] Values: [50]
[00:31:42.588] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:42.589] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:42.594] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:44.359] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:44.360] Server  LOG     [DB] Values: [50]
[00:31:44.363] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:44.364] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:44.364] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:46.613] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:31:46.617] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:31:46.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:46.622] Server  LOG     [DB] Values: [50]
[00:31:46.625] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:46.632] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:31:46.633] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:46.633] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:48.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:48.616] Server  LOG     [DB] Values: [50]
[00:31:48.620] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:48.620] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:48.621] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:50.354] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:50.355] Server  LOG     [DB] Values: [50]
[00:31:50.358] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:50.359] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:50.360] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:51.291] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:31:51.295] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:31:51.374] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:31:52.354] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:52.354] Server  LOG     [DB] Values: [50]
[00:31:52.358] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:52.358] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:52.359] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:54.354] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:54.354] Server  LOG     [DB] Values: [50]
[00:31:54.357] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:54.358] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:54.359] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:56.291] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:31:56.294] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:31:56.385] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:56.386] Server  LOG     [DB] Values: [50]
[00:31:56.389] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:31:56.392] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:31:56.393] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:56.394] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:58.351] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:31:58.351] Server  LOG     [DB] Values: [50]
[00:31:58.352] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:31:58.353] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:31:58.398] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:00.351] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:00.351] Server  LOG     [DB] Values: [50]
[00:32:00.352] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:00.353] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:00.398] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:01.292] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:32:01.295] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:32:01.358] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:32:02.351] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:02.352] Server  LOG     [DB] Values: [50]
[00:32:02.354] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:02.354] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:02.400] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:04.361] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:04.361] Server  LOG     [DB] Values: [50]
[00:32:04.365] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:04.366] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:04.367] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:06.291] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:32:06.295] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:32:06.387] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:06.388] Server  LOG     [DB] Values: [50]
[00:32:06.391] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:06.395] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:32:06.396] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:06.396] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:08.353] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:08.353] Server  LOG     [DB] Values: [50]
[00:32:08.356] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:08.357] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:08.358] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:10.353] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:10.354] Server  LOG     [DB] Values: [50]
[00:32:10.357] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:10.358] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:10.359] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:11.293] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:32:11.296] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:32:11.376] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:32:12.353] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:12.353] Server  LOG     [DB] Values: [50]
[00:32:12.357] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:12.358] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:12.358] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:14.351] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:14.351] Server  LOG     [DB] Values: [50]
[00:32:14.353] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:14.353] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:14.405] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:16.291] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:32:16.295] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:32:16.385] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:16.386] Server  LOG     [DB] Values: [50]
[00:32:16.389] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:16.393] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:32:16.394] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:16.394] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:18.351] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:18.351] Server  LOG     [DB] Values: [50]
[00:32:18.352] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:18.353] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:18.397] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:20.352] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:20.352] Server  LOG     [DB] Values: [50]
[00:32:20.356] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:20.357] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:20.357] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:21.293] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:32:21.297] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:32:21.376] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:32:22.361] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:22.361] Server  LOG     [DB] Values: [50]
[00:32:22.365] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:22.365] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:22.366] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:24.622] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:24.623] Server  LOG     [DB] Values: [50]
[00:32:24.626] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:24.627] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:24.628] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:26.646] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:32:26.653] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:32:26.657] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:26.658] Server  LOG     [DB] Values: [50]
[00:32:26.665] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:26.667] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:26.668] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:26.681] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:32:28.353] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:28.354] Server  LOG     [DB] Values: [50]
[00:32:28.357] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:28.358] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:28.359] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:30.361] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:30.361] Server  LOG     [DB] Values: [50]
[00:32:30.365] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:30.366] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:30.366] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:31.294] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:32:31.298] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:32:31.385] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:32:32.352] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:32.352] Server  LOG     [DB] Values: [50]
[00:32:32.357] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:32.358] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:32.359] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:35.717] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:35.717] Server  LOG     [DB] Values: [50]
[00:32:35.725] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:35.728] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:35.728] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:35.822] Server  LOG     Starting recipe fix process...
[00:32:35.823] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.824] Server  LOG     [DB] Values: ["Espresso Beans","g"]
[00:32:35.825] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.825] Server  LOG     [DB] Values: ["Milk","ml"]
[00:32:35.828] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.829] Server  LOG     [DB] Values: ["Caramel Syrup","ml"]
[00:32:35.830] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.830] Server  LOG     [DB] Values: ["Chocolate Syrup","ml"]
[00:32:35.831] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.832] Server  LOG     [DB] Values: ["Vanilla Syrup","ml"]
[00:32:35.832] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.833] Server  LOG     [DB] Values: ["Soda Water","ml"]
[00:32:35.833] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.834] Server  LOG     [DB] Values: ["Cola Syrup","ml"]
[00:32:35.834] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.835] Server  LOG     [DB] Values: ["Lemon Syrup","ml"]
[00:32:35.836] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.836] Server  LOG     [DB] Values: ["Strawberry Syrup","ml"]
[00:32:35.837] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.837] Server  LOG     [DB] Values: ["Mango Puree","ml"]
[00:32:35.839] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.840] Server  LOG     [DB] Values: ["Berry Mix","ml"]
[00:32:35.841] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.841] Server  LOG     [DB] Values: ["Matcha Powder","g"]
[00:32:35.842] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.842] Server  LOG     [DB] Values: ["Taro Powder","g"]
[00:32:35.843] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.844] Server  LOG     [DB] Values: ["Tapioca Pearls","g"]
[00:32:35.845] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.845] Server  LOG     [DB] Values: ["Tea Leaves","g"]
[00:32:35.846] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.847] Server  LOG     [DB] Values: ["Pistachio Paste","g"]
[00:32:35.847] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.848] Server  LOG     [DB] Values: ["Waffle Batter","ml"]
[00:32:35.848] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.849] Server  LOG     [DB] Values: ["Ice Cream","scoop"]
[00:32:35.849] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.850] Server  LOG     [DB] Values: ["Coffee Jelly","g"]
[00:32:35.850] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.851] Server  LOG     [DB] Values: ["Whipped Cream","ml"]
[00:32:35.852] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.852] Server  LOG     [DB] Values: ["Cookie Crumbs","g"]
[00:32:35.852] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.853] Server  LOG     [DB] Values: ["Green Apple Syrup","ml"]
[00:32:35.853] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.854] Server  LOG     [DB] Values: ["Lychee Syrup","ml"]
[00:32:35.856] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.856] Server  LOG     [DB] Values: ["Yakult","ml"]
[00:32:35.857] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.857] Server  LOG     [DB] Values: ["Orange Juice","ml"]
[00:32:35.858] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.859] Server  LOG     [DB] Values: ["Pineapple Juice","ml"]
[00:32:35.860] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 500)
[00:32:35.860] Server  LOG     [DB] Values: ["Watermelon Juice","ml"]
[00:32:35.862] Server  LOG     [DB] Query: DELETE FROM product_ingredients
[00:32:35.863] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Espresso Beans'), 18 FROM products WHERE category = 'Hot Coffee'
[00:32:35.864] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Milk'), 200 FROM products WHERE category = 'Hot Coffee' AND name NOT LIKE '%Americano%' AND name NOT LIKE '%Espresso%' AND name NOT LIKE '%Long Black%'
[00:32:35.865] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Caramel Syrup'), 20 FROM products WHERE category = 'Hot Coffee' AND name LIKE '%Caramel%'
[00:32:35.866] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Chocolate Syrup'), 20 FROM products WHERE category = 'Hot Coffee' AND name LIKE '%Mocha%'
[00:32:35.867] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Espresso Beans'), 18 FROM products WHERE category = 'Iced Coffee'
[00:32:35.868] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Milk'), 200 FROM products WHERE category = 'Iced Coffee' AND name NOT LIKE '%Americano%'
[00:32:35.869] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Caramel Syrup'), 30 FROM products WHERE category = 'Iced Coffee' AND name LIKE '%Caramel%'
[00:32:35.870] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Chocolate Syrup'), 30 FROM products WHERE category = 'Iced Coffee' AND name LIKE '%Mocha%'
[00:32:35.872] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Vanilla Syrup'), 30 FROM products WHERE category = 'Iced Coffee' AND name LIKE '%Vanilla%'
[00:32:35.873] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Milk'), 150 FROM products WHERE category = 'Frappes'
[00:32:35.874] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Whipped Cream'), 50 FROM products WHERE category = 'Frappes'
[00:32:35.875] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Soda Water'), 250 FROM products WHERE category LIKE '%Soda%'
[00:32:35.876] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Cola Syrup'), 50 FROM products WHERE category LIKE '%Soda%' AND name LIKE '%Cola%'
[00:32:35.877] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Strawberry Syrup'), 40 FROM products WHERE category LIKE '%Soda%' AND name LIKE '%Strawberry%'
[00:32:35.878] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Lemon Syrup'), 40 FROM products WHERE category LIKE '%Soda%' AND name LIKE '%Lemon%'
[00:32:35.880] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Mango Puree'), 300 FROM products WHERE category = 'Juices' AND name LIKE '%Mango%'
[00:32:35.883] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Orange Juice'), 300 FROM products WHERE category = 'Juices' AND name LIKE '%Orange%'
[00:32:35.885] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Matcha Powder'), 15 FROM products WHERE name LIKE '%Matcha%'
[00:32:35.886] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Taro Powder'), 20 FROM products WHERE name LIKE '%Taro%'
[00:32:35.887] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, 1 FROM products p JOIN ingredients i ON p.name = i.name WHERE p.category = 'Food'
[00:32:37.189] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:32:37.200] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:32:37.204] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:32:37.208] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:37.208] Server  LOG     [DB] Values: [50]
[00:32:37.212] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:37.216] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:32:37.222] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:37.222] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:38.351] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:38.351] Server  LOG     [DB] Values: [50]
[00:32:38.352] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:38.353] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:38.403] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:40.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:40.614] Server  LOG     [DB] Values: [50]
[00:32:40.618] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:40.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:40.619] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:41.624] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:32:41.629] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:32:41.638] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:32:42.214] Server  LOG      ✓ Compiled in 75ms
[00:32:42.221] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:32:42.229] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:32:42.237] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:32:42.246] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:42.247] Server  LOG     [DB] Values: [50]
[00:32:42.250] Server  LOG     [DB] Query: SELECT id, name, email as username, role, is_active FROM users ORDER BY id ASC
[00:32:42.254] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:42.260] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:42.261] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:42.269] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:32:44.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:44.621] Server  LOG     [DB] Values: [50]
[00:32:44.625] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:44.649] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:44.650] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:46.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:46.612] Server  LOG     [DB] Values: [50]
[00:32:46.615] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:46.617] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:46.618] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:47.616] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:32:47.621] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:32:47.631] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:32:48.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:48.625] Server  LOG     [DB] Values: [50]
[00:32:48.629] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:48.630] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:48.630] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:50.622] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:50.622] Server  LOG     [DB] Values: [50]
[00:32:50.626] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:50.627] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:50.627] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:52.627] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:32:52.631] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:32:52.635] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:52.635] Server  LOG     [DB] Values: [50]
[00:32:52.644] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:52.647] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:32:52.648] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:52.649] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:54.613] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:54.613] Server  LOG     [DB] Values: [50]
[00:32:54.617] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:54.617] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:54.618] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:56.612] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:56.612] Server  LOG     [DB] Values: [50]
[00:32:56.620] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:56.625] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:56.639] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:57.117] Server  LOG      ✓ Compiled in 209ms
[00:32:57.129] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:32:57.132] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:32:57.137] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:32:57.146] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:57.147] Server  LOG     [DB] Values: [50]
[00:32:57.151] Server  LOG     [DB] Query: SELECT id, name, email as username, role, is_active FROM users ORDER BY id ASC
[00:32:57.158] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:57.159] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:57.159] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:32:57.170] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:32:59.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:32:59.617] Server  LOG     [DB] Values: [50]
[00:32:59.620] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:32:59.621] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:32:59.622] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:01.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:01.624] Server  LOG     [DB] Values: [50]
[00:33:01.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:01.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:01.629] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:02.621] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:33:02.625] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:33:02.629] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:33:03.626] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:03.626] Server  LOG     [DB] Values: [50]
[00:33:03.628] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:03.629] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:03.653] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:05.618] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:05.619] Server  LOG     [DB] Values: [50]
[00:33:05.620] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:05.620] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:05.626] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:07.131] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:33:07.145] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:33:07.149] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:07.149] Server  LOG     [DB] Values: [50]
[00:33:07.153] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:07.158] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:07.158] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:07.162] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:33:09.130] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:09.130] Server  LOG     [DB] Values: [50]
[00:33:09.134] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:09.134] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:09.135] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:11.618] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:11.618] Server  LOG     [DB] Values: [50]
[00:33:11.622] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:11.622] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:11.623] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:12.615] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:33:12.630] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:33:12.636] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:33:13.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:13.615] Server  LOG     [DB] Values: [50]
[00:33:13.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:13.617] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:13.625] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:15.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:15.623] Server  LOG     [DB] Values: [50]
[00:33:15.627] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:15.628] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:15.629] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:17.623] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:33:17.628] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:33:17.633] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:17.633] Server  LOG     [DB] Values: [50]
[00:33:17.636] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:17.640] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:33:17.645] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:17.645] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:19.619] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:19.619] Server  LOG     [DB] Values: [50]
[00:33:19.624] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:19.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:19.626] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:21.386] Server  LOG      ✓ Compiled in 82ms
[00:33:21.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:21.622] Server  LOG     [DB] Values: [50]
[00:33:21.626] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:21.627] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:21.628] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:22.615] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:33:22.620] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:33:22.623] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:33:23.612] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:23.612] Server  LOG     [DB] Values: [50]
[00:33:23.616] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:23.617] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:23.618] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:25.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:25.625] Server  LOG     [DB] Values: [50]
[00:33:25.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:25.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:25.629] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:27.619] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:33:27.623] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:33:27.627] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:27.628] Server  LOG     [DB] Values: [50]
[00:33:27.631] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:27.635] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:33:27.640] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:27.640] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:29.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:29.614] Server  LOG     [DB] Values: [50]
[00:33:29.618] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:29.618] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:29.619] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:31.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:31.624] Server  LOG     [DB] Values: [50]
[00:33:31.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:31.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:31.629] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:32.618] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:33:32.622] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:33:32.627] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:33:33.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:33.614] Server  LOG     [DB] Values: [50]
[00:33:33.618] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:33.618] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:33.619] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:34.635] Server  LOG      ✓ Compiled in 85ms
[00:33:35.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:35.622] Server  LOG     [DB] Values: [50]
[00:33:35.626] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:35.628] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:35.628] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:37.626] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:33:37.631] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:33:37.636] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:37.637] Server  LOG     [DB] Values: [50]
[00:33:37.641] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:37.644] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:33:37.650] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:37.651] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:39.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:39.624] Server  LOG     [DB] Values: [50]
[00:33:39.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:39.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:39.630] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:41.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:41.622] Server  LOG     [DB] Values: [50]
[00:33:41.626] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:41.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:41.627] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:42.618] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:33:42.622] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:33:42.627] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:33:43.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:43.616] Server  LOG     [DB] Values: [50]
[00:33:43.620] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:43.621] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:43.622] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:45.613] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:45.614] Server  LOG     [DB] Values: [50]
[00:33:45.617] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:45.618] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:45.618] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:47.621] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:33:47.626] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:33:47.631] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:47.631] Server  LOG     [DB] Values: [50]
[00:33:47.639] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:47.640] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:47.641] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:47.645] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:33:49.622] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:49.622] Server  LOG     [DB] Values: [50]
[00:33:49.626] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:49.628] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:49.628] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:51.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:51.617] Server  LOG     [DB] Values: [50]
[00:33:51.618] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:51.619] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:51.625] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:52.623] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:33:52.627] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:33:52.631] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:33:53.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:53.612] Server  LOG     [DB] Values: [50]
[00:33:53.616] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:53.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:53.617] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:55.619] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:55.620] Server  LOG     [DB] Values: [50]
[00:33:55.623] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:55.624] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:55.624] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:57.621] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:33:57.625] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:33:57.630] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:57.630] Server  LOG     [DB] Values: [50]
[00:33:57.634] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:57.638] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:33:57.642] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:57.643] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:33:59.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:33:59.612] Server  LOG     [DB] Values: [50]
[00:33:59.616] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:33:59.617] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:33:59.617] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:01.610] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:01.611] Server  LOG     [DB] Values: [50]
[00:34:01.615] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:01.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:01.616] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:02.572] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:34:02.576] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:34:02.581] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:34:03.134] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:03.135] Server  LOG     [DB] Values: [50]
[00:34:03.138] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:03.139] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:03.142] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:05.129] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:05.130] Server  LOG     [DB] Values: [50]
[00:34:05.134] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:05.135] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:05.135] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:06.241] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:34:06.248] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:34:06.253] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:34:06.267] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:34:07.159] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:07.164] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:34:07.169] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:07.169] Server  LOG     [DB] Values: [50]
[00:34:07.174] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:07.176] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:09.133] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:09.134] Server  LOG     [DB] Values: [50]
[00:34:09.137] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:09.138] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:09.138] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:11.126] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:11.127] Server  LOG     [DB] Values: [50]
[00:34:11.128] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:11.129] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:11.176] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:11.273] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:34:11.283] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:34:12.132] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:34:13.134] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:13.135] Server  LOG     [DB] Values: [50]
[00:34:13.136] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:13.137] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:13.140] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:15.133] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:15.134] Server  LOG     [DB] Values: [50]
[00:34:15.137] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:15.138] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:15.138] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:16.245] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:34:16.249] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:34:17.127] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:17.128] Server  LOG     [DB] Values: [50]
[00:34:17.130] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:17.131] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:17.172] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:17.232] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:34:19.134] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:19.135] Server  LOG     [DB] Values: [50]
[00:34:19.138] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:19.139] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:19.139] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:21.134] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:21.135] Server  LOG     [DB] Values: [50]
[00:34:21.138] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:21.141] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:21.142] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:22.132] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:34:23.133] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:23.136] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:23.137] Server  LOG     [DB] Values: [50]
[00:34:23.139] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:23.140] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:25.130] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:25.131] Server  LOG     [DB] Values: [50]
[00:34:25.134] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:25.135] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:25.135] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:27.127] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:27.128] Server  LOG     [DB] Values: [50]
[00:34:27.130] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:27.130] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:27.137] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:27.143] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:34:29.131] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:29.131] Server  LOG     [DB] Values: [50]
[00:34:29.134] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:29.135] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:29.135] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:31.136] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:31.137] Server  LOG     [DB] Values: [50]
[00:34:31.138] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:31.138] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:31.144] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:32.134] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:34:33.133] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:33.134] Server  LOG     [DB] Values: [50]
[00:34:33.137] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:33.138] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:33.138] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:35.127] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:35.127] Server  LOG     [DB] Values: [50]
[00:34:35.131] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:35.131] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:35.138] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:37.132] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:37.133] Server  LOG     [DB] Values: [50]
[00:34:37.136] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:37.139] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:34:37.140] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:37.141] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:38.271] Server  WARN    Error: Route "/api/users/[id]" used `params.id`. `params` is a Promise and must be unwrapped with `await` or `React.use()` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
[00:34:38.271] Server  LOG     [DB] Query: DELETE FROM users WHERE id=?
[00:34:38.272] Server  LOG     [DB] Values: [undefined]
[00:34:38.281] Server  LOG     [DB] Query: SELECT id, name, email as username, role, is_active FROM users ORDER BY id ASC
[00:34:39.216] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:39.255] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:39.266] Server  LOG     [DB] Values: [50]
[00:34:39.307] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:39.307] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:40.809] Server  WARN    Error: Route "/api/users/[id]" used `params.id`. `params` is a Promise and must be unwrapped with `await` or `React.use()` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
[00:34:40.810] Server  LOG     [DB] Query: DELETE FROM users WHERE id=?
[00:34:40.810] Server  LOG     [DB] Values: [undefined]
[00:34:40.858] Server  LOG     [DB] Query: SELECT id, name, email as username, role, is_active FROM users ORDER BY id ASC
[00:34:41.134] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:41.138] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:41.139] Server  LOG     [DB] Values: [50]
[00:34:41.149] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:41.150] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:42.129] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:34:43.135] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:43.136] Server  LOG     [DB] Values: [50]
[00:34:43.139] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:43.140] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:43.140] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:45.127] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:45.128] Server  LOG     [DB] Values: [50]
[00:34:45.130] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:45.130] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:45.137] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:47.168] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:47.175] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:34:47.178] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:47.179] Server  LOG     [DB] Values: [50]
[00:34:47.184] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:47.184] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:49.126] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:49.127] Server  LOG     [DB] Values: [50]
[00:34:49.128] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:49.129] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:49.135] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:51.063] Server  LOG     [DB] Query: INSERT INTO users (name, email, password_hash, role, is_active) VALUES (?, ?, ?, ?, ?)
[00:34:51.064] Server  LOG     [DB] Values: ["TESTNEOOO","cashier@sodalicious.com","$2b$10$VMgdkMAlr4I2UzNJaUGFlelJ4IS6xNNVkL49qVYw2TyEwHVVxU0pS","cashier",true]
[00:34:51.149] Server  ERROR   [DB ERROR] Query failed: Error: Duplicate entry 'cashier@sodalicious.com' for key 'email'
[00:34:51.208] Server  ERROR   Failed to create user: Error: Duplicate entry 'cashier@sodalicious.com' for key 'email'
[00:34:51.215] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:51.216] Server  LOG     [DB] Values: [50]
[00:34:51.219] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:51.220] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:51.220] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:52.127] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:34:53.126] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:53.127] Server  LOG     [DB] Values: [50]
[00:34:53.128] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:53.129] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:53.136] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:55.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:55.618] Server  LOG     [DB] Values: [50]
[00:34:55.621] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:55.622] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:55.623] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:57.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:57.624] Server  LOG     [DB] Values: [50]
[00:34:57.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:57.631] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:34:57.632] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:57.633] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:34:59.128] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:34:59.129] Server  LOG     [DB] Values: [50]
[00:34:59.133] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:34:59.165] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:34:59.166] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:00.462] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:35:00.473] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:35:01.126] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:01.127] Server  LOG     [DB] Values: [50]
[00:35:01.128] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:01.128] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:01.145] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:35:01.323] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:35:01.327] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:35:01.332] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:35:01.362] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:35:02.136] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:35:03.137] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:35:03.141] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:03.142] Server  LOG     [DB] Values: [50]
[00:35:03.144] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:03.145] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:05.137] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:35:05.141] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:05.141] Server  LOG     [DB] Values: [50]
[00:35:05.144] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:05.144] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:06.326] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:35:06.339] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:35:07.136] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:35:07.156] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:35:07.167] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:07.171] Server  LOG     [DB] Values: [50]
[00:35:07.177] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:07.177] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:09.148] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:35:09.152] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:09.153] Server  LOG     [DB] Values: [50]
[00:35:09.178] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:09.179] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:11.127] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:11.128] Server  LOG     [DB] Values: [50]
[00:35:11.129] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:11.129] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:11.179] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:35:11.329] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:35:11.334] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:35:12.138] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:35:13.138] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:35:13.143] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:13.144] Server  LOG     [DB] Values: [50]
[00:35:13.151] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:13.152] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:15.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:15.625] Server  LOG     [DB] Values: [50]
[00:35:15.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:35:15.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:15.629] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:16.624] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:35:16.628] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:35:17.627] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:17.628] Server  LOG     [DB] Values: [50]
[00:35:17.633] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:17.634] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:17.640] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:35:17.645] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:35:19.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:19.616] Server  LOG     [DB] Values: [50]
[00:35:19.620] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:35:19.620] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:19.621] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:21.620] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:35:21.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:21.624] Server  LOG     [DB] Values: [50]
[00:35:21.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:35:21.631] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:35:21.634] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:21.635] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:22.625] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:35:23.625] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:23.625] Server  LOG     [DB] Values: [50]
[00:35:23.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:35:23.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:23.630] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:25.126] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:25.127] Server  LOG     [DB] Values: [50]
[00:35:25.128] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:25.128] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:25.175] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:35:26.322] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:35:26.326] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:35:27.079] Server  LOG     [DB] Query: INSERT INTO activity_logs (user_id, action, action_type, entity_type, entity_id, details) VALUES (?, 'Logged out', 'logout', 'User', ?, ?)
[00:35:27.079] Server  LOG     [DB] Values: [2,2,"{\"message\":\"User logged out\"}"]
[00:35:28.063] Server  LOG     [DB] Query: SELECT id, email, name, role, is_active FROM users WHERE email = ?
[00:35:28.063] Server  LOG     [DB] Values: ["cashier@sodalicious.com"]
[00:35:28.071] Server  LOG     [DB] Query: INSERT INTO activity_logs (user_id, action, action_type, entity_type, entity_id, details) VALUES (?, 'Logged in', 'login', 'User', ?, 'User logged into the system')
[00:35:28.073] Server  LOG     [DB] Values: [1,1]
[00:35:28.144] Server  ERROR   [DB ERROR] Query failed: Error: CONSTRAINT `activity_logs.details` failed for `sodalicious_db`.`activity_logs`
[00:35:28.199] Server  ERROR   Failed to log login activity Error: CONSTRAINT `activity_logs.details` failed for `sodalicious_db`.`activity_logs`
[00:35:28.308] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:28.309] Server  LOG     [DB] Values: [50]
[00:35:28.313] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:35:28.318] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:35:28.319] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:28.320] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:28.338] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:28.339] Server  LOG     [DB] Values: [50]
[00:35:28.340] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:28.341] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:30.303] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:30.304] Server  LOG     [DB] Values: [50]
[00:35:30.305] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:30.305] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:32.305] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:32.305] Server  LOG     [DB] Values: [50]
[00:35:32.306] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:32.307] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:33.304] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:35:34.302] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:34.303] Server  LOG     [DB] Values: [50]
[00:35:34.304] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:34.305] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:36.303] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:36.303] Server  LOG     [DB] Values: [50]
[00:35:36.304] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:36.305] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:38.613] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:35:38.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:38.617] Server  LOG     [DB] Values: [50]
[00:35:38.620] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:38.621] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:40.609] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:40.610] Server  LOG     [DB] Values: [50]
[00:35:40.611] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:40.611] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:42.610] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:42.611] Server  LOG     [DB] Values: [50]
[00:35:42.612] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:42.612] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:43.615] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:35:44.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:44.611] Server  LOG     [DB] Values: [50]
[00:35:44.613] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:44.613] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:46.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:46.617] Server  LOG     [DB] Values: [50]
[00:35:46.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:46.619] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:48.617] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:35:48.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:48.624] Server  LOG     [DB] Values: [50]
[00:35:48.631] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:48.632] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:50.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:50.623] Server  LOG     [DB] Values: [50]
[00:35:50.624] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:50.625] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:52.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:52.615] Server  LOG     [DB] Values: [50]
[00:35:52.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:52.616] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:53.614] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:35:54.314] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:54.314] Server  LOG     [DB] Values: [50]
[00:35:54.315] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:54.318] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:55.609] Server  LOG     [DB] Query: INSERT INTO activity_logs (user_id, action, action_type, entity_type, entity_id, details) VALUES (?, 'Logged out', 'logout', 'User', ?, ?)
[00:35:55.609] Server  LOG     [DB] Values: [1,1,"{\"message\":\"User logged out\"}"]
[00:35:57.601] Server  LOG     [DB] Query: SELECT id, email, name, role, is_active FROM users WHERE email = ?
[00:35:57.601] Server  LOG     [DB] Values: ["manager@sodalicious.com"]
[00:35:57.603] Server  LOG     [DB] Query: INSERT INTO activity_logs (user_id, action, action_type, entity_type, entity_id, details) VALUES (?, 'Logged in', 'login', 'User', ?, 'User logged into the system')
[00:35:57.603] Server  LOG     [DB] Values: [2,2]
[00:35:57.695] Server  ERROR   [DB ERROR] Query failed: Error: CONSTRAINT `activity_logs.details` failed for `sodalicious_db`.`activity_logs`
[00:35:57.761] Server  ERROR   Failed to log login activity Error: CONSTRAINT `activity_logs.details` failed for `sodalicious_db`.`activity_logs`
[00:35:57.832] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:35:57.836] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:35:57.840] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:35:57.843] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:35:57.846] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:57.847] Server  LOG     [DB] Values: [50]
[00:35:57.862] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:57.863] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:57.871] Server  LOG     [DB] Query: SELECT id, name, email as username, role, is_active FROM users ORDER BY id ASC
[00:35:57.885] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:35:57.894] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:35:57.898] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:35:57.904] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:35:57.918] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:57.919] Server  LOG     [DB] Values: [50]
[00:35:57.924] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:57.925] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:35:57.928] Server  LOG     [DB] Query: SELECT id, name, email as username, role, is_active FROM users ORDER BY id ASC
[00:35:57.940] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:35:57.944] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:35:59.810] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:35:59.811] Server  LOG     [DB] Values: [50]
[00:35:59.814] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:35:59.815] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:35:59.815] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:01.814] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:01.814] Server  LOG     [DB] Values: [50]
[00:36:01.818] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:01.819] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:01.820] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:02.817] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:36:02.822] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:36:02.826] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:36:03.811] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:03.811] Server  LOG     [DB] Values: [50]
[00:36:03.815] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:03.816] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:03.816] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:05.627] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:36:05.632] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:36:05.637] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:36:05.653] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:36:05.810] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:05.810] Server  LOG     [DB] Values: [50]
[00:36:05.814] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:05.820] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:05.820] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:07.811] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:07.811] Server  LOG     [DB] Values: [50]
[00:36:07.815] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:07.819] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:36:07.820] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:07.821] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:09.812] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:09.813] Server  LOG     [DB] Values: [50]
[00:36:09.816] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:09.818] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:09.818] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:10.628] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:36:10.632] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:36:11.824] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:11.825] Server  LOG     [DB] Values: [50]
[00:36:11.828] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:11.829] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:11.830] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:12.812] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:36:13.810] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:13.811] Server  LOG     [DB] Values: [50]
[00:36:13.814] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:13.815] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:13.815] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:15.640] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:36:15.644] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:36:15.812] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:15.812] Server  LOG     [DB] Values: [50]
[00:36:15.816] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:15.817] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:15.818] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:17.812] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:17.812] Server  LOG     [DB] Values: [50]
[00:36:17.816] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:17.820] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:36:17.821] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:17.822] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:20.026] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:20.027] Server  LOG     [DB] Values: [50]
[00:36:20.112] Server  LOG     Starting COMPREHENSIVE recipe fix...
[00:36:20.114] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:20.115] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:20.119] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:20.128] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.129] Server  LOG     [DB] Values: ["Espresso Beans","g"]
[00:36:20.132] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.132] Server  LOG     [DB] Values: ["Milk","ml"]
[00:36:20.133] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.134] Server  LOG     [DB] Values: ["Caramel Syrup","ml"]
[00:36:20.136] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.136] Server  LOG     [DB] Values: ["Chocolate Syrup","ml"]
[00:36:20.138] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.138] Server  LOG     [DB] Values: ["Vanilla Syrup","ml"]
[00:36:20.139] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.140] Server  LOG     [DB] Values: ["Soda Water","ml"]
[00:36:20.141] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.142] Server  LOG     [DB] Values: ["Cola Syrup","ml"]
[00:36:20.143] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.144] Server  LOG     [DB] Values: ["Lemon Syrup","ml"]
[00:36:20.145] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.145] Server  LOG     [DB] Values: ["Strawberry Syrup","ml"]
[00:36:20.147] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.147] Server  LOG     [DB] Values: ["Mango Puree","ml"]
[00:36:20.148] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.148] Server  LOG     [DB] Values: ["Berry Mix","ml"]
[00:36:20.149] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.150] Server  LOG     [DB] Values: ["Matcha Powder","g"]
[00:36:20.152] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.152] Server  LOG     [DB] Values: ["Taro Powder","g"]
[00:36:20.154] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.154] Server  LOG     [DB] Values: ["Tapioca Pearls","g"]
[00:36:20.155] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.155] Server  LOG     [DB] Values: ["Tea Leaves","g"]
[00:36:20.157] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.158] Server  LOG     [DB] Values: ["Pistachio Paste","g"]
[00:36:20.160] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.161] Server  LOG     [DB] Values: ["Waffle Batter","ml"]
[00:36:20.161] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.162] Server  LOG     [DB] Values: ["Ice Cream","scoop"]
[00:36:20.163] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.163] Server  LOG     [DB] Values: ["Coffee Jelly","g"]
[00:36:20.164] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.164] Server  LOG     [DB] Values: ["Whipped Cream","ml"]
[00:36:20.165] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.166] Server  LOG     [DB] Values: ["Cookie Crumbs","g"]
[00:36:20.167] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.167] Server  LOG     [DB] Values: ["Green Apple Syrup","ml"]
[00:36:20.169] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.170] Server  LOG     [DB] Values: ["Lychee Syrup","ml"]
[00:36:20.171] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.171] Server  LOG     [DB] Values: ["Yakult","ml"]
[00:36:20.172] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.173] Server  LOG     [DB] Values: ["Orange Juice","ml"]
[00:36:20.174] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.175] Server  LOG     [DB] Values: ["Pineapple Juice","ml"]
[00:36:20.176] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.176] Server  LOG     [DB] Values: ["Watermelon Juice","ml"]
[00:36:20.178] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.179] Server  LOG     [DB] Values: ["Croissant","pcs"]
[00:36:20.180] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.180] Server  LOG     [DB] Values: ["Chocolate Cake","pcs"]
[00:36:20.181] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.182] Server  LOG     [DB] Values: ["Blueberry Muffin","pcs"]
[00:36:20.183] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.183] Server  LOG     [DB] Values: ["Cheese Danish","pcs"]
[00:36:20.185] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:36:20.186] Server  LOG     [DB] Values: ["Almond Cookie","pcs"]
[00:36:20.187] Server  LOG     [DB] Query: DELETE FROM product_ingredients
[00:36:20.190] Server  LOG     Cleared existing recipes.
[00:36:20.192] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Espresso Beans'), 18 FROM products WHERE category IN ('Hot Coffee', 'Iced Coffee', 'Specialty') AND name NOT LIKE '%Tea%' AND name NOT LIKE '%Soda%'
[00:36:20.193] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Milk'), 200 FROM products WHERE (category IN ('Hot Coffee', 'Iced Coffee', 'Specialty') OR name LIKE '%Latte%' OR name LIKE '%Matcha%') AND name NOT LIKE '%Americano%' AND name NOT LIKE '%Espresso%' AND name NOT LIKE '%Long Black%' AND name NOT LIKE '%Soda%'
[00:36:20.195] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Soda Water'), 250 FROM products WHERE category LIKE '%Soda%' OR name LIKE '%Fizz%' OR name LIKE '%Splash%'
[00:36:20.196] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Yakult'), 100 FROM products WHERE category LIKE '%Yakult%' OR name LIKE '%Yakult%'
[00:36:20.196] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Tea Leaves'), 10 FROM products WHERE name LIKE '%Tea%' OR category = 'Tea';
[00:36:20.197] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:36:20.198] Server  LOG     [DB] Values: [20,"%Caramel%","Caramel Syrup"]
[00:36:20.199] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:36:20.199] Server  LOG     [DB] Values: [20,"%Mocha%","Chocolate Syrup"]
[00:36:20.200] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:36:20.202] Server  LOG     [DB] Values: [20,"%Choco%","Chocolate Syrup"]
[00:36:20.204] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:36:20.204] Server  LOG     [DB] Values: [20,"%Vanilla%","Vanilla Syrup"]
[00:36:20.205] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:36:20.206] Server  LOG     [DB] Values: [40,"%Strawberry%","Strawberry Syrup"]
[00:36:20.207] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:36:20.208] Server  LOG     [DB] Values: [40,"%Mango%","Mango Puree"]
[00:36:20.210] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:36:20.210] Server  LOG     [DB] Values: [40,"%Berry%","Berry Mix"]
[00:36:20.212] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:36:20.212] Server  LOG     [DB] Values: [50,"%Cola%","Cola Syrup"]
[00:36:20.213] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:36:20.213] Server  LOG     [DB] Values: [15,"%Matcha%","Matcha Powder"]
[00:36:20.214] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:36:20.214] Server  LOG     [DB] Values: [20,"%Taro%","Taro Powder"]
[00:36:20.215] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:36:20.216] Server  LOG     [DB] Values: [40,"%Apple%","Green Apple Syrup"]
[00:36:20.217] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:36:20.218] Server  LOG     [DB] Values: [40,"%Lychee%","Lychee Syrup"]
[00:36:20.219] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:36:20.220] Server  LOG     [DB] Values: [300,"%Orange%","Orange Juice"]
[00:36:20.221] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:36:20.221] Server  LOG     [DB] Values: [300,"%Pineapple%","Pineapple Juice"]
[00:36:20.222] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:36:20.223] Server  LOG     [DB] Values: [300,"%Watermelon%","Watermelon Juice"]
[00:36:20.224] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, 1 FROM products p JOIN ingredients i ON p.name = i.name WHERE p.category = 'Food'
[00:36:20.225] Server  LOG     [DB] Query: SELECT COUNT(*) as total FROM product_ingredients
[00:36:20.227] Server  LOG     Recipe fix complete. Total links: 77
[00:36:21.439] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:36:21.494] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:36:21.498] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:36:21.818] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:21.819] Server  LOG     [DB] Values: [50]
[00:36:21.822] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:21.823] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:21.824] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:22.810] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:36:23.812] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:23.813] Server  LOG     [DB] Values: [50]
[00:36:23.816] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:23.817] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:23.817] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:25.632] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:36:25.636] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:36:25.810] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:25.811] Server  LOG     [DB] Values: [50]
[00:36:25.814] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:25.815] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:25.815] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:27.811] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:27.811] Server  LOG     [DB] Values: [50]
[00:36:27.815] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:27.815] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:27.816] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:27.859] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:36:29.825] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:29.825] Server  LOG     [DB] Values: [50]
[00:36:29.829] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:29.829] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:29.830] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:30.628] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:36:30.632] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:36:31.812] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:31.812] Server  LOG     [DB] Values: [50]
[00:36:31.815] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:31.816] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:31.817] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:32.812] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:36:33.810] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:33.810] Server  LOG     [DB] Values: [50]
[00:36:33.814] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:33.815] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:33.815] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:35.644] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:36:35.649] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:36:35.811] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:35.811] Server  LOG     [DB] Values: [50]
[00:36:35.815] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:35.815] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:35.816] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:37.809] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:37.809] Server  LOG     [DB] Values: [50]
[00:36:37.810] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:37.811] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:37.858] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:37.862] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:36:39.810] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:39.811] Server  LOG     [DB] Values: [50]
[00:36:39.814] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:39.815] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:39.816] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:40.630] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:36:40.634] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:36:41.810] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:41.810] Server  LOG     [DB] Values: [50]
[00:36:41.814] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:41.815] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:41.815] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:42.810] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:36:43.825] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:43.826] Server  LOG     [DB] Values: [50]
[00:36:43.827] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:43.828] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:43.831] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:45.630] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:36:45.633] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:36:45.815] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:45.816] Server  LOG     [DB] Values: [50]
[00:36:45.820] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:45.821] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:45.822] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:47.811] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:47.812] Server  LOG     [DB] Values: [50]
[00:36:47.815] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:47.818] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:36:47.820] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:47.820] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:49.810] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:49.811] Server  LOG     [DB] Values: [50]
[00:36:49.815] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:49.816] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:49.816] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:50.628] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:36:50.632] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:36:51.809] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:51.810] Server  LOG     [DB] Values: [50]
[00:36:51.811] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:51.811] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:51.855] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:52.810] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:36:53.809] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:53.809] Server  LOG     [DB] Values: [50]
[00:36:53.810] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:53.811] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:53.854] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:55.628] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:36:55.632] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:36:55.810] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:55.810] Server  LOG     [DB] Values: [50]
[00:36:55.813] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:55.814] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:55.815] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:57.811] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:36:57.811] Server  LOG     [DB] Values: [50]
[00:36:57.813] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:36:57.813] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:36:57.855] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:36:57.858] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:37:00.619] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:00.620] Server  LOG     [DB] Values: [50]
[00:37:00.623] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:00.624] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:00.625] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:01.611] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:37:01.615] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:37:02.618] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:02.619] Server  LOG     [DB] Values: [50]
[00:37:02.621] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:02.622] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:02.629] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:03.608] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:37:04.613] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:04.614] Server  LOG     [DB] Values: [50]
[00:37:04.617] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:04.618] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:04.618] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:06.124] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:37:06.129] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:37:06.133] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:06.134] Server  LOG     [DB] Values: [50]
[00:37:06.142] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:06.142] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:06.143] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:07.877] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:37:07.890] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:07.911] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:07.912] Server  LOG     [DB] Values: [50]
[00:37:07.917] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:07.918] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:09.810] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:09.810] Server  LOG     [DB] Values: [50]
[00:37:09.811] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:09.812] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:09.856] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:10.633] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:37:10.639] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:37:11.810] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:11.811] Server  LOG     [DB] Values: [50]
[00:37:11.814] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:11.815] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:11.816] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:12.810] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:37:13.810] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:13.811] Server  LOG     [DB] Values: [50]
[00:37:13.814] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:13.815] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:13.815] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:15.636] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:37:15.640] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:37:15.810] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:15.811] Server  LOG     [DB] Values: [50]
[00:37:15.815] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:15.816] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:15.817] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:17.812] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:17.812] Server  LOG     [DB] Values: [50]
[00:37:17.815] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:17.819] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:37:17.820] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:17.820] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:19.813] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:19.813] Server  LOG     [DB] Values: [50]
[00:37:19.817] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:19.818] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:19.818] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:20.628] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:37:20.631] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:37:21.810] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:21.811] Server  LOG     [DB] Values: [50]
[00:37:21.815] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:21.816] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:21.816] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:22.810] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:37:23.810] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:23.810] Server  LOG     [DB] Values: [50]
[00:37:23.812] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:23.812] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:23.857] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:26.618] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:37:26.621] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:37:26.630] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:26.631] Server  LOG     [DB] Values: [50]
[00:37:26.634] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:26.635] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:26.635] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:28.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:28.618] Server  LOG     [DB] Values: [50]
[00:37:28.621] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:28.625] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:37:28.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:28.627] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:30.615] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:30.615] Server  LOG     [DB] Values: [50]
[00:37:30.618] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:30.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:30.620] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:31.623] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:37:31.627] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:37:32.618] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:32.618] Server  LOG     [DB] Values: [50]
[00:37:32.622] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:32.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:32.624] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:33.616] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:37:34.610] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:34.611] Server  LOG     [DB] Values: [50]
[00:37:34.614] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:34.615] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:34.616] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:36.629] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:37:36.650] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:37:36.686] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:36.686] Server  LOG     [DB] Values: [50]
[00:37:36.692] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:36.694] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:36.695] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:38.619] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:38.620] Server  LOG     [DB] Values: [50]
[00:37:38.623] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:38.628] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:37:38.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:38.629] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:40.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:40.617] Server  LOG     [DB] Values: [50]
[00:37:40.620] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:40.621] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:40.621] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:41.615] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:37:41.619] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:37:42.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:42.618] Server  LOG     [DB] Values: [50]
[00:37:42.621] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:42.622] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:42.622] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:43.618] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:37:44.619] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:44.619] Server  LOG     [DB] Values: [50]
[00:37:44.623] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:44.624] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:44.624] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:46.612] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:37:46.617] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:37:46.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:46.622] Server  LOG     [DB] Values: [50]
[00:37:46.626] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:46.631] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:46.631] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:48.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:48.624] Server  LOG     [DB] Values: [50]
[00:37:48.627] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:48.630] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:37:48.631] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:48.632] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:50.613] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:50.614] Server  LOG     [DB] Values: [50]
[00:37:50.617] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:50.646] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:50.647] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:51.614] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:37:51.618] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:37:52.615] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:52.616] Server  LOG     [DB] Values: [50]
[00:37:52.619] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:52.620] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:52.620] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:53.614] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:37:54.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:54.611] Server  LOG     [DB] Values: [50]
[00:37:54.615] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:54.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:54.616] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:56.628] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:37:56.631] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:37:56.635] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:56.636] Server  LOG     [DB] Values: [50]
[00:37:56.644] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:56.645] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:56.645] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:37:58.625] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:37:58.626] Server  LOG     [DB] Values: [50]
[00:37:58.629] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:37:58.633] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:37:58.634] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:37:58.634] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:38:00.618] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:38:00.619] Server  LOG     [DB] Values: [50]
[00:38:00.622] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:38:00.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:38:00.623] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:38:01.625] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:38:01.629] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:38:02.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:38:02.612] Server  LOG     [DB] Values: [50]
[00:38:02.615] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:38:02.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:38:02.616] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:38:03.619] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:38:04.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:38:04.616] Server  LOG     [DB] Values: [50]
[00:38:04.620] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:38:04.620] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:38:04.621] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:38:06.622] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:38:06.626] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:38:06.630] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:38:06.631] Server  LOG     [DB] Values: [50]
[00:38:06.634] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:38:06.638] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:38:06.639] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:38:08.620] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:38:08.620] Server  LOG     [DB] Values: [50]
[00:38:08.624] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:38:08.627] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:38:08.628] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:38:08.629] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:38:10.613] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:38:10.614] Server  LOG     [DB] Values: [50]
[00:38:10.615] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:38:10.616] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:38:10.619] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:38:11.614] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:38:11.617] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:38:12.615] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:38:12.616] Server  LOG     [DB] Values: [50]
[00:38:12.619] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:38:12.620] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:38:12.620] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:38:13.610] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:38:14.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:38:14.624] Server  LOG     [DB] Values: [50]
[00:38:14.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:38:14.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:38:14.629] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:38:16.621] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:38:16.625] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:38:16.629] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:38:16.630] Server  LOG     [DB] Values: [50]
[00:38:16.637] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:38:16.638] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:38:16.638] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:38:18.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:38:18.618] Server  LOG     [DB] Values: [50]
[00:38:18.622] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:38:18.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:38:18.623] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:38:18.628] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:38:20.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:38:20.623] Server  LOG     [DB] Values: [50]
[00:38:20.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:38:20.628] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:38:20.629] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:38:21.616] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:38:21.620] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:38:22.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:38:22.614] Server  LOG     [DB] Values: [50]
[00:38:22.615] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:38:22.616] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:38:22.619] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:38:23.617] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:38:58.629] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:38:58.629] Server  LOG     [DB] Values: [50]
[00:38:58.633] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:38:58.636] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:38:58.640] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:38:58.645] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:38:58.646] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:38:58.646] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:39:58.629] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:39:58.629] Server  LOG     [DB] Values: [50]
[00:39:58.634] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:39:58.639] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:39:58.670] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:39:58.671] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:39:58.677] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:39:58.682] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:40:58.619] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:40:58.620] Server  LOG     [DB] Values: [50]
[00:40:58.625] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:40:58.629] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:40:58.635] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:40:58.639] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:40:58.640] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:40:58.642] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:41:56.839] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:41:56.845] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:41:56.846] Server  LOG     [DB] Values: [50]
[00:41:56.861] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:41:56.868] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:41:56.874] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:41:56.875] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:41:56.875] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:41:57.812] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:41:57.812] Server  LOG     [DB] Values: [50]
[00:41:57.816] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:41:57.820] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:41:57.821] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:41:57.822] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:00.619] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:00.619] Server  LOG     [DB] Values: [50]
[00:42:00.621] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:00.622] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:00.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:01.614] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:42:01.618] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:42:02.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:02.615] Server  LOG     [DB] Values: [50]
[00:42:02.618] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:02.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:02.619] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:03.620] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:42:04.637] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:04.637] Server  LOG     [DB] Values: [50]
[00:42:04.641] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:04.642] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:04.642] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:06.613] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:42:06.617] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:42:06.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:06.621] Server  LOG     [DB] Values: [50]
[00:42:06.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:06.626] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:06.664] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:08.625] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:08.625] Server  LOG     [DB] Values: [50]
[00:42:08.630] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:08.633] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:42:08.634] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:08.634] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:10.609] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:10.609] Server  LOG     [DB] Values: [50]
[00:42:10.611] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:10.611] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:10.614] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:11.612] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:42:11.616] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:42:12.620] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:12.621] Server  LOG     [DB] Values: [50]
[00:42:12.624] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:12.625] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:12.626] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:13.615] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:42:14.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:14.611] Server  LOG     [DB] Values: [50]
[00:42:14.614] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:14.615] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:14.616] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:16.623] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:42:16.627] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:42:16.632] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:16.632] Server  LOG     [DB] Values: [50]
[00:42:16.640] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:16.641] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:16.642] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:18.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:18.617] Server  LOG     [DB] Values: [50]
[00:42:18.621] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:18.624] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:42:18.628] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:18.629] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:20.620] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:20.621] Server  LOG     [DB] Values: [50]
[00:42:20.625] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:20.628] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:20.628] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:21.623] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:42:21.627] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:42:22.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:22.622] Server  LOG     [DB] Values: [50]
[00:42:22.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:22.624] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:22.627] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:23.612] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:42:24.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:24.624] Server  LOG     [DB] Values: [50]
[00:42:24.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:24.631] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:24.631] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:26.621] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:42:26.624] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:42:26.628] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:26.629] Server  LOG     [DB] Values: [50]
[00:42:26.634] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:26.635] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:26.638] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:28.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:28.612] Server  LOG     [DB] Values: [50]
[00:42:28.615] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:28.618] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:42:28.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:28.620] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:30.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:30.617] Server  LOG     [DB] Values: [50]
[00:42:30.620] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:30.621] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:30.621] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:31.613] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:42:31.617] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:42:32.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:32.624] Server  LOG     [DB] Values: [50]
[00:42:32.629] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:32.630] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:32.631] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:33.618] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:42:34.618] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:34.619] Server  LOG     [DB] Values: [50]
[00:42:34.622] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:34.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:34.624] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:35.635] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:42:35.639] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:42:35.812] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:35.817] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:35.817] Server  LOG     [DB] Values: [50]
[00:42:35.822] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:35.823] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:37.815] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:37.816] Server  LOG     [DB] Values: [50]
[00:42:37.819] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:37.823] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:42:37.827] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:37.828] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:39.814] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:39.814] Server  LOG     [DB] Values: [50]
[00:42:39.817] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:39.818] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:39.819] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:41.613] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:42:41.617] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:42:42.210] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:42.214] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:42.215] Server  LOG     [DB] Values: [50]
[00:42:42.217] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:42.218] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:42.810] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:42:43.811] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:43.811] Server  LOG     [DB] Values: [50]
[00:42:43.815] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:43.816] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:43.816] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:46.622] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:42:46.626] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:42:46.629] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:46.630] Server  LOG     [DB] Values: [50]
[00:42:46.633] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:46.638] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:46.639] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:48.612] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:48.612] Server  LOG     [DB] Values: [50]
[00:42:48.614] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:48.614] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:48.621] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:48.624] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:42:50.761] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:50.762] Server  LOG     [DB] Values: [50]
[00:42:50.766] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:50.769] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:50.769] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:50.776] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:42:50.799] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:42:52.613] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:52.614] Server  LOG     [DB] Values: [50]
[00:42:52.617] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:52.618] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:52.618] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:53.610] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:42:54.613] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:54.614] Server  LOG     [DB] Values: [50]
[00:42:54.617] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:54.618] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:54.618] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:55.698] Server  LOG      ✓ Compiled in 76ms
[00:42:55.761] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:42:55.765] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:42:56.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:56.624] Server  LOG     [DB] Values: [50]
[00:42:56.628] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:56.628] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:56.629] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:57.812] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:42:57.815] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:57.816] Server  LOG     [DB] Values: [50]
[00:42:57.820] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:57.822] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:57.823] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:42:59.811] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:42:59.811] Server  LOG     [DB] Values: [50]
[00:42:59.815] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:42:59.815] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:42:59.816] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:00.765] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:43:00.769] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:43:01.815] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:01.815] Server  LOG     [DB] Values: [50]
[00:43:01.817] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:01.817] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:01.820] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:43:02.127] Server  LOG      ✓ Compiled in 86ms
[00:43:02.141] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:43:02.145] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:43:02.810] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:43:03.841] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:43:03.850] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:03.853] Server  LOG     [DB] Values: [50]
[00:43:03.863] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:03.864] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:05.809] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:05.810] Server  LOG     [DB] Values: [50]
[00:43:05.811] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:05.812] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:05.818] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:43:07.149] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:43:07.153] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:43:07.809] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:07.810] Server  LOG     [DB] Values: [50]
[00:43:07.811] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:07.811] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:07.857] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:43:07.907] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:43:09.645] Server  LOG     [Product API] Fetching ID: "1"
[00:43:09.646] Server  LOG     [DB] Query: SELECT * FROM products WHERE id = ?
[00:43:09.646] Server  LOG     [DB] Values: ["1"]
[00:43:09.647] Server  LOG     [Product API] Result count: 1
[00:43:09.648] Server  LOG     [Product API] Product found: "Americano" "55.00"
[00:43:09.648] Server  LOG     [DB] Query: SELECT pi.ingredient_id, i.name, i.unit, pi.amount FROM product_ingredients pi JOIN ingredients i ON pi.ingredient_id = i.id WHERE pi.product_id = ?
[00:43:09.649] Server  LOG     [DB] Values: ["1"]
[00:43:09.796] Browser LOG     Fetching details for: 1
[00:43:09.796] Browser LOG     Details fetched: {"category":"Hot Coffee","created_at":"2026-01-02T11:03:33.000Z","description":"Classic Italian espresso with hot water","id":1,"ingredients":[{"amount":"18.00","ingredient_id":1,"name":"Espresso Beans","unit":"g"}],"is_active":1,"min_threshold":10,"name":"Americano","price":"55.00","stock_quantity":10000,"updated_at":"2026-01-02T11:39:30.000Z"}
[00:43:09.819] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:09.819] Server  LOG     [DB] Values: [50]
[00:43:09.820] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:09.821] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:09.824] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:43:11.817] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:11.817] Server  LOG     [DB] Values: [50]
[00:43:11.820] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:43:11.821] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:11.822] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:12.142] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:43:12.146] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:43:12.819] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:43:13.810] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:13.810] Server  LOG     [DB] Values: [50]
[00:43:13.814] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:43:13.815] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:13.815] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:15.879] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:43:15.883] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:15.883] Server  LOG     [DB] Values: [50]
[00:43:15.886] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:15.887] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:17.142] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:43:17.145] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:43:17.812] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:17.812] Server  LOG     [DB] Values: [50]
[00:43:17.816] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:43:17.819] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:43:17.820] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:17.821] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:19.864] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:43:19.875] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:19.875] Server  LOG     [DB] Values: [50]
[00:43:19.879] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:19.879] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:21.814] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:21.814] Server  LOG     [DB] Values: [50]
[00:43:21.817] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:43:21.818] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:21.819] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:22.142] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:43:22.146] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:43:22.648] Server  LOG     [DB] Query: UPDATE products SET name = ?, category = ?, price = ?, description = ?, stock_quantity = ?, min_threshold = ? WHERE id = ?
[00:43:22.650] Server  LOG     [DB] Values: ["Americano","Hot Coffee",55,"Classic Italian espresso with hot water",10000,10,"1"]
[00:43:22.651] Server  LOG     [DB] Query: DELETE FROM product_ingredients WHERE product_id = ?
[00:43:22.651] Server  LOG     [DB] Values: ["1"]
[00:43:22.653] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) VALUES (?, ?, ?)
[00:43:22.654] Server  LOG     [DB] Values: ["1",1,"18.00"]
[00:43:22.665] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:43:22.670] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:43:22.681] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:43:22.813] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:43:23.809] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:23.809] Server  LOG     [DB] Values: [50]
[00:43:23.813] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:23.814] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:23.874] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:43:25.818] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:43:25.821] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:25.822] Server  LOG     [DB] Values: [50]
[00:43:25.824] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:25.825] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:27.150] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:43:27.154] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:43:27.841] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:43:27.845] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:27.846] Server  LOG     [DB] Values: [50]
[00:43:27.850] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:43:27.885] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:27.885] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:30.242] Server  LOG     Starting COMPREHENSIVE recipe fix...
[00:43:30.243] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.244] Server  LOG     [DB] Values: ["Espresso Beans","g"]
[00:43:30.247] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.247] Server  LOG     [DB] Values: ["Milk","ml"]
[00:43:30.251] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:30.251] Server  LOG     [DB] Values: [50]
[00:43:30.255] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:43:30.256] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.256] Server  LOG     [DB] Values: ["Caramel Syrup","ml"]
[00:43:30.257] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:30.257] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:30.260] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.261] Server  LOG     [DB] Values: ["Chocolate Syrup","ml"]
[00:43:30.264] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.264] Server  LOG     [DB] Values: ["Vanilla Syrup","ml"]
[00:43:30.266] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.266] Server  LOG     [DB] Values: ["Soda Water","ml"]
[00:43:30.269] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.269] Server  LOG     [DB] Values: ["Cola Syrup","ml"]
[00:43:30.271] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.271] Server  LOG     [DB] Values: ["Lemon Syrup","ml"]
[00:43:30.272] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.273] Server  LOG     [DB] Values: ["Strawberry Syrup","ml"]
[00:43:30.274] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.274] Server  LOG     [DB] Values: ["Mango Puree","ml"]
[00:43:30.275] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.276] Server  LOG     [DB] Values: ["Berry Mix","ml"]
[00:43:30.278] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.278] Server  LOG     [DB] Values: ["Matcha Powder","g"]
[00:43:30.280] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.280] Server  LOG     [DB] Values: ["Taro Powder","g"]
[00:43:30.281] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.282] Server  LOG     [DB] Values: ["Tapioca Pearls","g"]
[00:43:30.283] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.283] Server  LOG     [DB] Values: ["Tea Leaves","g"]
[00:43:30.285] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.285] Server  LOG     [DB] Values: ["Pistachio Paste","g"]
[00:43:30.286] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.287] Server  LOG     [DB] Values: ["Waffle Batter","ml"]
[00:43:30.288] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.288] Server  LOG     [DB] Values: ["Ice Cream","scoop"]
[00:43:30.289] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.289] Server  LOG     [DB] Values: ["Coffee Jelly","g"]
[00:43:30.291] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.292] Server  LOG     [DB] Values: ["Whipped Cream","ml"]
[00:43:30.293] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.294] Server  LOG     [DB] Values: ["Cookie Crumbs","g"]
[00:43:30.296] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.296] Server  LOG     [DB] Values: ["Green Apple Syrup","ml"]
[00:43:30.297] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.298] Server  LOG     [DB] Values: ["Lychee Syrup","ml"]
[00:43:30.299] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.299] Server  LOG     [DB] Values: ["Yakult","ml"]
[00:43:30.301] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.301] Server  LOG     [DB] Values: ["Orange Juice","ml"]
[00:43:30.303] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.303] Server  LOG     [DB] Values: ["Pineapple Juice","ml"]
[00:43:30.304] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.304] Server  LOG     [DB] Values: ["Watermelon Juice","ml"]
[00:43:30.305] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.306] Server  LOG     [DB] Values: ["Croissant","pcs"]
[00:43:30.307] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.307] Server  LOG     [DB] Values: ["Chocolate Cake","pcs"]
[00:43:30.308] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.308] Server  LOG     [DB] Values: ["Blueberry Muffin","pcs"]
[00:43:30.309] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.310] Server  LOG     [DB] Values: ["Cheese Danish","pcs"]
[00:43:30.312] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:30.312] Server  LOG     [DB] Values: ["Almond Cookie","pcs"]
[00:43:30.313] Server  LOG     [DB] Query: DELETE FROM product_ingredients
[00:43:30.315] Server  LOG     Cleared existing recipes.
[00:43:30.315] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Espresso Beans'), 18 FROM products WHERE category IN ('Hot Coffee', 'Iced Coffee', 'Specialty') AND name NOT LIKE '%Tea%' AND name NOT LIKE '%Soda%'
[00:43:30.318] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Milk'), 200 FROM products WHERE (category IN ('Hot Coffee', 'Iced Coffee', 'Specialty') OR name LIKE '%Latte%' OR name LIKE '%Matcha%') AND name NOT LIKE '%Americano%' AND name NOT LIKE '%Espresso%' AND name NOT LIKE '%Long Black%' AND name NOT LIKE '%Soda%'
[00:43:30.320] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Soda Water'), 250 FROM products WHERE category LIKE '%Soda%' OR name LIKE '%Fizz%' OR name LIKE '%Splash%'
[00:43:30.321] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Yakult'), 100 FROM products WHERE category LIKE '%Yakult%' OR name LIKE '%Yakult%'
[00:43:30.323] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Tea Leaves'), 10 FROM products WHERE name LIKE '%Tea%' OR category = 'Tea';
[00:43:30.326] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:30.327] Server  LOG     [DB] Values: [20,"%Caramel%","Caramel Syrup"]
[00:43:30.329] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:30.329] Server  LOG     [DB] Values: [20,"%Mocha%","Chocolate Syrup"]
[00:43:30.331] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:30.331] Server  LOG     [DB] Values: [20,"%Choco%","Chocolate Syrup"]
[00:43:30.332] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:30.333] Server  LOG     [DB] Values: [20,"%Vanilla%","Vanilla Syrup"]
[00:43:30.334] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:30.334] Server  LOG     [DB] Values: [40,"%Strawberry%","Strawberry Syrup"]
[00:43:30.336] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:30.337] Server  LOG     [DB] Values: [40,"%Mango%","Mango Puree"]
[00:43:30.338] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:30.339] Server  LOG     [DB] Values: [40,"%Berry%","Berry Mix"]
[00:43:30.340] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:30.340] Server  LOG     [DB] Values: [50,"%Cola%","Cola Syrup"]
[00:43:30.341] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:30.342] Server  LOG     [DB] Values: [15,"%Matcha%","Matcha Powder"]
[00:43:30.343] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:30.344] Server  LOG     [DB] Values: [20,"%Taro%","Taro Powder"]
[00:43:30.346] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:30.346] Server  LOG     [DB] Values: [40,"%Apple%","Green Apple Syrup"]
[00:43:30.348] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:30.348] Server  LOG     [DB] Values: [40,"%Lychee%","Lychee Syrup"]
[00:43:30.349] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:30.350] Server  LOG     [DB] Values: [300,"%Orange%","Orange Juice"]
[00:43:30.351] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:30.352] Server  LOG     [DB] Values: [300,"%Pineapple%","Pineapple Juice"]
[00:43:30.353] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:30.353] Server  LOG     [DB] Values: [300,"%Watermelon%","Watermelon Juice"]
[00:43:30.354] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, 1 FROM products p JOIN ingredients i ON p.name = i.name WHERE p.category = 'Food'
[00:43:30.356] Server  LOG     [DB] Query: SELECT COUNT(*) as total FROM product_ingredients
[00:43:30.357] Server  LOG     Recipe fix complete. Total links: 97
[00:43:31.487] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:43:31.818] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:31.818] Server  LOG     [DB] Values: [50]
[00:43:31.822] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:43:31.823] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:31.823] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:32.141] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:43:32.146] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:43:32.817] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:43:34.892] Server  LOG      ✓ Compiled in 264ms
[00:43:35.139] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:43:35.142] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:35.143] Server  LOG     [DB] Values: [50]
[00:43:35.149] Server  LOG     Starting COMPREHENSIVE recipe fix...
[00:43:35.150] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.150] Server  LOG     [DB] Values: ["Espresso Beans","g"]
[00:43:35.155] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:35.156] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:35.157] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.158] Server  LOG     [DB] Values: ["Milk","ml"]
[00:43:35.166] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.167] Server  LOG     [DB] Values: ["Caramel Syrup","ml"]
[00:43:35.190] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:43:35.192] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.196] Server  LOG     [DB] Values: ["Chocolate Syrup","ml"]
[00:43:35.201] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:43:35.208] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.209] Server  LOG     [DB] Values: ["Vanilla Syrup","ml"]
[00:43:35.210] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.212] Server  LOG     [DB] Values: ["Soda Water","ml"]
[00:43:35.214] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.215] Server  LOG     [DB] Values: ["Cola Syrup","ml"]
[00:43:35.217] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.218] Server  LOG     [DB] Values: ["Lemon Syrup","ml"]
[00:43:35.220] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.220] Server  LOG     [DB] Values: ["Strawberry Syrup","ml"]
[00:43:35.222] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.222] Server  LOG     [DB] Values: ["Mango Puree","ml"]
[00:43:35.223] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.224] Server  LOG     [DB] Values: ["Berry Mix","ml"]
[00:43:35.225] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.225] Server  LOG     [DB] Values: ["Matcha Powder","g"]
[00:43:35.227] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.228] Server  LOG     [DB] Values: ["Taro Powder","g"]
[00:43:35.231] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.232] Server  LOG     [DB] Values: ["Tapioca Pearls","g"]
[00:43:35.234] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.235] Server  LOG     [DB] Values: ["Tea Leaves","g"]
[00:43:35.238] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.238] Server  LOG     [DB] Values: ["Pistachio Paste","g"]
[00:43:35.240] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.240] Server  LOG     [DB] Values: ["Waffle Batter","ml"]
[00:43:35.244] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.246] Server  LOG     [DB] Values: ["Ice Cream","scoop"]
[00:43:35.256] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.256] Server  LOG     [DB] Values: ["Coffee Jelly","g"]
[00:43:35.258] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.258] Server  LOG     [DB] Values: ["Whipped Cream","ml"]
[00:43:35.259] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.260] Server  LOG     [DB] Values: ["Cookie Crumbs","g"]
[00:43:35.265] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.267] Server  LOG     [DB] Values: ["Green Apple Syrup","ml"]
[00:43:35.272] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.272] Server  LOG     [DB] Values: ["Lychee Syrup","ml"]
[00:43:35.274] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.275] Server  LOG     [DB] Values: ["Yakult","ml"]
[00:43:35.276] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.276] Server  LOG     [DB] Values: ["Orange Juice","ml"]
[00:43:35.280] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.280] Server  LOG     [DB] Values: ["Pineapple Juice","ml"]
[00:43:35.282] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.286] Server  LOG     [DB] Values: ["Watermelon Juice","ml"]
[00:43:35.287] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.288] Server  LOG     [DB] Values: ["Croissant","pcs"]
[00:43:35.289] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.289] Server  LOG     [DB] Values: ["Chocolate Cake","pcs"]
[00:43:35.291] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.291] Server  LOG     [DB] Values: ["Blueberry Muffin","pcs"]
[00:43:35.292] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.293] Server  LOG     [DB] Values: ["Cheese Danish","pcs"]
[00:43:35.296] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:35.316] Server  LOG     [DB] Values: ["Almond Cookie","pcs"]
[00:43:35.318] Server  LOG     [DB] Query: DELETE FROM product_ingredients
[00:43:35.320] Server  LOG     Cleared existing recipes.
[00:43:35.321] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Espresso Beans'), 18 FROM products WHERE category IN ('Hot Coffee', 'Iced Coffee', 'Specialty') AND name NOT LIKE '%Tea%' AND name NOT LIKE '%Soda%'
[00:43:35.323] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Milk'), 200 FROM products WHERE (category IN ('Hot Coffee', 'Iced Coffee', 'Specialty') OR name LIKE '%Latte%' OR name LIKE '%Matcha%') AND name NOT LIKE '%Americano%' AND name NOT LIKE '%Espresso%' AND name NOT LIKE '%Long Black%' AND name NOT LIKE '%Soda%'
[00:43:35.329] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Soda Water'), 250 FROM products WHERE category LIKE '%Soda%' OR name LIKE '%Fizz%' OR name LIKE '%Splash%'
[00:43:35.331] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Yakult'), 100 FROM products WHERE category LIKE '%Yakult%' OR name LIKE '%Yakult%'
[00:43:35.334] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Tea Leaves'), 10 FROM products WHERE name LIKE '%Tea%' OR category = 'Tea';
[00:43:35.336] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:35.336] Server  LOG     [DB] Values: [20,"%Caramel%","Caramel Syrup"]
[00:43:35.338] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:35.338] Server  LOG     [DB] Values: [20,"%Mocha%","Chocolate Syrup"]
[00:43:35.339] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:35.340] Server  LOG     [DB] Values: [20,"%Choco%","Chocolate Syrup"]
[00:43:35.341] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:35.342] Server  LOG     [DB] Values: [20,"%Vanilla%","Vanilla Syrup"]
[00:43:35.343] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:35.343] Server  LOG     [DB] Values: [40,"%Strawberry%","Strawberry Syrup"]
[00:43:35.347] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:35.348] Server  LOG     [DB] Values: [40,"%Mango%","Mango Puree"]
[00:43:35.350] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:35.351] Server  LOG     [DB] Values: [40,"%Berry%","Berry Mix"]
[00:43:35.354] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:35.354] Server  LOG     [DB] Values: [50,"%Cola%","Cola Syrup"]
[00:43:35.356] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:35.357] Server  LOG     [DB] Values: [15,"%Matcha%","Matcha Powder"]
[00:43:35.363] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:35.364] Server  LOG     [DB] Values: [20,"%Taro%","Taro Powder"]
[00:43:35.366] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:35.366] Server  LOG     [DB] Values: [40,"%Apple%","Green Apple Syrup"]
[00:43:35.368] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:35.369] Server  LOG     [DB] Values: [40,"%Lychee%","Lychee Syrup"]
[00:43:35.371] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:35.372] Server  LOG     [DB] Values: [300,"%Orange%","Orange Juice"]
[00:43:35.373] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:35.374] Server  LOG     [DB] Values: [300,"%Pineapple%","Pineapple Juice"]
[00:43:35.375] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:35.376] Server  LOG     [DB] Values: [300,"%Watermelon%","Watermelon Juice"]
[00:43:35.377] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, 1 FROM products p JOIN ingredients i ON p.name = i.name WHERE p.category = 'Food'
[00:43:35.380] Server  LOG     [DB] Query: SELECT COUNT(*) as total FROM product_ingredients
[00:43:35.380] Server  LOG     Recipe fix complete. Total links: 97
[00:43:36.934] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:43:36.985] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:36.985] Server  LOG     [DB] Values: [50]
[00:43:36.989] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:43:36.990] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:36.991] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:38.785] Server  LOG     Starting COMPREHENSIVE recipe fix...
[00:43:38.785] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.786] Server  LOG     [DB] Values: ["Espresso Beans","g"]
[00:43:38.788] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.788] Server  LOG     [DB] Values: ["Milk","ml"]
[00:43:38.793] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:38.794] Server  LOG     [DB] Values: [50]
[00:43:38.798] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:43:38.799] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.799] Server  LOG     [DB] Values: ["Caramel Syrup","ml"]
[00:43:38.803] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:43:38.804] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:38.805] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:38.807] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.808] Server  LOG     [DB] Values: ["Chocolate Syrup","ml"]
[00:43:38.813] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.814] Server  LOG     [DB] Values: ["Vanilla Syrup","ml"]
[00:43:38.815] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.815] Server  LOG     [DB] Values: ["Soda Water","ml"]
[00:43:38.817] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.817] Server  LOG     [DB] Values: ["Cola Syrup","ml"]
[00:43:38.819] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.820] Server  LOG     [DB] Values: ["Lemon Syrup","ml"]
[00:43:38.821] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.822] Server  LOG     [DB] Values: ["Strawberry Syrup","ml"]
[00:43:38.823] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.823] Server  LOG     [DB] Values: ["Mango Puree","ml"]
[00:43:38.825] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.825] Server  LOG     [DB] Values: ["Berry Mix","ml"]
[00:43:38.826] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.827] Server  LOG     [DB] Values: ["Matcha Powder","g"]
[00:43:38.829] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.830] Server  LOG     [DB] Values: ["Taro Powder","g"]
[00:43:38.831] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.831] Server  LOG     [DB] Values: ["Tapioca Pearls","g"]
[00:43:38.832] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.833] Server  LOG     [DB] Values: ["Tea Leaves","g"]
[00:43:38.834] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.835] Server  LOG     [DB] Values: ["Pistachio Paste","g"]
[00:43:38.837] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.837] Server  LOG     [DB] Values: ["Waffle Batter","ml"]
[00:43:38.840] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.840] Server  LOG     [DB] Values: ["Ice Cream","scoop"]
[00:43:38.841] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.842] Server  LOG     [DB] Values: ["Coffee Jelly","g"]
[00:43:38.843] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.843] Server  LOG     [DB] Values: ["Whipped Cream","ml"]
[00:43:38.846] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.846] Server  LOG     [DB] Values: ["Cookie Crumbs","g"]
[00:43:38.847] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.848] Server  LOG     [DB] Values: ["Green Apple Syrup","ml"]
[00:43:38.849] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.849] Server  LOG     [DB] Values: ["Lychee Syrup","ml"]
[00:43:38.850] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.850] Server  LOG     [DB] Values: ["Yakult","ml"]
[00:43:38.852] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.853] Server  LOG     [DB] Values: ["Orange Juice","ml"]
[00:43:38.854] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.854] Server  LOG     [DB] Values: ["Pineapple Juice","ml"]
[00:43:38.855] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.856] Server  LOG     [DB] Values: ["Watermelon Juice","ml"]
[00:43:38.856] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.857] Server  LOG     [DB] Values: ["Croissant","pcs"]
[00:43:38.858] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.858] Server  LOG     [DB] Values: ["Chocolate Cake","pcs"]
[00:43:38.859] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.859] Server  LOG     [DB] Values: ["Blueberry Muffin","pcs"]
[00:43:38.861] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.862] Server  LOG     [DB] Values: ["Cheese Danish","pcs"]
[00:43:38.863] Server  LOG     [DB] Query: INSERT IGNORE INTO ingredients (name, unit, stock_quantity, reorder_level) VALUES (?, ?, 5000, 100)
[00:43:38.864] Server  LOG     [DB] Values: ["Almond Cookie","pcs"]
[00:43:38.865] Server  LOG     [DB] Query: DELETE FROM product_ingredients
[00:43:38.867] Server  LOG     Cleared existing recipes.
[00:43:38.868] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Espresso Beans'), 18 FROM products WHERE category IN ('Hot Coffee', 'Iced Coffee', 'Specialty') AND name NOT LIKE '%Tea%' AND name NOT LIKE '%Soda%'
[00:43:38.871] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Milk'), 200 FROM products WHERE (category IN ('Hot Coffee', 'Iced Coffee', 'Specialty') OR name LIKE '%Latte%' OR name LIKE '%Matcha%') AND name NOT LIKE '%Americano%' AND name NOT LIKE '%Espresso%' AND name NOT LIKE '%Long Black%' AND name NOT LIKE '%Soda%'
[00:43:38.872] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Soda Water'), 250 FROM products WHERE category LIKE '%Soda%' OR name LIKE '%Fizz%' OR name LIKE '%Splash%'
[00:43:38.873] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Yakult'), 100 FROM products WHERE category LIKE '%Yakult%' OR name LIKE '%Yakult%'
[00:43:38.875] Server  LOG     [DB] Query: INSERT INTO product_ingredients (product_id, ingredient_id, amount) SELECT id, (SELECT id FROM ingredients WHERE name='Tea Leaves'), 10 FROM products WHERE name LIKE '%Tea%' OR category = 'Tea';
[00:43:38.876] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:38.876] Server  LOG     [DB] Values: [20,"%Caramel%","Caramel Syrup"]
[00:43:38.877] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:38.878] Server  LOG     [DB] Values: [20,"%Mocha%","Chocolate Syrup"]
[00:43:38.880] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:38.880] Server  LOG     [DB] Values: [20,"%Choco%","Chocolate Syrup"]
[00:43:38.881] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:38.882] Server  LOG     [DB] Values: [20,"%Vanilla%","Vanilla Syrup"]
[00:43:38.883] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:38.884] Server  LOG     [DB] Values: [40,"%Strawberry%","Strawberry Syrup"]
[00:43:38.886] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:38.887] Server  LOG     [DB] Values: [40,"%Mango%","Mango Puree"]
[00:43:38.888] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:38.888] Server  LOG     [DB] Values: [40,"%Berry%","Berry Mix"]
[00:43:38.889] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:38.890] Server  LOG     [DB] Values: [50,"%Cola%","Cola Syrup"]
[00:43:38.891] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:38.891] Server  LOG     [DB] Values: [15,"%Matcha%","Matcha Powder"]
[00:43:38.892] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:38.892] Server  LOG     [DB] Values: [20,"%Taro%","Taro Powder"]
[00:43:38.893] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:38.894] Server  LOG     [DB] Values: [40,"%Apple%","Green Apple Syrup"]
[00:43:38.896] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:38.896] Server  LOG     [DB] Values: [40,"%Lychee%","Lychee Syrup"]
[00:43:38.898] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:38.898] Server  LOG     [DB] Values: [300,"%Orange%","Orange Juice"]
[00:43:38.899] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:38.900] Server  LOG     [DB] Values: [300,"%Pineapple%","Pineapple Juice"]
[00:43:38.901] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, ? FROM products p, ingredients i WHERE p.name LIKE ? AND i.name = ?
[00:43:38.901] Server  LOG     [DB] Values: [300,"%Watermelon%","Watermelon Juice"]
[00:43:38.903] Server  LOG     [DB] Query: INSERT IGNORE INTO product_ingredients (product_id, ingredient_id, amount) SELECT p.id, i.id, 1 FROM products p JOIN ingredients i ON p.name = i.name WHERE p.category = 'Food'
[00:43:38.904] Server  LOG     [DB] Query: SELECT COUNT(*) as total FROM product_ingredients
[00:43:38.905] Server  LOG     Recipe fix complete. Total links: 97
[00:43:39.917] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:43:39.989] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:39.990] Server  LOG     [DB] Values: [50]
[00:43:39.991] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:39.991] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:39.998] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:43:40.147] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:43:40.151] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:43:41.588] Browser INFO    %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[00:43:41.740] Browser LOG     %c[Vercel Web Analytics]%c Debug mode is enabled by default in development. No requests will be sent to the server. color: rgb(120, 120, 120) color: inherit
[00:43:41.740] Browser LOG     %c[Vercel Web Analytics]%c Running queued event color: rgb(120, 120, 120) color: inherit pageview {"path":"/","route":"/"}
[00:43:41.740] Browser LOG     %c[Vercel Web Analytics]%c [pageview] http://localhost:3000/ color: rgb(120, 120, 120) color: inherit {"dp":"/","o":"http://localhost:3000/","sdkn":"@vercel/analytics/next","sdkv":"1.5.0","sv":"0.1.3","ts":1767354795247}
[00:43:43.145] Server  LOG     [DB] Query: SELECT id, email, name, role, is_active FROM users WHERE email = ?
[00:43:43.145] Server  LOG     [DB] Values: ["cashier@sodalicious.com"]
[00:43:43.147] Server  LOG     [DB] Query: INSERT INTO activity_logs (user_id, action, action_type, entity_type, entity_id, details) VALUES (?, 'Logged in', 'login', 'User', ?, 'User logged into the system')
[00:43:43.148] Server  LOG     [DB] Values: [1,1]
[00:43:43.265] Server  ERROR   [DB ERROR] Query failed: Error: CONSTRAINT `activity_logs.details` failed for `sodalicious_db`.`activity_logs`
[00:43:43.336] Server  ERROR   Failed to log login activity Error: CONSTRAINT `activity_logs.details` failed for `sodalicious_db`.`activity_logs`
[00:43:43.444] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:43.445] Server  LOG     [DB] Values: [50]
[00:43:43.467] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:43:43.472] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:43:43.473] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:43.474] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:43.499] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:43.499] Server  LOG     [DB] Values: [50]
[00:43:43.501] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:43.501] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:45.453] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:45.453] Server  LOG     [DB] Values: [50]
[00:43:45.455] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:45.455] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:47.452] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:47.452] Server  LOG     [DB] Values: [50]
[00:43:47.454] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:47.454] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:48.440] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:43:49.441] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:49.442] Server  LOG     [DB] Values: [50]
[00:43:49.443] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:49.443] Server  LOG     [DB] Values: ["6,5,4,3,2,1"]
[00:43:51.044] Server  LOG     [Order API] Incoming POST request
[00:43:51.044] Server  LOG     [Order API] Processing order with 1 items
[00:43:51.046] Server  LOG     [DB] Query: SELECT id FROM users WHERE role = 'cashier' LIMIT 1
[00:43:51.047] Server  LOG     [Order API] Using Cashier ID: 1
[00:43:51.047] Server  LOG     [DB] Query: INSERT INTO orders (order_number, cashier_id, customer_name, total_amount, payment_method, order_status) VALUES (?, ?, ?, ?, ?, 'completed')
[00:43:51.048] Server  LOG     [DB] Values: ["ORD-1767354804654",1,"Walk-in",70.2,"cash"]
[00:43:51.050] Server  LOG     [DB] Query: SELECT id FROM orders WHERE order_number = ? LIMIT 1
[00:43:51.050] Server  LOG     [DB] Values: ["ORD-1767354804654"]
[00:43:51.051] Server  LOG     [Order API] Created DB Order ID: 7
[00:43:51.052] Server  LOG     [Order API] Mapping item: "Cappuccino" (Base: "Cappuccino")
[00:43:51.052] Server  LOG     [DB] Query: SELECT id FROM products WHERE name = ? LIMIT 1
[00:43:51.053] Server  LOG     [DB] Values: ["Cappuccino"]
[00:43:51.054] Server  LOG     [Order API] Found DB Product: Cappuccino (ID: 3)
[00:43:51.054] Server  LOG     [DB] Query: INSERT INTO order_items (order_id, product_id, quantity, unit_price, subtotal) VALUES (?, ?, ?, ?, ?)
[00:43:51.055] Server  LOG     [DB] Values: [7,3,1,65,65]
[00:43:51.056] Server  LOG     [DB] Query: UPDATE products SET stock_quantity = stock_quantity - ? WHERE id = ?
[00:43:51.057] Server  LOG     [DB] Values: [1,3]
[00:43:51.058] Server  LOG     [Order API] Deducted 1 from product stock (ID: 3)
[00:43:51.058] Server  LOG     [DB] Query: SELECT pi.ingredient_id, pi.amount, i.stock_quantity, i.name as ing_name FROM product_ingredients pi JOIN ingredients i ON pi.ingredient_id = i.id WHERE pi.product_id = ?
[00:43:51.059] Server  LOG     [DB] Values: [3]
[00:43:51.060] Server  LOG     [Order API] Found 2 ingredients for Cappuccino
[00:43:51.060] Server  LOG     [Order API] Deducting 18 from Espresso Beans. Prev: 4262, New: 4244
[00:43:51.060] Server  LOG     [DB] Query: UPDATE ingredients SET stock_quantity = ? WHERE id = ?
[00:43:51.061] Server  LOG     [DB] Values: [4244,1]
[00:43:51.064] Server  LOG     [DB] Query: INSERT INTO inventory_logs (ingredient_id, user_id, log_type, quantity_changed, reason) VALUES (?, ?, 'sale', ?, ?)
[00:43:51.065] Server  LOG     [DB] Values: [1,1,-18,"Order ORD-1767354804654"]
[00:43:51.068] Server  LOG     [Order API] Deducting 200 from Milk. Prev: 9800, New: 9600
[00:43:51.068] Server  LOG     [DB] Query: UPDATE ingredients SET stock_quantity = ? WHERE id = ?
[00:43:51.069] Server  LOG     [DB] Values: [9600,2]
[00:43:51.071] Server  LOG     [DB] Query: INSERT INTO inventory_logs (ingredient_id, user_id, log_type, quantity_changed, reason) VALUES (?, ?, 'sale', ?, ?)
[00:43:51.072] Server  LOG     [DB] Values: [2,1,-200,"Order ORD-1767354804654"]
[00:43:51.075] Server  LOG     [Order API] ✓ Order ORD-1767354804654 fully processed and synced.
[00:43:51.101] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:43:51.451] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:51.452] Server  LOG     [DB] Values: [50]
[00:43:51.453] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:51.453] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:43:53.446] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:43:53.451] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:53.451] Server  LOG     [DB] Values: [50]
[00:43:53.455] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:53.456] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:43:55.443] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:55.443] Server  LOG     [DB] Values: [50]
[00:43:55.445] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:55.446] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:43:57.448] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:57.449] Server  LOG     [DB] Values: [50]
[00:43:57.450] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:57.450] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:43:58.450] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:43:59.455] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:43:59.456] Server  LOG     [DB] Values: [50]
[00:43:59.457] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:43:59.457] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:01.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:01.625] Server  LOG     [DB] Values: [50]
[00:44:01.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:01.626] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:03.615] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:44:03.620] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:03.620] Server  LOG     [DB] Values: [50]
[00:44:03.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:03.623] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:05.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:05.617] Server  LOG     [DB] Values: [50]
[00:44:05.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:05.619] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:07.619] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:07.619] Server  LOG     [DB] Values: [50]
[00:44:07.620] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:07.621] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:08.618] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:44:09.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:09.618] Server  LOG     [DB] Values: [50]
[00:44:09.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:09.619] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:11.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:11.617] Server  LOG     [DB] Values: [50]
[00:44:11.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:11.619] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:13.618] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:44:13.622] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:13.622] Server  LOG     [DB] Values: [50]
[00:44:13.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:13.626] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:15.609] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:15.610] Server  LOG     [DB] Values: [50]
[00:44:15.611] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:15.611] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:17.625] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:17.626] Server  LOG     [DB] Values: [50]
[00:44:17.627] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:17.627] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:18.620] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:44:19.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:19.622] Server  LOG     [DB] Values: [50]
[00:44:19.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:19.623] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:21.622] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:21.622] Server  LOG     [DB] Values: [50]
[00:44:21.623] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:21.624] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:23.617] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:44:23.621] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:23.621] Server  LOG     [DB] Values: [50]
[00:44:23.624] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:23.625] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:25.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:25.612] Server  LOG     [DB] Values: [50]
[00:44:25.613] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:25.614] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:27.615] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:27.616] Server  LOG     [DB] Values: [50]
[00:44:27.617] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:27.618] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:28.617] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:44:29.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:29.618] Server  LOG     [DB] Values: [50]
[00:44:29.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:29.619] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:31.699] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:31.699] Server  LOG     [DB] Values: [50]
[00:44:31.700] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:31.701] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:33.623] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:44:33.627] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:33.628] Server  LOG     [DB] Values: [50]
[00:44:33.631] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:33.631] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:35.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:35.624] Server  LOG     [DB] Values: [50]
[00:44:35.625] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:35.625] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:37.608] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:37.609] Server  LOG     [DB] Values: [50]
[00:44:37.610] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:37.610] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:38.618] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:44:39.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:39.616] Server  LOG     [DB] Values: [50]
[00:44:39.617] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:39.618] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:41.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:41.624] Server  LOG     [DB] Values: [50]
[00:44:41.625] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:41.625] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:43.612] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:44:43.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:43.617] Server  LOG     [DB] Values: [50]
[00:44:43.620] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:43.621] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:45.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:45.624] Server  LOG     [DB] Values: [50]
[00:44:45.625] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:45.626] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:47.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:47.618] Server  LOG     [DB] Values: [50]
[00:44:47.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:47.620] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:48.610] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:44:49.609] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:49.610] Server  LOG     [DB] Values: [50]
[00:44:49.611] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:49.612] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:51.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:51.617] Server  LOG     [DB] Values: [50]
[00:44:51.618] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:51.619] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:53.620] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:44:53.624] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:53.624] Server  LOG     [DB] Values: [50]
[00:44:53.629] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:53.629] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:55.610] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:55.610] Server  LOG     [DB] Values: [50]
[00:44:55.611] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:55.612] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:57.625] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:57.625] Server  LOG     [DB] Values: [50]
[00:44:57.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:57.627] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:44:58.616] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:44:59.622] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:44:59.623] Server  LOG     [DB] Values: [50]
[00:44:59.624] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:44:59.624] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:45:01.619] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:45:01.620] Server  LOG     [DB] Values: [50]
[00:45:01.621] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:45:01.621] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:45:03.615] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:45:03.619] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:45:03.620] Server  LOG     [DB] Values: [50]
[00:45:03.624] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:45:03.624] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:45:05.614] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:45:05.614] Server  LOG     [DB] Values: [50]
[00:45:05.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:45:05.616] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:45:07.613] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:45:07.614] Server  LOG     [DB] Values: [50]
[00:45:07.615] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:45:07.616] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:45:08.618] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:45:09.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:45:09.616] Server  LOG     [DB] Values: [50]
[00:45:09.617] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:45:09.618] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:45:11.615] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:45:11.616] Server  LOG     [DB] Values: [50]
[00:45:11.617] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:45:11.617] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:45:13.611] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:45:13.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:45:13.616] Server  LOG     [DB] Values: [50]
[00:45:13.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:45:13.620] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:45:15.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:45:15.611] Server  LOG     [DB] Values: [50]
[00:45:15.612] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:45:15.613] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:45:17.617] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:45:17.617] Server  LOG     [DB] Values: [50]
[00:45:17.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:45:17.619] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:45:18.620] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:45:19.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:45:19.623] Server  LOG     [DB] Values: [50]
[00:45:19.624] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:45:19.625] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:45:21.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:45:21.618] Server  LOG     [DB] Values: [50]
[00:45:21.619] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:45:21.619] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:45:23.626] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:45:23.630] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:45:23.631] Server  LOG     [DB] Values: [50]
[00:45:23.634] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:45:23.635] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:45:25.443] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:45:25.443] Server  LOG     [DB] Values: [50]
[00:45:25.444] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:45:25.444] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:45:26.831] Server  LOG     [DB] Query: INSERT INTO activity_logs (user_id, action, action_type, entity_type, entity_id, details) VALUES (?, 'Logged out', 'logout', 'User', ?, ?)
[00:45:26.831] Server  LOG     [DB] Values: [1,1,"{\"message\":\"User logged out\"}"]
[00:45:28.209] Browser INFO    %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[00:45:28.314] Browser LOG     %c[Vercel Web Analytics]%c Debug mode is enabled by default in development. No requests will be sent to the server. color: rgb(120, 120, 120) color: inherit
[00:45:28.314] Browser LOG     %c[Vercel Web Analytics]%c Running queued event color: rgb(120, 120, 120) color: inherit pageview {"path":"/","route":"/"}
[00:45:28.314] Browser LOG     %c[Vercel Web Analytics]%c [pageview] http://localhost:3000/ color: rgb(120, 120, 120) color: inherit {"dp":"/","o":"http://localhost:3000/","sdkn":"@vercel/analytics/next","sdkv":"1.5.0","sv":"0.1.3","ts":1767354901849}
[00:45:28.446] Browser INFO    %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[00:45:28.576] Browser LOG     %c[Vercel Web Analytics]%c Debug mode is enabled by default in development. No requests will be sent to the server. color: rgb(120, 120, 120) color: inherit
[00:45:28.576] Browser LOG     %c[Vercel Web Analytics]%c Running queued event color: rgb(120, 120, 120) color: inherit pageview {"path":"/","route":"/"}
[00:45:28.576] Browser LOG     %c[Vercel Web Analytics]%c [pageview] http://localhost:3000/ color: rgb(120, 120, 120) color: inherit {"dp":"/","o":"http://localhost:3000/","sdkn":"@vercel/analytics/next","sdkv":"1.5.0","sv":"0.1.3","ts":1767354902083}
[00:45:28.790] Browser INFO    %cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold
[00:45:28.916] Browser LOG     %c[Vercel Web Analytics]%c Debug mode is enabled by default in development. No requests will be sent to the server. color: rgb(120, 120, 120) color: inherit
[00:45:28.916] Browser LOG     %c[Vercel Web Analytics]%c Running queued event color: rgb(120, 120, 120) color: inherit pageview {"path":"/","route":"/"}
[00:45:28.916] Browser LOG     %c[Vercel Web Analytics]%c [pageview] http://localhost:3000/ color: rgb(120, 120, 120) color: inherit {"dp":"/","o":"http://localhost:3000/","sdkn":"@vercel/analytics/next","sdkv":"1.5.0","sv":"0.1.3","ts":1767354902422}
[00:45:42.293] Server  LOG     [DB] Query: SELECT id, email, name, role, is_active FROM users WHERE email = ?
[00:45:42.293] Server  LOG     [DB] Values: ["manager@sodalicious.com"]
[00:45:42.294] Server  LOG     [DB] Query: INSERT INTO activity_logs (user_id, action, action_type, entity_type, entity_id, details) VALUES (?, 'Logged in', 'login', 'User', ?, 'User logged into the system')
[00:45:42.294] Server  LOG     [DB] Values: [2,2]
[00:45:42.378] Server  ERROR   [DB ERROR] Query failed: Error: CONSTRAINT `activity_logs.details` failed for `sodalicious_db`.`activity_logs`
[00:45:42.489] Server  ERROR   Failed to log login activity Error: CONSTRAINT `activity_logs.details` failed for `sodalicious_db`.`activity_logs`
[00:45:42.586] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:45:42.592] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:45:42.599] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:45:42.610] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:45:42.637] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:45:42.638] Server  LOG     [DB] Values: [50]
[00:45:42.644] Server  LOG     [DB] Query: SELECT id, name, email as username, role, is_active FROM users ORDER BY id ASC
[00:45:42.667] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:45:42.687] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:45:42.713] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:45:42.720] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:45:42.737] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:45:42.743] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:45:42.811] Server  LOG     [DB] Query: SELECT id, name, email as username, role, is_active FROM users ORDER BY id ASC
[00:45:42.846] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:45:42.849] Server  LOG     [DB] Values: [50]
[00:45:42.883] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:45:42.890] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:45:42.892] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:45:42.893] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:45:44.536] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:45:44.540] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:45:44.541] Server  LOG     [DB] Values: [50]
[00:45:44.544] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:45:44.544] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:45:45.289] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:45:45.297] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:45:46.543] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:45:46.547] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:45:46.547] Server  LOG     [DB] Values: [50]
[00:45:46.549] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:45:46.550] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:45:47.538] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:45:48.536] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:45:48.537] Server  LOG     [DB] Values: [50]
[00:45:48.540] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:45:48.541] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:45:48.541] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:45:50.289] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:45:50.535] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:45:50.536] Server  LOG     [DB] Values: [50]
[00:45:50.539] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:45:50.540] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:45:50.540] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:45:52.541] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:45:52.541] Server  LOG     [DB] Values: [50]
[00:45:52.545] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:45:52.548] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:45:52.550] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:45:52.551] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:45:54.554] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:45:54.554] Server  LOG     [DB] Values: [50]
[00:45:54.560] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:45:54.564] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:45:54.564] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:45:55.292] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:45:55.535] Server  LOG     [Inventory API] Incoming adjustment request
[00:45:55.537] Server  LOG     [DB] Query: SELECT id, name, stock_quantity FROM ingredients WHERE id = ? OR name = ? LIMIT 1
[00:45:55.537] Server  LOG     [DB] Values: [19,"19"]
[00:45:55.538] Server  LOG     [DB] Query: SELECT id FROM users WHERE id = ? LIMIT 1
[00:45:55.539] Server  LOG     [DB] Values: [1]
[00:45:55.539] Server  LOG     [Inventory API] Updating Blueberry Muffin: 170 -> -1385
[00:45:55.540] Server  LOG     [DB] Query: UPDATE ingredients SET stock_quantity = ? WHERE id = ?
[00:45:55.540] Server  LOG     [DB] Values: [-1385,19]
[00:45:55.541] Server  LOG     [DB] Query: INSERT INTO inventory_logs (ingredient_id, user_id, log_type, quantity_changed, reason) VALUES (?, ?, ?, ?, ?)
[00:45:55.541] Server  LOG     [DB] Values: [19,1,"damage",-1555,"Manual Adjustment"]
[00:45:55.543] Server  LOG     [Inventory API] ✓ Stock updated and logged.
[00:45:55.551] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:45:55.555] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:45:56.542] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:45:56.543] Server  LOG     [DB] Values: [50]
[00:45:56.546] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:45:56.547] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:45:56.548] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:45:57.542] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:45:58.490] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:45:58.495] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:45:58.500] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:45:58.519] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:45:58.536] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:45:58.540] Server  LOG     [DB] Values: [50]
[00:45:58.545] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:45:58.546] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:45:58.547] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:46:00.543] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:46:00.544] Server  LOG     [DB] Values: [50]
[00:46:00.548] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:00.548] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:46:00.549] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:46:01.946] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:46:01.966] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:46:01.977] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:46:02.032] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:46:02.083] Server  LOG      ✓ Compiled in 323ms
[00:46:02.542] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:02.547] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:46:02.552] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:46:02.552] Server  LOG     [DB] Values: [50]
[00:46:02.563] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:46:02.564] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:46:02.616] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:46:02.633] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:46:04.533] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:46:04.534] Server  LOG     [DB] Values: [50]
[00:46:04.535] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:46:04.535] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:46:04.552] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:06.543] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:46:06.543] Server  LOG     [DB] Values: [50]
[00:46:06.547] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:06.547] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:46:06.548] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:46:07.543] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:46:07.615] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:46:08.534] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:46:08.535] Server  LOG     [DB] Values: [50]
[00:46:08.539] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:08.540] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:46:08.541] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:46:09.626] Server  LOG      ✓ Compiled in 118ms
[00:46:10.317] Server  LOG     [Inventory API] Incoming adjustment request
[00:46:10.318] Server  LOG     [DB] Query: SELECT id, name, stock_quantity FROM ingredients WHERE id = ? OR name = ? LIMIT 1
[00:46:10.318] Server  LOG     [DB] Values: [19,"19"]
[00:46:10.319] Server  LOG     [DB] Query: SELECT id FROM users WHERE id = ? LIMIT 1
[00:46:10.319] Server  LOG     [DB] Values: [1]
[00:46:10.320] Server  LOG     [Inventory API] Updating Blueberry Muffin: -1385 -> -1185
[00:46:10.321] Server  LOG     [DB] Query: UPDATE ingredients SET stock_quantity = ? WHERE id = ?
[00:46:10.321] Server  LOG     [DB] Values: [-1185,19]
[00:46:10.323] Server  LOG     [DB] Query: INSERT INTO inventory_logs (ingredient_id, user_id, log_type, quantity_changed, reason) VALUES (?, ?, ?, ?, ?)
[00:46:10.323] Server  LOG     [DB] Values: [19,1,"restock",200,"Manual Adjustment"]
[00:46:10.324] Server  LOG     [Inventory API] ✓ Stock updated and logged.
[00:46:10.332] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:10.336] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:46:10.536] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:46:10.537] Server  LOG     [DB] Values: [50]
[00:46:10.541] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:10.541] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:46:10.542] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:46:12.534] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:46:12.535] Server  LOG     [DB] Values: [50]
[00:46:12.538] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:12.539] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:46:12.540] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:46:12.552] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:46:12.616] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:46:14.533] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:46:14.533] Server  LOG     [DB] Values: [50]
[00:46:14.534] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:46:14.535] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:46:14.550] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:16.296] Server  LOG      ✓ Compiled in 106ms
[00:46:16.478] Server  LOG     [Inventory API] Incoming adjustment request
[00:46:16.479] Server  LOG     [DB] Query: SELECT id, name, stock_quantity FROM ingredients WHERE id = ? OR name = ? LIMIT 1
[00:46:16.480] Server  LOG     [DB] Values: [19,"19"]
[00:46:16.481] Server  LOG     [DB] Query: SELECT id FROM users WHERE id = ? LIMIT 1
[00:46:16.481] Server  LOG     [DB] Values: [1]
[00:46:16.482] Server  LOG     [Inventory API] Updating Blueberry Muffin: -1185 -> 815
[00:46:16.483] Server  LOG     [DB] Query: UPDATE ingredients SET stock_quantity = ? WHERE id = ?
[00:46:16.483] Server  LOG     [DB] Values: [815,19]
[00:46:16.484] Server  LOG     [DB] Query: INSERT INTO inventory_logs (ingredient_id, user_id, log_type, quantity_changed, reason) VALUES (?, ?, ?, ?, ?)
[00:46:16.485] Server  LOG     [DB] Values: [19,1,"restock",2000,"Manual Adjustment"]
[00:46:16.486] Server  LOG     [Inventory API] ✓ Stock updated and logged.
[00:46:16.496] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:16.503] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:46:16.556] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:16.561] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:46:16.562] Server  LOG     [DB] Values: [50]
[00:46:16.564] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:46:16.564] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:46:17.552] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:46:17.620] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:46:18.534] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:46:18.535] Server  LOG     [DB] Values: [50]
[00:46:18.539] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:18.539] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:46:18.540] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:46:19.793] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:46:19.798] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:46:19.896] Server  LOG     [DB] Query: SELECT COUNT(*) AS totalOrders, COALESCE(SUM(total_amount), 0) AS totalSales FROM orders o WHERE DATE(o.created_at) = DATE(NOW())
[00:46:19.899] Server  LOG     [DB] Query: SELECT p.id, p.name, SUM(oi.quantity) AS qty_sold, COALESCE(SUM(oi.subtotal),0) AS revenue FROM order_items oi JOIN products p ON oi.product_id = p.id JOIN orders o ON oi.order_id = o.id WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY p.id, p.name ORDER BY qty_sold DESC LIMIT 10
[00:46:19.901] Server  LOG     [DB] Query: SELECT DATE(o.created_at) AS date, COUNT(*) AS orders_count, COALESCE(SUM(o.total_amount),0) AS total_sales FROM orders o WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY DATE(o.created_at) ORDER BY DATE(o.created_at) ASC
[00:46:19.914] Server  LOG     [DB] Query: SELECT COUNT(*) AS totalOrders, COALESCE(SUM(total_amount), 0) AS totalSales FROM orders o WHERE DATE(o.created_at) = DATE(NOW())
[00:46:19.920] Server  LOG     [DB] Query: SELECT p.id, p.name, SUM(oi.quantity) AS qty_sold, COALESCE(SUM(oi.subtotal),0) AS revenue FROM order_items oi JOIN products p ON oi.product_id = p.id JOIN orders o ON oi.order_id = o.id WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY p.id, p.name ORDER BY qty_sold DESC LIMIT 10
[00:46:19.923] Server  LOG     [DB] Query: SELECT DATE(o.created_at) AS date, COUNT(*) AS orders_count, COALESCE(SUM(o.total_amount),0) AS total_sales FROM orders o WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY DATE(o.created_at) ORDER BY DATE(o.created_at) ASC
[00:46:20.543] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:20.548] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:46:20.548] Server  LOG     [DB] Values: [50]
[00:46:20.551] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:46:20.552] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:46:22.547] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:46:22.548] Server  LOG     [DB] Values: [50]
[00:46:22.551] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:22.555] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:46:22.556] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:46:22.556] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:46:23.675] Server  LOG     [DB] Query: SELECT COUNT(*) AS totalOrders, COALESCE(SUM(total_amount), 0) AS totalSales FROM orders o WHERE DATE(o.created_at) = DATE(NOW())
[00:46:23.676] Server  LOG     [DB] Query: SELECT p.id, p.name, SUM(oi.quantity) AS qty_sold, COALESCE(SUM(oi.subtotal),0) AS revenue FROM order_items oi JOIN products p ON oi.product_id = p.id JOIN orders o ON oi.order_id = o.id WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY p.id, p.name ORDER BY qty_sold DESC LIMIT 10
[00:46:23.677] Server  LOG     [DB] Query: SELECT DATE(o.created_at) AS date, COUNT(*) AS orders_count, COALESCE(SUM(o.total_amount),0) AS total_sales FROM orders o WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY DATE(o.created_at) ORDER BY DATE(o.created_at) ASC
[00:46:24.539] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:46:24.540] Server  LOG     [DB] Values: [50]
[00:46:24.543] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:24.544] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:46:24.544] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:46:24.793] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:46:24.797] Server  LOG     [DB] Query: SELECT COUNT(*) AS totalOrders, COALESCE(SUM(total_amount), 0) AS totalSales FROM orders o WHERE DATE(o.created_at) = DATE(NOW())
[00:46:24.800] Server  LOG     [DB] Query: SELECT p.id, p.name, SUM(oi.quantity) AS qty_sold, COALESCE(SUM(oi.subtotal),0) AS revenue FROM order_items oi JOIN products p ON oi.product_id = p.id JOIN orders o ON oi.order_id = o.id WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY p.id, p.name ORDER BY qty_sold DESC LIMIT 10
[00:46:24.802] Server  LOG     [DB] Query: SELECT DATE(o.created_at) AS date, COUNT(*) AS orders_count, COALESCE(SUM(o.total_amount),0) AS total_sales FROM orders o WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY DATE(o.created_at) ORDER BY DATE(o.created_at) ASC
[00:46:26.535] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:46:26.536] Server  LOG     [DB] Values: [50]
[00:46:26.540] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:26.541] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:46:26.541] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:46:27.544] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:46:28.534] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:46:28.535] Server  LOG     [DB] Values: [50]
[00:46:28.539] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:28.541] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:46:28.541] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:46:29.323] Server  LOG     [DB] Query: SELECT COUNT(*) AS totalOrders, COALESCE(SUM(total_amount), 0) AS totalSales FROM orders o WHERE 1=1
[00:46:29.324] Server  LOG     [DB] Query: SELECT p.id, p.name, SUM(oi.quantity) AS qty_sold, COALESCE(SUM(oi.subtotal),0) AS revenue FROM order_items oi JOIN products p ON oi.product_id = p.id JOIN orders o ON oi.order_id = o.id WHERE 1=1 GROUP BY p.id, p.name ORDER BY qty_sold DESC LIMIT 10
[00:46:29.326] Server  LOG     [DB] Query: SELECT DATE(o.created_at) AS date, COUNT(*) AS orders_count, COALESCE(SUM(o.total_amount),0) AS total_sales FROM orders o WHERE 1=1 GROUP BY DATE(o.created_at) ORDER BY DATE(o.created_at) ASC
[00:46:29.794] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:46:29.958] Server  LOG     [DB] Query: SELECT COUNT(*) AS totalOrders, COALESCE(SUM(total_amount), 0) AS totalSales FROM orders o WHERE o.created_at >= DATE_SUB(NOW(), INTERVAL 30 DAY)
[00:46:29.960] Server  LOG     [DB] Query: SELECT p.id, p.name, SUM(oi.quantity) AS qty_sold, COALESCE(SUM(oi.subtotal),0) AS revenue FROM order_items oi JOIN products p ON oi.product_id = p.id JOIN orders o ON oi.order_id = o.id WHERE o.created_at >= DATE_SUB(NOW(), INTERVAL 30 DAY) GROUP BY p.id, p.name ORDER BY qty_sold DESC LIMIT 10
[00:46:29.961] Server  LOG     [DB] Query: SELECT DATE(o.created_at) AS date, COUNT(*) AS orders_count, COALESCE(SUM(o.total_amount),0) AS total_sales FROM orders o WHERE o.created_at >= DATE_SUB(NOW(), INTERVAL 30 DAY) GROUP BY DATE(o.created_at) ORDER BY DATE(o.created_at) ASC
[00:46:30.535] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:46:30.536] Server  LOG     [DB] Values: [50]
[00:46:30.537] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:46:30.538] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:46:30.546] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:31.409] Server  LOG     [DB] Query: SELECT COUNT(*) AS totalOrders, COALESCE(SUM(total_amount), 0) AS totalSales FROM orders o WHERE o.created_at >= DATE_SUB(NOW(), INTERVAL 7 DAY)
[00:46:31.410] Server  LOG     [DB] Query: SELECT p.id, p.name, SUM(oi.quantity) AS qty_sold, COALESCE(SUM(oi.subtotal),0) AS revenue FROM order_items oi JOIN products p ON oi.product_id = p.id JOIN orders o ON oi.order_id = o.id WHERE o.created_at >= DATE_SUB(NOW(), INTERVAL 7 DAY) GROUP BY p.id, p.name ORDER BY qty_sold DESC LIMIT 10
[00:46:31.411] Server  LOG     [DB] Query: SELECT DATE(o.created_at) AS date, COUNT(*) AS orders_count, COALESCE(SUM(o.total_amount),0) AS total_sales FROM orders o WHERE o.created_at >= DATE_SUB(NOW(), INTERVAL 7 DAY) GROUP BY DATE(o.created_at) ORDER BY DATE(o.created_at) ASC
[00:46:32.352] Server  LOG     [DB] Query: SELECT COUNT(*) AS totalOrders, COALESCE(SUM(total_amount), 0) AS totalSales FROM orders o WHERE DATE(o.created_at) = DATE(NOW())
[00:46:32.353] Server  LOG     [DB] Query: SELECT p.id, p.name, SUM(oi.quantity) AS qty_sold, COALESCE(SUM(oi.subtotal),0) AS revenue FROM order_items oi JOIN products p ON oi.product_id = p.id JOIN orders o ON oi.order_id = o.id WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY p.id, p.name ORDER BY qty_sold DESC LIMIT 10
[00:46:32.354] Server  LOG     [DB] Query: SELECT DATE(o.created_at) AS date, COUNT(*) AS orders_count, COALESCE(SUM(o.total_amount),0) AS total_sales FROM orders o WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY DATE(o.created_at) ORDER BY DATE(o.created_at) ASC
[00:46:32.539] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:46:32.540] Server  LOG     [DB] Values: [50]
[00:46:32.544] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:32.547] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:46:32.549] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:46:32.550] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:46:34.535] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:46:34.535] Server  LOG     [DB] Values: [50]
[00:46:34.539] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:34.540] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:46:34.541] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:46:34.794] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:46:36.536] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:46:36.537] Server  LOG     [DB] Values: [50]
[00:46:36.541] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:36.542] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:46:36.542] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:46:37.354] Server  LOG     [DB] Query: SELECT COUNT(*) AS totalOrders, COALESCE(SUM(total_amount), 0) AS totalSales FROM orders o WHERE DATE(o.created_at) = DATE(NOW())
[00:46:37.356] Server  LOG     [DB] Query: SELECT p.id, p.name, SUM(oi.quantity) AS qty_sold, COALESCE(SUM(oi.subtotal),0) AS revenue FROM order_items oi JOIN products p ON oi.product_id = p.id JOIN orders o ON oi.order_id = o.id WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY p.id, p.name ORDER BY qty_sold DESC LIMIT 10
[00:46:37.358] Server  LOG     [DB] Query: SELECT DATE(o.created_at) AS date, COUNT(*) AS orders_count, COALESCE(SUM(o.total_amount),0) AS total_sales FROM orders o WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY DATE(o.created_at) ORDER BY DATE(o.created_at) ASC
[00:46:37.540] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:46:38.537] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:46:38.538] Server  LOG     [DB] Values: [50]
[00:46:38.544] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:38.545] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:46:38.546] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:46:39.794] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:46:40.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:46:40.611] Server  LOG     [DB] Values: [50]
[00:46:40.615] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:40.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:46:40.617] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:46:42.621] Server  LOG     [DB] Query: SELECT COUNT(*) AS totalOrders, COALESCE(SUM(total_amount), 0) AS totalSales FROM orders o WHERE DATE(o.created_at) = DATE(NOW())
[00:46:42.625] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:46:42.625] Server  LOG     [DB] Values: [50]
[00:46:42.629] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:42.634] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:46:42.635] Server  LOG     [DB] Query: SELECT p.id, p.name, SUM(oi.quantity) AS qty_sold, COALESCE(SUM(oi.subtotal),0) AS revenue FROM order_items oi JOIN products p ON oi.product_id = p.id JOIN orders o ON oi.order_id = o.id WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY p.id, p.name ORDER BY qty_sold DESC LIMIT 10
[00:46:42.637] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:46:42.637] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:46:42.641] Server  LOG     [DB] Query: SELECT DATE(o.created_at) AS date, COUNT(*) AS orders_count, COALESCE(SUM(o.total_amount),0) AS total_sales FROM orders o WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY DATE(o.created_at) ORDER BY DATE(o.created_at) ASC
[00:46:44.533] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:46:44.533] Server  LOG     [DB] Values: [50]
[00:46:44.535] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:46:44.535] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:46:44.544] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:46:44.795] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:46:44.971] Server  LOG     [DB] Query: INSERT INTO activity_logs (user_id, action, action_type, entity_type, entity_id, details) VALUES (?, 'Logged out', 'logout', 'User', ?, ?)
[00:46:44.972] Server  LOG     [DB] Values: [2,2,"{\"message\":\"User logged out\"}"]
[00:47:34.850] Server  LOG     [DB] Query: SELECT id, email, name, role, is_active FROM users WHERE email = ?
[00:47:34.851] Server  LOG     [DB] Values: ["manager@sodalicious.com"]
[00:47:34.852] Server  LOG     [DB] Query: INSERT INTO activity_logs (user_id, action, action_type, entity_type, entity_id, details) VALUES (?, 'Logged in', 'login', 'User', ?, 'User logged into the system')
[00:47:34.852] Server  LOG     [DB] Values: [2,2]
[00:47:34.948] Server  ERROR   [DB ERROR] Query failed: Error: CONSTRAINT `activity_logs.details` failed for `sodalicious_db`.`activity_logs`
[00:47:35.016] Server  ERROR   Failed to log login activity Error: CONSTRAINT `activity_logs.details` failed for `sodalicious_db`.`activity_logs`
[00:47:35.094] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:47:35.098] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:47:35.101] Server  LOG     [DB] Query: SELECT id, name, email as username, role, is_active FROM users ORDER BY id ASC
[00:47:35.105] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:47:35.109] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:47:35.114] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:47:35.114] Server  LOG     [DB] Values: [50]
[00:47:35.131] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:47:35.131] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:47:35.142] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:47:35.147] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:47:35.152] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:47:35.157] Server  LOG     [DB] Query: SELECT id, name, email as username, role, is_active FROM users ORDER BY id ASC
[00:47:35.172] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:47:35.176] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:47:35.177] Server  LOG     [DB] Values: [50]
[00:47:35.181] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:47:35.182] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:47:35.187] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:47:35.191] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:47:37.065] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:47:37.066] Server  LOG     [DB] Values: [50]
[00:47:37.067] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:47:37.068] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:47:37.075] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:47:37.320] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:47:37.324] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:47:37.334] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:47:37.338] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:47:38.455] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:47:38.464] Server  LOG     [DB] Query: SELECT id, name, unit, stock_quantity, reorder_level, CASE WHEN stock_quantity < 18 THEN 'LOW' WHEN stock_quantity <= 50 THEN 'MEDIUM' ELSE 'OK' END as stock_status FROM ingredients ORDER BY name ASC
[00:47:39.067] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:47:39.067] Server  LOG     [DB] Values: [50]
[00:47:39.071] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:47:39.072] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:47:39.072] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:47:40.067] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:47:40.809] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:47:40.814] Server  LOG     [DB] Query: SELECT COUNT(*) AS totalOrders, COALESCE(SUM(total_amount), 0) AS totalSales FROM orders o WHERE DATE(o.created_at) = DATE(NOW())
[00:47:40.820] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:47:40.824] Server  LOG     [DB] Query: SELECT p.id, p.name, SUM(oi.quantity) AS qty_sold, COALESCE(SUM(oi.subtotal),0) AS revenue FROM order_items oi JOIN products p ON oi.product_id = p.id JOIN orders o ON oi.order_id = o.id WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY p.id, p.name ORDER BY qty_sold DESC LIMIT 10
[00:47:40.829] Server  LOG     [DB] Query: SELECT DATE(o.created_at) AS date, COUNT(*) AS orders_count, COALESCE(SUM(o.total_amount),0) AS total_sales FROM orders o WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY DATE(o.created_at) ORDER BY DATE(o.created_at) ASC
[00:47:40.837] Server  LOG     [DB] Query: SELECT COUNT(*) AS totalOrders, COALESCE(SUM(total_amount), 0) AS totalSales FROM orders o WHERE DATE(o.created_at) = DATE(NOW())
[00:47:40.838] Server  LOG     [DB] Query: SELECT p.id, p.name, SUM(oi.quantity) AS qty_sold, COALESCE(SUM(oi.subtotal),0) AS revenue FROM order_items oi JOIN products p ON oi.product_id = p.id JOIN orders o ON oi.order_id = o.id WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY p.id, p.name ORDER BY qty_sold DESC LIMIT 10
[00:47:40.843] Server  LOG     [DB] Query: SELECT DATE(o.created_at) AS date, COUNT(*) AS orders_count, COALESCE(SUM(o.total_amount),0) AS total_sales FROM orders o WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY DATE(o.created_at) ORDER BY DATE(o.created_at) ASC
[00:47:41.075] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:47:41.075] Server  LOG     [DB] Values: [50]
[00:47:41.079] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:47:41.080] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:47:41.081] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:47:43.069] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:47:43.069] Server  LOG     [DB] Values: [50]
[00:47:43.073] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:47:43.073] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:47:43.074] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:47:45.069] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:47:45.069] Server  LOG     [DB] Values: [50]
[00:47:45.072] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:47:45.076] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:47:45.077] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:47:45.077] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:47:45.816] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:47:45.820] Server  LOG     [DB] Query: SELECT COUNT(*) AS totalOrders, COALESCE(SUM(total_amount), 0) AS totalSales FROM orders o WHERE DATE(o.created_at) = DATE(NOW())
[00:47:45.823] Server  LOG     [DB] Query: SELECT p.id, p.name, SUM(oi.quantity) AS qty_sold, COALESCE(SUM(oi.subtotal),0) AS revenue FROM order_items oi JOIN products p ON oi.product_id = p.id JOIN orders o ON oi.order_id = o.id WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY p.id, p.name ORDER BY qty_sold DESC LIMIT 10
[00:47:45.825] Server  LOG     [DB] Query: SELECT DATE(o.created_at) AS date, COUNT(*) AS orders_count, COALESCE(SUM(o.total_amount),0) AS total_sales FROM orders o WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY DATE(o.created_at) ORDER BY DATE(o.created_at) ASC
[00:47:47.067] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:47:47.068] Server  LOG     [DB] Values: [50]
[00:47:47.071] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:47:47.072] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:47:47.072] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:47:49.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:47:49.617] Server  LOG     [DB] Values: [50]
[00:47:49.618] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:47:49.618] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:47:49.624] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:47:50.612] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:47:51.626] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:47:51.630] Server  LOG     [DB] Query: SELECT COUNT(*) AS totalOrders, COALESCE(SUM(total_amount), 0) AS totalSales FROM orders o WHERE DATE(o.created_at) = DATE(NOW())
[00:47:51.636] Server  LOG     [DB] Query: SELECT p.id, p.name, SUM(oi.quantity) AS qty_sold, COALESCE(SUM(oi.subtotal),0) AS revenue FROM order_items oi JOIN products p ON oi.product_id = p.id JOIN orders o ON oi.order_id = o.id WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY p.id, p.name ORDER BY qty_sold DESC LIMIT 10
[00:47:51.640] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:47:51.641] Server  LOG     [DB] Values: [50]
[00:47:51.642] Server  LOG     [DB] Query: SELECT DATE(o.created_at) AS date, COUNT(*) AS orders_count, COALESCE(SUM(o.total_amount),0) AS total_sales FROM orders o WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY DATE(o.created_at) ORDER BY DATE(o.created_at) ASC
[00:47:51.645] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:47:51.645] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:47:51.651] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:47:53.625] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:47:53.625] Server  LOG     [DB] Values: [50]
[00:47:53.626] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:47:53.627] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:47:53.633] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:47:55.612] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:47:55.613] Server  LOG     [DB] Values: [50]
[00:47:55.616] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:47:55.619] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:47:55.620] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:47:55.621] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:47:56.624] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:47:56.628] Server  LOG     [DB] Query: SELECT COUNT(*) AS totalOrders, COALESCE(SUM(total_amount), 0) AS totalSales FROM orders o WHERE DATE(o.created_at) = DATE(NOW())
[00:47:56.632] Server  LOG     [DB] Query: SELECT p.id, p.name, SUM(oi.quantity) AS qty_sold, COALESCE(SUM(oi.subtotal),0) AS revenue FROM order_items oi JOIN products p ON oi.product_id = p.id JOIN orders o ON oi.order_id = o.id WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY p.id, p.name ORDER BY qty_sold DESC LIMIT 10
[00:47:56.633] Server  LOG     [DB] Query: SELECT DATE(o.created_at) AS date, COUNT(*) AS orders_count, COALESCE(SUM(o.total_amount),0) AS total_sales FROM orders o WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY DATE(o.created_at) ORDER BY DATE(o.created_at) ASC
[00:47:57.616] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:47:57.616] Server  LOG     [DB] Values: [50]
[00:47:57.620] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:47:57.620] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:47:57.621] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:47:59.623] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:47:59.623] Server  LOG     [DB] Values: [50]
[00:47:59.627] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:47:59.628] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:47:59.628] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:48:00.618] Server  LOG     [DB] Query: SELECT al.*, u.name as user_name FROM activity_logs al LEFT JOIN users u ON al.user_id = u.id ORDER BY al.created_at DESC LIMIT 50
[00:48:01.613] Server  LOG     [DB] Query: SELECT p.id, p.name, p.category, p.price, p.description, p.is_active, p.created_at, p.updated_at, p.stock_quantity, COALESCE( ( SELECT i2.name FROM product_ingredients pi2 JOIN ingredients i2 ON pi2.ingredient_id = i2.id WHERE pi2.product_id = p.id ORDER BY (i2.stock_quantity / pi2.amount) ASC LIMIT 1 ), 'Recipe Missing' ) as bottleneck_ingredient, ( SELECT GROUP_CONCAT(CONCAT(i3.name, ' (', pi3.amount, i3.unit, ')') SEPARATOR ', ') FROM product_ingredients pi3 JOIN ingredients i3 ON pi3.ingredient_id = i3.id WHERE pi3.product_id = p.id ) as ingredients_list FROM products p LEFT JOIN product_ingredients pi ON p.id = pi.product_id LEFT JOIN ingredients i ON pi.ingredient_id = i.id WHERE p.is_active = true GROUP BY p.id ORDER BY p.name
[00:48:01.621] Server  LOG     [DB] Query: SELECT COUNT(*) AS totalOrders, COALESCE(SUM(total_amount), 0) AS totalSales FROM orders o WHERE DATE(o.created_at) = DATE(NOW())
[00:48:01.626] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:48:01.626] Server  LOG     [DB] Values: [50]
[00:48:01.633] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:48:01.634] Server  LOG     [DB] Query: SELECT p.id, p.name, SUM(oi.quantity) AS qty_sold, COALESCE(SUM(oi.subtotal),0) AS revenue FROM order_items oi JOIN products p ON oi.product_id = p.id JOIN orders o ON oi.order_id = o.id WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY p.id, p.name ORDER BY qty_sold DESC LIMIT 10
[00:48:01.635] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:48:01.636] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
[00:48:01.638] Server  LOG     [DB] Query: SELECT DATE(o.created_at) AS date, COUNT(*) AS orders_count, COALESCE(SUM(o.total_amount),0) AS total_sales FROM orders o WHERE DATE(o.created_at) = DATE(NOW()) GROUP BY DATE(o.created_at) ORDER BY DATE(o.created_at) ASC
[00:48:03.611] Server  LOG     [DB] Query: SELECT o.*, u.name as cashier_name FROM orders o LEFT JOIN users u ON o.cashier_id = u.id ORDER BY o.created_at DESC LIMIT ?
[00:48:03.612] Server  LOG     [DB] Values: [50]
[00:48:03.615] Server  LOG     [DB] Query: SELECT il.*, i.name as ingredient_name, u.name as user_name FROM inventory_logs il LEFT JOIN ingredients i ON il.ingredient_id = i.id LEFT JOIN users u ON il.user_id = u.id ORDER BY il.created_at DESC LIMIT 100
[00:48:03.616] Server  LOG     [DB] Query: SELECT oi.*, p.name FROM order_items oi LEFT JOIN products p ON oi.product_id = p.id WHERE oi.order_id IN (?)
[00:48:03.617] Server  LOG     [DB] Values: ["7,6,5,4,3,2,1"]
