{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/Downloads/sodalicious/lib/db.ts"],"sourcesContent":["import { neon } from \"@neondatabase/serverless\"\r\n\r\nconst connectionString = process.env.DATABASE_URL\r\n\r\nif (!connectionString) {\r\n  throw new Error(\"DATABASE_URL environment variable is not set\")\r\n}\r\n\r\nexport const sql = neon(connectionString)\r\n\r\n// Type definitions for database operations\r\nexport interface User {\r\n  id: number\r\n  email: string\r\n  name: string\r\n  role: \"cashier\" | \"manager\" | \"inventory_officer\"\r\n  is_active: boolean\r\n  created_at: string\r\n}\r\n\r\nexport interface Product {\r\n  id: number\r\n  name: string\r\n  category: string\r\n  price: number\r\n  description: string\r\n  stock_quantity: number\r\n  reorder_level: number\r\n  is_active: boolean\r\n}\r\n\r\nexport interface Order {\r\n  id: number\r\n  order_number: string\r\n  cashier_id: number\r\n  customer_name: string\r\n  total_amount: number\r\n  payment_method: string\r\n  order_status: string\r\n  created_at: string\r\n}\r\n\r\nexport interface OrderItem {\r\n  id: number\r\n  order_id: number\r\n  product_id: number\r\n  quantity: number\r\n  unit_price: number\r\n  subtotal: number\r\n}\r\n\r\nexport interface InventoryLog {\r\n  id: number\r\n  product_id: number\r\n  user_id: number\r\n  log_type: string\r\n  quantity_changed: number\r\n  reason: string\r\n  previous_quantity: number\r\n  new_quantity: number\r\n  created_at: string\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,mBAAmB,QAAQ,GAAG,CAAC,YAAY;AAEjD,IAAI,CAAC,kBAAkB;IACrB,MAAM,IAAI,MAAM;AAClB;AAEO,MAAM,MAAM,IAAA,gKAAI,EAAC","debugId":null}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/Downloads/sodalicious/app/api/auth/login/route.ts"],"sourcesContent":["import { sql } from \"@/lib/db\"\r\nimport { type NextRequest, NextResponse } from \"next/server\"\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const { email, password } = await request.json()\r\n\r\n    if (!email || !password) {\r\n      return NextResponse.json({ error: \"Email and password required\" }, { status: 400 })\r\n    }\r\n\r\n    try {\r\n      const result = await sql`\r\n        SELECT id, email, name, role, is_active FROM users \r\n        WHERE email = ${email} AND password_hash = crypt(${password}, password_hash)\r\n      `\r\n\r\n      if (result.length > 0) {\r\n        return NextResponse.json({\r\n          success: true,\r\n          user: result[0],\r\n          token: Buffer.from(email).toString(\"base64\"),\r\n        })\r\n      }\r\n    } catch (dbError) {\r\n      console.error(\"[v0] Database error:\", dbError)\r\n      // Fall through to demo credentials\r\n    }\r\n\r\n    // Demo credentials fallback - for development and testing\r\n    const demoUsers = [\r\n      { id: 1, email: \"cashier@sodalicious.com\", name: \"Cashier\", role: \"cashier\", is_active: true },\r\n      { id: 2, email: \"manager@sodalicious.com\", name: \"Manager\", role: \"manager\", is_active: true },\r\n      {\r\n        id: 3,\r\n        email: \"inventory@sodalicious.com\",\r\n        name: \"Inventory Officer\",\r\n        role: \"inventory_officer\",\r\n        is_active: true,\r\n      },\r\n    ]\r\n\r\n    const demoUser = demoUsers.find((u) => u.email === email)\r\n\r\n    if (demoUser && password === \"123456\") {\r\n      return NextResponse.json({\r\n        success: true,\r\n        user: demoUser,\r\n        token: Buffer.from(email).toString(\"base64\"),\r\n      })\r\n    }\r\n\r\n    return NextResponse.json({ error: \"Invalid email or password\" }, { status: 401 })\r\n  } catch (error) {\r\n    console.error(\"[v0] Login route error:\", error)\r\n    return NextResponse.json(\r\n      { error: \"Internal server error\", details: error instanceof Error ? error.message : \"Unknown error\" },\r\n      { status: 500 },\r\n    )\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,MAAM,QAAQ,IAAI;QAE9C,IAAI,CAAC,SAAS,CAAC,UAAU;YACvB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA8B,GAAG;gBAAE,QAAQ;YAAI;QACnF;QAEA,IAAI;YACF,MAAM,SAAS,MAAM,kHAAG,CAAC;;sBAET,EAAE,MAAM,2BAA2B,EAAE,SAAS;MAC9D,CAAC;YAED,IAAI,OAAO,MAAM,GAAG,GAAG;gBACrB,OAAO,gJAAY,CAAC,IAAI,CAAC;oBACvB,SAAS;oBACT,MAAM,MAAM,CAAC,EAAE;oBACf,OAAO,OAAO,IAAI,CAAC,OAAO,QAAQ,CAAC;gBACrC;YACF;QACF,EAAE,OAAO,SAAS;YAChB,QAAQ,KAAK,CAAC,wBAAwB;QACtC,mCAAmC;QACrC;QAEA,0DAA0D;QAC1D,MAAM,YAAY;YAChB;gBAAE,IAAI;gBAAG,OAAO;gBAA2B,MAAM;gBAAW,MAAM;gBAAW,WAAW;YAAK;YAC7F;gBAAE,IAAI;gBAAG,OAAO;gBAA2B,MAAM;gBAAW,MAAM;gBAAW,WAAW;YAAK;YAC7F;gBACE,IAAI;gBACJ,OAAO;gBACP,MAAM;gBACN,MAAM;gBACN,WAAW;YACb;SACD;QAED,MAAM,WAAW,UAAU,IAAI,CAAC,CAAC,IAAM,EAAE,KAAK,KAAK;QAEnD,IAAI,YAAY,aAAa,UAAU;YACrC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,MAAM;gBACN,OAAO,OAAO,IAAI,CAAC,OAAO,QAAQ,CAAC;YACrC;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA4B,GAAG;YAAE,QAAQ;QAAI;IACjF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;YAAyB,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAAgB,GACpG;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}