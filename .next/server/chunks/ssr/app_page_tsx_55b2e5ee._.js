module.exports=[60350,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d=[{id:"HC001",name:"Americano",category:"Hot Coffee",categoryCode:"HC",sizes:[{size:"S",price:45},{size:"M",price:55},{size:"L",price:65}],description:"Classic Italian espresso with hot water",stock:40,minThreshold:10},{id:"HC002",name:"CafÃ© Latte",category:"Hot Coffee",categoryCode:"HC",sizes:[{size:"S",price:55},{size:"M",price:65},{size:"L",price:75}],description:"Smooth espresso with steamed milk",stock:40,minThreshold:10},{id:"HC003",name:"Cappuccino",category:"Hot Coffee",categoryCode:"HC",sizes:[{size:"S",price:55},{size:"M",price:65},{size:"L",price:75}],description:"Espresso with equal parts milk and foam",stock:40,minThreshold:10},{id:"HC004",name:"Caramel Macchiato",category:"Hot Coffee",categoryCode:"HC",sizes:[{size:"S",price:60},{size:"M",price:70},{size:"L",price:80}],description:"Rich espresso with caramel and steamed milk",stock:40,minThreshold:8},{id:"HC005",name:"Mocha",category:"Hot Coffee",categoryCode:"HC",sizes:[{size:"S",price:60},{size:"M",price:70},{size:"L",price:80}],description:"Espresso, steamed milk, and chocolate",stock:40,minThreshold:8},{id:"IC001",name:"Iced Americano",category:"Iced Coffee",categoryCode:"IC",sizes:[{size:"R",price:55},{size:"L",price:65}],description:"Cold espresso with ice and water",stock:40,minThreshold:12},{id:"IC002",name:"Iced Latte",category:"Iced Coffee",categoryCode:"IC",sizes:[{size:"R",price:65},{size:"L",price:75}],description:"Smooth iced espresso with cold milk",stock:40,minThreshold:12},{id:"IC003",name:"Iced Caramel",category:"Iced Coffee",categoryCode:"IC",sizes:[{size:"R",price:70},{size:"L",price:80}],description:"Iced espresso with caramel and milk",stock:40,minThreshold:10},{id:"IC004",name:"Iced Vanilla Brew",category:"Iced Coffee",categoryCode:"IC",sizes:[{size:"R",price:65},{size:"L",price:75}],description:"Cold brew with vanilla essence",stock:40,minThreshold:12},{id:"IC005",name:"Iced Mocha",category:"Iced Coffee",categoryCode:"IC",sizes:[{size:"R",price:70},{size:"L",price:80}],description:"Iced espresso with chocolate and milk",stock:40,minThreshold:10},{id:"FR001",name:"Chocolate Frappe",category:"Frappes",categoryCode:"FR",sizes:[{size:"16oz",price:75}],description:"Blended chocolate frappe with whipped cream",stock:40,minThreshold:8},{id:"FR002",name:"Caramel Frappe",category:"Frappes",categoryCode:"FR",sizes:[{size:"16oz",price:75}],description:"Blended caramel frappe with whipped cream",stock:40,minThreshold:8},{id:"FR003",name:"Cookies & Cream Frappe",category:"Frappes",categoryCode:"FR",sizes:[{size:"16oz",price:80}],description:"Cookies and cream blended frappe",stock:40,minThreshold:8},{id:"FR004",name:"Matcha Frappe",category:"Frappes",categoryCode:"FR",sizes:[{size:"16oz",price:85}],description:"Blended matcha frappe with whipped cream",stock:40,minThreshold:6},{id:"FR005",name:"Coffee Jelly Frappe",category:"Frappes",categoryCode:"FR",sizes:[{size:"16oz",price:80}],description:"Coffee frappe with coffee jelly bits",stock:40,minThreshold:8},{id:"SS001",name:"Blue Lemon Soda",category:"Soda Series",categoryCode:"SS",sizes:[{size:"R",price:55},{size:"L",price:65}],description:"Refreshing blue lemon carbonated drink",stock:40,minThreshold:15},{id:"SS002",name:"Strawberry Fizz",category:"Soda Series",categoryCode:"SS",sizes:[{size:"R",price:55},{size:"L",price:65}],description:"Sweet strawberry flavored soda",stock:40,minThreshold:15},{id:"SS003",name:"Green Apple Soda",category:"Soda Series",categoryCode:"SS",sizes:[{size:"R",price:55},{size:"L",price:65}],description:"Crisp green apple soda",stock:40,minThreshold:15},{id:"SS004",name:"Lychee Pop Soda",category:"Soda Series",categoryCode:"SS",sizes:[{size:"R",price:60},{size:"L",price:70}],description:"Tropical lychee flavored soda",stock:40,minThreshold:12},{id:"SS005",name:"Mango Burst Soda",category:"Soda Series",categoryCode:"SS",sizes:[{size:"R",price:60},{size:"L",price:70}],description:"Tropical mango soda explosion",stock:40,minThreshold:12},{id:"YK001",name:"Blue Yakult",category:"Yakult Series",categoryCode:"YK",sizes:[{size:"R",price:60},{size:"L",price:70}],description:"Probiotic blue flavored Yakult",stock:40,minThreshold:10},{id:"YK002",name:"Strawberry Yakult",category:"Yakult Series",categoryCode:"YK",sizes:[{size:"R",price:60},{size:"L",price:70}],description:"Probiotic strawberry Yakult",stock:40,minThreshold:10},{id:"YK003",name:"Green Apple Yakult",category:"Yakult Series",categoryCode:"YK",sizes:[{size:"R",price:60},{size:"L",price:70}],description:"Probiotic green apple Yakult",stock:40,minThreshold:10},{id:"YK004",name:"Mango Yakult",category:"Yakult Series",categoryCode:"YK",sizes:[{size:"R",price:60},{size:"L",price:70}],description:"Probiotic mango Yakult",stock:40,minThreshold:10},{id:"YK005",name:"Lychee Yakult",category:"Yakult Series",categoryCode:"YK",sizes:[{size:"R",price:60},{size:"L",price:70}],description:"Probiotic lychee Yakult",stock:40,minThreshold:10},{id:"MC001",name:"Classic Matcha",category:"Matcha Series",categoryCode:"MC",sizes:[{size:"R",price:70},{size:"L",price:80}],description:"Traditional matcha powder blend",stock:40,minThreshold:8},{id:"MC002",name:"Matcha Latte",category:"Matcha Series",categoryCode:"MC",sizes:[{size:"R",price:75},{size:"L",price:85}],description:"Matcha with steamed milk",stock:40,minThreshold:8},{id:"MC003",name:"Matcha Caramel",category:"Matcha Series",categoryCode:"MC",sizes:[{size:"R",price:80},{size:"L",price:90}],description:"Matcha with caramel drizzle",stock:40,minThreshold:6},{id:"MC004",name:"Matcha Vanilla",category:"Matcha Series",categoryCode:"MC",sizes:[{size:"R",price:75},{size:"L",price:85}],description:"Matcha with vanilla essence",stock:40,minThreshold:8},{id:"MC005",name:"Dirty Matcha",category:"Matcha Series",categoryCode:"MC",sizes:[{size:"R",price:85},{size:"L",price:95}],description:"Matcha with espresso shot",stock:40,minThreshold:6},{id:"CM001",name:"Fries + Soda",category:"Combo Meals",categoryCode:"CM",sizes:[{size:"Combo",price:99}],description:"Regular Fries + Regular Soda",stock:40,minThreshold:10},{id:"CM002",name:"Siomai Rice + Soda",category:"Combo Meals",categoryCode:"CM",sizes:[{size:"Combo",price:110}],description:"Siomai Rice + Regular Soda",stock:40,minThreshold:8},{id:"CM003",name:"Burger + Soda",category:"Combo Meals",categoryCode:"CM",sizes:[{size:"Combo",price:120}],description:"Cheeseburger + Regular Soda",stock:40,minThreshold:8},{id:"CM004",name:"Nuggets + Soda",category:"Combo Meals",categoryCode:"CM",sizes:[{size:"Combo",price:115}],description:"6pcs Nuggets + Regular Soda",stock:40,minThreshold:8},{id:"CM005",name:"Hotdog + Soda",category:"Combo Meals",categoryCode:"CM",sizes:[{size:"Combo",price:99}],description:"Hotdog Sandwich + Regular Soda",stock:40,minThreshold:10},{id:"SN001",name:"Fries",category:"Snacks",categoryCode:"SN",sizes:[{size:"Reg",price:45},{size:"Lrg",price:60}],description:"Crispy golden fries",stock:40,minThreshold:15},{id:"SN002",name:"Kropek",category:"Snacks",categoryCode:"SN",sizes:[{size:"Solo",price:45}],description:"Crispy prawn cracker",stock:40,minThreshold:10},{id:"SN003",name:"Nachos",category:"Snacks",categoryCode:"SN",sizes:[{size:"Solo",price:60}],description:"Cheese nachos with dip",stock:40,minThreshold:8},{id:"SN004",name:"Cheese Sticks",category:"Snacks",categoryCode:"SN",sizes:[{size:"6 pcs",price:50}],description:"Golden fried cheese sticks",stock:40,minThreshold:10},{id:"SN005",name:"Siomai Rice",category:"Snacks",categoryCode:"SN",sizes:[{size:"Solo",price:55}],description:"Siomai served with rice",stock:40,minThreshold:10}],e=[{code:"HC",name:"Hot Coffee",emoji:"â˜•"},{code:"IC",name:"Iced Coffee",emoji:"ðŸ§Š"},{code:"FR",name:"Frappes",emoji:"ðŸ¥¤"},{code:"SS",name:"Soda Series",emoji:"ðŸ«§"},{code:"YK",name:"Yakult Series",emoji:"ðŸ§ƒ"},{code:"MC",name:"Matcha Series",emoji:"ðŸµ"},{code:"CM",name:"Combo Meals",emoji:"ðŸ±"},{code:"SN",name:"Snacks",emoji:"ðŸŸ"}],f=d.flatMap(a=>a.sizes.map((b,c)=>({id:`${a.id}-${b.size}`,baseId:a.id,name:a.name,size:b.size,price:b.price,category:a.category,categoryCode:a.categoryCode,stock:a.stock,minThreshold:a.minThreshold,description:a.description,image:a.image}))).map(a=>({id:a.id,baseId:a.baseId,name:a.name,price:a.price,size:a.size,category:a.category,categoryCode:a.categoryCode,stock:a.stock,minThreshold:a.minThreshold,description:a.description,image:a.image})),g=[{id:1,name:"Maria Santos",username:"maria",password:"password",role:"cashier",status:"Active",lastLogin:"2025-11-11 09:30"},{id:2,name:"Juan Dela Cruz",username:"juan",password:"password",role:"inventory",status:"Active",lastLogin:"2025-11-11 08:00"},{id:3,name:"Rosa Reyes",username:"rosa",password:"password",role:"cashier",status:"Inactive"},{id:4,name:"Admin Manager",username:"admin",password:"password",role:"manager",status:"Active",lastLogin:"2025-11-11 07:00"}],h={async getProducts(a){let b=new URL("/api/products","http://localhost:3000");a&&b.searchParams.append("category",a);let c=await fetch(b);if(!c.ok)throw Error("Failed to fetch products");return c.json()},async getOrders(){let a=await fetch("/api/orders");if(!a.ok)throw Error("Failed to fetch orders");return a.json()},async createOrder(a){let b=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw Error("Failed to create order");return b.json()},async createProduct(a){let b=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw Error("Failed to create product");return b.json()},async updateProduct(a,b){let c=await fetch(`/api/products/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok)throw Error("Failed to update product");return c.json()},async deleteProduct(a){let b=await fetch(`/api/products/${a}`,{method:"DELETE"});if(!b.ok)throw Error("Failed to delete product");return b.json()},async logInventoryChange(a){let b=await fetch("/api/inventory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw Error("Failed to log inventory change");return b.json()},async getInventoryLogs(){let a=await fetch("/api/inventory");if(!a.ok)throw Error("Failed to fetch inventory logs");return a.json()},async getActivityLogs(){let a=await fetch("/api/activity-logs");if(!a.ok)throw Error("Failed to fetch activity logs");return a.json()},async logActivity(a){let b=await fetch("/api/activity-logs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw Error("Failed to log activity");return b.json()}};function i(){let[a,b]=(0,c.useState)(f),d=(0,c.useCallback)(c=>{let d={...c,id:Math.max(...a.map(a=>Number(a.id)),0)+1};return b([...a,d]),d},[a]),e=(0,c.useCallback)((c,d)=>{b(a.map(a=>a.id===c?{...a,...d}:a))},[a]),g=(0,c.useCallback)(c=>{b(a.filter(a=>a.id!==c))},[a]),h=(0,c.useCallback)(()=>a.filter(a=>a.stock<=a.minThreshold),[a]);return{products:a,addProduct:d,updateProduct:e,deleteProduct:g,getLowStockItems:h}}function j(){let[a,b]=(0,c.useState)([]),[d,e]=(0,c.useState)(!0),[f,g]=(0,c.useState)(null),i=(0,c.useCallback)(async()=>{try{e(!0);let a=await h.getOrders();b(a),g(null)}catch(a){console.error("[v0] Error fetching orders:",a),g(a instanceof Error?a.message:"Failed to fetch orders")}finally{e(!1)}},[]);return(0,c.useEffect)(()=>{i();let a=setInterval(()=>{i()},2e3);return()=>clearInterval(a)},[i]),{orders:a,loading:d,error:f,createOrder:(0,c.useCallback)(async a=>{try{let c=await h.createOrder(a);return b(a=>[c,...a]),c}catch(a){throw console.error("[v0] Error creating order:",a),a}},[]),refetch:i}}function k(){let[a,b]=(0,c.useState)([]),[d,e]=(0,c.useState)(!0),f=(0,c.useCallback)(async()=>{try{e(!0);let a=await fetch("/api/inventory");if(!a.ok)throw Error("Failed to fetch inventory logs");let c=await a.json();b(c||[])}catch(a){console.error("[Inventory] Error fetching logs:",a)}finally{e(!1)}},[]);(0,c.useEffect)(()=>{f();let a=setInterval(()=>{f()},2e3);return()=>clearInterval(a)},[f]);let g=(0,c.useCallback)(c=>{let d={...c,id:Math.max(...a.map(a=>a.id),0)+1};b([...a,d])},[a]);return{logs:a,addLog:g,refetch:f,loading:d}}function l(){let[a,b]=(0,c.useState)([]),[d,e]=(0,c.useState)(!0),f=(0,c.useCallback)(async()=>{try{e(!0);let a=await fetch("/api/ingredients");if(!a.ok)throw Error("Failed to fetch");let c=await a.json();b(c||[])}catch(a){console.error("[useIngredients] error",a)}finally{e(!1)}},[]);return(0,c.useEffect)(()=>{f();let a=setInterval(f,5e3);return()=>clearInterval(a)},[f]),{ingredients:a,loading:d,refetch:f}}function m(){let[a,b]=(0,c.useState)(d.map(a=>({id:a.id,name:a.name,category:a.category,categoryCode:a.categoryCode,sizes:a.sizes,description:a.description,stock:a.stock,minThreshold:a.minThreshold,image:a.image,bottleneck_ingredient:a.bottleneck_ingredient,ingredients_list:a.ingredients_list}))),[f]=(0,c.useState)(e),[g,h]=(0,c.useState)("All"),i=(0,c.useCallback)(b=>"All"===b?a:a.filter(a=>a.category===b),[a]),j=(0,c.useCallback)(b=>a.find(a=>a.id===b),[a]),k=(0,c.useCallback)(()=>["All",...f.map(a=>a.name)],[f]),l=(0,c.useCallback)(a=>{let b=f.find(b=>b.name===a);return b?.emoji||"ðŸ“Œ"},[f]),m=(0,c.useCallback)(()=>a.filter(a=>a.stock<=a.minThreshold),[a]),n=(0,c.useCallback)(async()=>{try{let a=await fetch(`/api/products?t=${Date.now()}`);if(!a.ok)return;let c=await a.json(),d=new Map(c.map(a=>[a.name,a]));b(a=>a.map(a=>{let b=d.get(a.name);return{...a,stock:b?Number(b.stock_quantity):a.stock,bottleneck_ingredient:b?.bottleneck_ingredient,ingredients_list:b?.ingredients_list}}))}catch(a){console.warn("[useMenuSync] poll error",a)}},[]);return(0,c.useEffect)(()=>{n();let a=setInterval(n,5e3);return()=>{clearInterval(a)}},[n]),{menuItems:a,categories:f,selectedCategory:g,setSelectedCategory:h,getMenuByCategory:i,getMenuItemById:j,getAllCategories:k,getCategoryEmoji:l,getLowStockItems:m,refresh:n}}let n=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let p=(0,c.forwardRef)(({color:a="currentColor",size:b=24,strokeWidth:d=2,absoluteStrokeWidth:e,className:f="",children:g,iconNode:h,...i},j)=>(0,c.createElement)("svg",{ref:j,...o,width:b,height:b,stroke:a,strokeWidth:e?24*Number(d)/Number(b):d,className:n("lucide",f),...i},[...h.map(([a,b])=>(0,c.createElement)(a,b)),...Array.isArray(g)?g:[g]])),q=(a,b)=>{let d=(0,c.forwardRef)(({className:d,...e},f)=>(0,c.createElement)(p,{ref:f,iconNode:b,className:n(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,d),...e}));return d.displayName=`${a}`,d},r=q("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),s=q("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),t=q("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),u=q("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),v=q("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),w=q("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),x=q("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),y=q("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),z=q("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),A=q("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),B=q("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]),C=q("CupSoda",[["path",{d:"m6 8 1.75 12.28a2 2 0 0 0 2 1.72h4.54a2 2 0 0 0 2-1.72L18 8",key:"8166m8"}],["path",{d:"M5 8h14",key:"pcz4l3"}],["path",{d:"M7 15a6.47 6.47 0 0 1 5 0 6.47 6.47 0 0 0 5 0",key:"yjz344"}],["path",{d:"m12 8 1-6h2",key:"3ybfa4"}]]),D=q("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]),E=q("IceCreamCone",[["path",{d:"m7 11 4.08 10.35a1 1 0 0 0 1.84 0L17 11",key:"1v6356"}],["path",{d:"M17 7A5 5 0 0 0 7 7",key:"151p3v"}],["path",{d:"M17 7a2 2 0 0 1 0 4H7a2 2 0 0 1 0-4",key:"1sdaij"}]]),F=q("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),G=q("GlassWater",[["path",{d:"M15.2 22H8.8a2 2 0 0 1-2-1.79L5 3h14l-1.81 17.21A2 2 0 0 1 15.2 22Z",key:"48rfw3"}],["path",{d:"M6 12a5 5 0 0 1 6 0 5 5 0 0 0 6 0",key:"mjntcy"}]]),H=q("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),I=q("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),J=q("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);function K({onLogout:a,currentUser:e}){let f=m(),g=j(),[h,i]=(0,c.useState)([]),[k,l]=(0,c.useState)("All"),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)("cash"),[K,L]=(0,c.useState)(""),[M,N]=(0,c.useState)(!1),[O,P]=(0,c.useState)(!1),[Q,R]=(0,c.useState)(null),[S,T]=(0,c.useState)(!1),[U,V]=(0,c.useState)(!1),[W,X]=(0,c.useState)(!1),[Y,Z]=(0,c.useState)(null),$=f.getAllCategories(),_=f.getMenuByCategory(k).filter(a=>a.name.toLowerCase().includes(n.toLowerCase())),aa=a=>{i(h.filter(b=>b.id!==a))},ab=(a,b)=>{b<=0?aa(a):i(h.map(c=>c.id===a?{...c,quantity:b}:c))},ac=h.reduce((a,b)=>a+b.price*b.quantity,0),ad=.08*ac,ae=ac+ad,af=async()=>{T(!0);try{let a={customer_name:K||"Walk-in",items:h.map(a=>({product_id:a.productId,name:a.name,size:a.size,price:a.price,quantity:a.quantity})),total_amount:ae,payment_method:p,user_id:e.id||1},b=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw Error("Failed to process order");let c=await b.json();try{h.forEach(a=>{var b,c;let e;a.productId&&(b=a.productId.toString(),c=a.quantity,(e=d.find(a=>a.id===b))&&!(e.stock<c)&&(e.stock-=c))})}catch(a){console.warn("[Menu] Local stock update failed:",a)}R({...c,items:h,subtotal:ac,tax:ad,total:ae}),N(!0),P(!1),i([]),L("")}catch(a){console.error("[POS] Checkout error:",a),alert("Failed to complete order. Please try again.")}finally{T(!1)}};return M&&Q?(0,b.jsx)("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4 backdrop-blur-sm",children:(0,b.jsxs)("div",{className:"max-w-md w-full bg-white rounded-3xl p-8 text-center shadow-2xl animate-in zoom-in duration-300",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,b.jsx)(F,{className:"w-10 h-10"})}),(0,b.jsx)("h2",{className:"text-3xl font-black text-slate-900 mb-2",children:"Order Confirmed"}),(0,b.jsx)("p",{className:"text-slate-500 mb-8 font-medium italic",children:"Transaction processed successfully"}),(0,b.jsxs)("div",{id:"receipt-content",className:"text-left bg-slate-50 border border-slate-100 p-6 rounded-2xl mb-8 font-mono text-sm shadow-inner",children:[(0,b.jsxs)("div",{className:"text-center border-b border-dashed border-slate-300 pb-4 mb-4",children:[(0,b.jsx)("h3",{className:"text-xl font-black uppercase text-slate-800",children:"Sodalicious"}),(0,b.jsxs)("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-1",children:["Order #",Q.order_number||Q.id]})]}),(0,b.jsx)("div",{className:"space-y-3 mb-6",children:Q.items?.map(a=>(0,b.jsxs)("div",{className:"flex justify-between items-start text-xs text-slate-600",children:[(0,b.jsxs)("span",{className:"flex-1 pr-4",children:[a.quantity,"x ",a.name," (",a.size,")"]}),(0,b.jsxs)("span",{className:"font-bold text-slate-900",children:["â‚±",(a.price*a.quantity).toFixed(2)]})]},a.id))}),(0,b.jsxs)("div",{className:"border-t border-dashed border-slate-300 pt-4 space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between text-xs text-slate-500",children:[(0,b.jsx)("span",{children:"Subtotal"}),(0,b.jsxs)("span",{children:["â‚±",Q.subtotal?.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-xs text-slate-500",children:[(0,b.jsx)("span",{children:"Tax (8%)"}),(0,b.jsxs)("span",{children:["â‚±",Q.tax?.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-lg font-black text-slate-900 pt-2",children:[(0,b.jsx)("span",{children:"TOTAL"}),(0,b.jsxs)("span",{className:"text-primary",children:["â‚±",Q.total?.toFixed(2)]})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("button",{onClick:()=>window.print(),className:"py-4 bg-slate-100 text-slate-600 rounded-xl font-black text-xs uppercase tracking-widest hover:bg-slate-200 transition-all flex items-center justify-center gap-2",children:[(0,b.jsx)(A,{className:"w-4 h-4"}),"Print"]}),(0,b.jsx)("button",{onClick:()=>N(!1),className:"py-4 bg-primary text-white rounded-xl font-black text-xs uppercase tracking-widest hover:opacity-90 transition-all shadow-lg shadow-primary/20",children:"Next Order"})]})]})}):(0,b.jsxs)("div",{className:"min-h-screen bg-slate-50 flex flex-col font-sans text-slate-900 pb-12",children:[(0,b.jsxs)("header",{className:"bg-white border-b border-slate-200 px-8 py-5 flex justify-between items-center sticky top-0 z-50 shadow-sm backdrop-blur-md bg-white/90",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-primary rounded-2xl flex items-center justify-center text-white shadow-lg",children:(0,b.jsx)(C,{className:"w-7 h-7"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-2xl font-black tracking-tighter text-slate-900",children:["SODALICIOUS",(0,b.jsx)("span",{className:"text-primary",children:".CO"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),(0,b.jsxs)("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:["Active Terminal #",e.id]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsxs)("div",{className:"text-right flex flex-col items-end",children:[(0,b.jsx)("p",{className:"font-black text-sm text-slate-800 uppercase tracking-tight",children:e.name}),(0,b.jsx)("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Station Cashier"})]}),(0,b.jsx)("button",{onClick:a,className:"w-10 h-10 rounded-xl bg-red-50 text-red-500 flex items-center justify-center hover:bg-red-500 hover:text-white transition-all border border-red-100",children:(0,b.jsx)(s,{className:"w-5 h-5"})})]})]}),(0,b.jsxs)("main",{className:"flex gap-6 p-6 items-start",children:[(0,b.jsxs)("section",{className:"flex-1 flex flex-col min-w-0 bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-6 border-b border-slate-100 space-y-5",children:[(0,b.jsxs)("div",{className:"relative max-w-md",children:[(0,b.jsx)(r,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-300"}),(0,b.jsx)("input",{type:"text",placeholder:"Search premium beverages...",value:n,onChange:a=>o(a.target.value),className:"w-full pl-12 pr-4 py-3.5 bg-slate-50 border-none rounded-2xl focus:ring-2 focus:ring-primary/20 transition-all font-medium text-slate-600 placeholder:text-slate-300 shadow-inner"})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:$.map(a=>(0,b.jsx)("button",{onClick:()=>l(a),className:`px-5 py-3 rounded-xl font-black text-[10px] uppercase tracking-widest transition-all whitespace-nowrap border-2 ${k===a?"bg-primary border-primary text-white shadow-lg shadow-primary/20 scale-105":"bg-white border-slate-100 text-slate-400 hover:border-slate-200"}`,children:a},`cat-tab-${a}`))})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 p-6 bg-slate-50/10",children:_.map(a=>{let c;return(0,b.jsxs)("button",{onClick:()=>{Z(a),X(!0)},disabled:a.stock<=0,className:"group flex flex-col bg-white border border-slate-200 rounded-2xl p-4 transition-all duration-300 hover:shadow-xl hover:border-primary/40 relative text-left h-72 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,b.jsxs)("div",{className:"w-full h-32 bg-slate-50 rounded-xl mb-4 flex items-center justify-center border border-slate-100 group-hover:bg-primary/5 transition-colors shrink-0 relative overflow-hidden",children:[(0,b.jsx)("div",{className:"text-amber-900/20 group-hover:text-primary/30 group-hover:scale-110 transition-all duration-500 scale-[1.3]",children:(c=a.category.toLowerCase()).includes("soda")||c.includes("drink")||c.includes("beverage")?(0,b.jsx)(C,{className:"w-5 h-5"}):c.includes("coffee")||c.includes("espresso")?(0,b.jsx)(B,{className:"w-5 h-5"}):c.includes("tea")?(0,b.jsx)(G,{className:"w-5 h-5"}):c.includes("dessert")||c.includes("sweet")||c.includes("cake")?(0,b.jsx)(E,{className:"w-5 h-5"}):c.includes("food")||c.includes("snack")||c.includes("meal")?(0,b.jsx)(D,{className:"w-5 h-5"}):(0,b.jsx)(H,{className:"w-5 h-5"})}),(0,b.jsxs)("div",{className:`absolute top-2 right-2 px-2.5 py-1 rounded-lg text-[9px] font-black z-10 shadow-sm ${a.stock<18?"bg-red-600 text-white animate-pulse":"bg-primary text-white"}`,children:[a.stock," LEFT"]}),a.stock<=0&&(0,b.jsx)("div",{className:"absolute inset-0 bg-white/90 backdrop-blur-sm flex items-center justify-center z-20",children:(0,b.jsx)("span",{className:"bg-red-600 text-white px-3 py-1.5 rounded-xl text-[10px] font-black tracking-widest uppercase -rotate-12 shadow-xl border-2 border-white/20",children:"STAY TUNED"})})]}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col justify-between overflow-hidden",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h3",{className:"text-slate-900 font-bold text-sm leading-tight group-hover:text-primary transition-colors line-clamp-2",children:a.name}),(0,b.jsx)("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-tight truncate",children:a.description||"Crafted Experience"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100 mt-2",children:[(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-[8px] font-black text-slate-300 uppercase leading-none mb-1",children:"VARIANTS"}),(0,b.jsxs)("span",{className:"text-[10px] font-black text-slate-600",children:[a.sizes.length," Options"]})]}),(0,b.jsx)("div",{className:"w-9 h-9 rounded-xl bg-slate-50 text-slate-400 flex items-center justify-center group-hover:bg-primary group-hover:text-white transition-all shadow-sm border border-slate-100",children:(0,b.jsx)(t,{className:"w-5 h-5 stroke-[3]"})})]})]})]},a.id)})})]}),(0,b.jsxs)("section",{className:"w-[450px] flex flex-col bg-white rounded-3xl border border-slate-200 shadow-xl overflow-hidden sticky top-[108px] h-[calc(100vh-140px)]",children:[(0,b.jsxs)("div",{className:"p-3 bg-slate-50 border-b border-slate-200 flex gap-2",children:[(0,b.jsxs)("button",{onClick:()=>V(!1),className:`flex-1 py-4 text-[10px] font-black uppercase tracking-[0.2em] transition-all rounded-2xl flex items-center justify-center gap-2 ${!U?"bg-white text-primary shadow-md shadow-primary/5":"text-slate-400 hover:text-slate-600"}`,children:[(0,b.jsx)(w,{className:"w-4 h-4"})," Cart"]}),(0,b.jsxs)("button",{onClick:()=>V(!0),className:`flex-1 py-4 text-[10px] font-black uppercase tracking-[0.2em] transition-all rounded-2xl flex items-center justify-center gap-2 ${U?"bg-white text-primary shadow-md shadow-primary/5":"text-slate-400 hover:text-slate-600"}`,children:[(0,b.jsx)(J,{className:"w-4 h-4"})," History"]})]}),U?(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-5 bg-slate-50/50",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("h3",{className:"font-black text-[10px] text-slate-400 uppercase tracking-widest",children:"Transaction History"}),(0,b.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-600 text-[9px] font-black rounded-full animate-pulse",children:"LIVE"})]}),(g.orders||[]).slice(0,20).map(a=>(0,b.jsxs)("div",{className:"bg-white border border-slate-200 rounded-2xl p-5 hover:shadow-lg transition-all group border-l-4 border-l-primary",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"font-black text-[10px] text-slate-400 leading-none mb-1",children:["TXN-",a.id]}),(0,b.jsx)("p",{className:"font-black text-sm text-slate-800 uppercase tracking-tighter",children:new Date(a.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"text-sm font-black text-primary",children:["â‚±",Number(a.total_amount).toFixed(2)]}),(0,b.jsx)("p",{className:"text-[9px] font-bold text-slate-300 uppercase tracking-widest",children:a.payment_method||"CASH"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 pt-4 border-t border-slate-50",children:[(0,b.jsx)("div",{className:"w-7 h-7 rounded-full bg-slate-100 flex items-center justify-center",children:(0,b.jsx)(J,{className:"w-4 h-4 text-slate-300"})}),(0,b.jsx)("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tight",children:"Verified & Logged"})]})]},a.id))]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:0===h.length?(0,b.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-slate-200",children:[(0,b.jsx)("div",{className:"w-24 h-24 bg-slate-50 rounded-full flex items-center justify-center mb-6",children:(0,b.jsx)(I,{className:"w-12 h-12 opacity-20"})}),(0,b.jsx)("p",{className:"text-[10px] font-black uppercase tracking-[0.3em]",children:"Selection Empty"})]}):h.map(a=>(0,b.jsxs)("div",{className:"bg-white border border-slate-100 p-5 rounded-2xl hover:shadow-xl transition-all group flex gap-5 relative",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-amber-50 rounded-2xl flex items-center justify-center text-amber-700/40 shrink-0 border border-amber-100",children:(0,b.jsx)(B,{className:"w-8 h-8"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0 flex flex-col justify-between py-1",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsx)("p",{className:"font-black text-xs text-slate-800 uppercase tracking-tighter truncate",children:a.name}),(0,b.jsxs)("p",{className:"font-black text-primary text-sm",children:["â‚±",(a.price*a.quantity).toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,b.jsx)("p",{className:"text-[10px] text-slate-400 font-black uppercase",children:a.size}),(0,b.jsxs)("div",{className:"flex items-center gap-3 bg-slate-50 border border-slate-100 rounded-xl px-2.5 py-1.5 shadow-inner",children:[(0,b.jsx)("button",{onClick:()=>ab(a.id,a.quantity-1),className:"text-slate-400 hover:text-primary active:scale-90 transition-all",children:(0,b.jsx)(u,{className:"w-3.5 h-3.5"})}),(0,b.jsx)("span",{className:"text-xs font-black w-4 text-center text-slate-700",children:a.quantity}),(0,b.jsx)("button",{onClick:()=>ab(a.id,a.quantity+1),className:"text-slate-400 hover:text-primary active:scale-90 transition-all",children:(0,b.jsx)(t,{className:"w-3.5 h-3.5"})})]})]})]}),(0,b.jsx)("button",{onClick:()=>aa(a.id),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1.5 shadow-xl scale-0 group-hover:scale-100 transition-all border-4 border-white",children:(0,b.jsx)(v,{className:"w-3 h-3"})})]},a.id))}),(0,b.jsxs)("div",{className:"p-8 border-t border-slate-100 bg-white space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between text-[11px] font-black uppercase tracking-widest text-slate-400",children:[(0,b.jsx)("span",{children:"Subtotal"}),(0,b.jsxs)("span",{className:"text-slate-900",children:["â‚±",ac.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-2xl font-black text-slate-900 pt-2 border-t border-slate-50",children:[(0,b.jsx)("span",{children:"TOTAL"}),(0,b.jsxs)("span",{className:"text-primary tracking-tighter",children:["â‚±",ae.toFixed(2)]})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-3 gap-3",children:[{id:"cash",icon:z,label:"Cash",color:"text-green-600",bg:"bg-green-50",bdr:"border-green-200"},{id:"gcash",icon:y,label:"GCash",color:"text-blue-600",bg:"bg-blue-50",bdr:"border-blue-200"},{id:"card",icon:x,label:"Card",color:"text-purple-600",bg:"bg-purple-50",bdr:"border-purple-200"}].map(a=>(0,b.jsxs)("button",{onClick:()=>q(a.id),className:`p-4 rounded-2xl flex flex-col items-center gap-3 transition-all border-2 ${p===a.id?`${a.bg} ${a.bdr} ${a.color} scale-105 shadow-md`:"bg-white border-slate-100 text-slate-300 hover:border-slate-200"}`,children:[(0,b.jsx)(a.icon,{className:"w-6 h-6"}),(0,b.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:a.label})]},a.id))}),(0,b.jsx)("button",{onClick:()=>{0!==h.length&&("cash"===p?af():P(!0))},disabled:0===h.length||S,className:"w-full py-5 bg-primary text-white rounded-3xl font-black text-sm uppercase tracking-[0.2em] hover:opacity-90 active:scale-[0.98] transition-all disabled:opacity-30 disabled:pointer-events-none shadow-2xl shadow-primary/30 flex items-center justify-center gap-3",children:S?"Synchronizing...":(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(F,{className:"w-5 h-5"})," Execute Order"]})})]})]})]})]}),W&&Y&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50 backdrop-blur-sm animate-in fade-in duration-300",children:(0,b.jsxs)("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full shadow-2xl scale-in-95 animate-in duration-300",children:[(0,b.jsx)("h3",{className:"text-2xl font-black text-slate-900 mb-2",children:Y.name}),(0,b.jsx)("p",{className:"text-sm text-slate-400 font-bold uppercase tracking-tight mb-8",children:"Select Desired Variant"}),(0,b.jsx)("div",{className:"space-y-3 mb-8",children:Y.sizes.map(a=>(0,b.jsxs)("button",{onClick:()=>(a=>{if(Y){let b=`${Y.id}-${a.size}`;h.find(a=>a.id===b)?i(h.map(a=>a.id===b?{...a,quantity:a.quantity+1}:a)):i([...h,{id:b,productId:Y.id,name:Y.name,size:a.size,price:a.price,quantity:1}])}X(!1),Z(null)})(a),className:"w-full py-5 px-6 bg-slate-50 hover:bg-primary hover:text-white border border-slate-100 rounded-2xl font-black text-sm uppercase tracking-widest transition-all flex justify-between items-center group shadow-sm",children:[(0,b.jsx)("span",{children:a.size}),(0,b.jsxs)("span",{className:"font-black text-primary group-hover:text-white",children:["â‚±",a.price]})]},a.size))}),(0,b.jsx)("button",{onClick:()=>{X(!1),Z(null)},className:"w-full py-4 text-slate-400 font-black text-xs uppercase tracking-[0.2em] hover:text-slate-600 transition-all",children:"Cancel"})]})}),O&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50 backdrop-blur-md",children:(0,b.jsxs)("div",{className:"bg-white rounded-[2.5rem] p-10 max-w-md w-full shadow-2xl",children:[(0,b.jsxs)("div",{className:"text-center mb-10",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-primary/10 text-primary rounded-full flex items-center justify-center mx-auto mb-6",children:"gcash"===p?(0,b.jsx)(y,{className:"w-8 h-8"}):(0,b.jsx)(x,{className:"w-8 h-8"})}),(0,b.jsx)("h3",{className:"text-3xl font-black text-slate-900 mb-2",children:"gcash"===p?"GCash Checkout":"Card Checkout"}),(0,b.jsxs)("p",{className:"text-slate-400 font-bold uppercase tracking-widest text-xs",children:["Awaiting Confirmation â€¢ â‚±",ae.toFixed(2)]})]}),"gcash"===p&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white p-8 rounded-[2rem] flex flex-col items-center justify-center border border-slate-100 shadow-xl shadow-blue-500/5",children:[(0,b.jsxs)("div",{className:"w-48 h-48 bg-[#007DFE] p-4 rounded-3xl relative overflow-hidden group",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-white opacity-0 group-hover:opacity-10 transition-opacity"}),(0,b.jsxs)("div",{className:"w-full h-full bg-white rounded-xl flex flex-col items-center justify-center p-2 border-4 border-[#007DFE]",children:[(0,b.jsx)("div",{className:"grid grid-cols-5 grid-rows-5 gap-1.5 w-full h-full",children:Array.from({length:25}).map((a,c)=>(0,b.jsx)("div",{className:`rounded-sm ${c%3==0||c%7==1||c%13==0?"bg-[#007DFE]":"bg-slate-100"}`},c))}),(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,b.jsx)("div",{className:"w-12 h-12 bg-[#007DFE] rounded-xl flex items-center justify-center shadow-2xl border-2 border-white",children:(0,b.jsx)("span",{className:"text-white font-black text-[10px]",children:"GC"})})})]})]}),(0,b.jsx)("p",{className:"text-[10px] text-slate-300 mt-6 font-black uppercase tracking-[0.3em]",children:"Merchant ID: 1599302"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest pl-1",children:"Reference Number"}),(0,b.jsx)("input",{type:"text",placeholder:"Enter receipt # from GCash",className:"w-full px-6 py-4 bg-slate-50 border-none rounded-2xl focus:ring-2 focus:ring-primary/20 transition-all font-black text-sm tracking-widest",autoFocus:!0})]})]}),"card"===p&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-br from-[#1e293b] to-[#0f172a] p-8 rounded-[2rem] text-white shadow-2xl relative overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full -mr-16 -mt-16 blur-3xl"}),(0,b.jsxs)("div",{className:"flex justify-between mb-12",children:[(0,b.jsx)("div",{className:"w-14 h-10 bg-gradient-to-br from-amber-400 to-amber-200 rounded-lg opacity-90 shadow-lg"}),(0,b.jsx)("span",{className:"font-black italic text-lg opacity-40",children:"SODAPAY"})]}),(0,b.jsx)("div",{className:"font-mono text-2xl tracking-[0.2em] mb-6 drop-shadow-lg",children:"â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢"}),(0,b.jsxs)("div",{className:"flex justify-between text-[10px] font-black uppercase opacity-40 tracking-widest",children:[(0,b.jsx)("span",{children:"Terminal Verified"}),(0,b.jsxs)("span",{children:["No. ",Math.random().toString().slice(2,6)]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest pl-1",children:"Swipe or Insert Card"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-y-0 right-4 flex items-center",children:(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"})}),(0,b.jsx)("input",{type:"text",placeholder:"XXXX XXXX XXXX XXXX",autoFocus:!0,className:"w-full px-6 py-4 bg-slate-50 border-2 border-slate-100 rounded-2xl font-black text-sm tracking-[0.3em] focus:border-primary focus:bg-white focus:outline-none transition-all placeholder:text-slate-200"})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-4 mt-10",children:[(0,b.jsx)("button",{onClick:()=>P(!1),className:"flex-1 py-4 text-slate-400 font-black text-xs uppercase tracking-widest hover:text-slate-600 transition-all",children:"Cancel"}),(0,b.jsx)("button",{onClick:af,className:"flex-2 px-8 py-4 bg-primary text-white rounded-2xl font-black text-xs uppercase tracking-[0.2em] hover:opacity-90 transition-all shadow-xl shadow-primary/20",children:"Authorize"})]})]})})]})}function L({onLogin:a}){let[d,e]=(0,c.useState)(""),[f,g]=(0,c.useState)(""),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(""),l=async b=>{b.preventDefault(),i(!0),k("");try{let b=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d,password:f})});if(!b.ok){let a=b.headers.get("content-type"),c="Login failed";if(a?.includes("application/json"))try{c=(await b.json()).error||c}catch{c=`Server error (${b.status})`}else c=`Server error (${b.status})`;k(c);return}let c=await b.json();a({cashier:"cashier",manager:"manager"}[c.user.role]||"cashier",c.user),e(""),g("")}catch(a){k("Network error. Please try again."),console.error("[v0] Login error:",a)}finally{i(!1)}};return(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary to-primary/80 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-card rounded-2xl shadow-2xl p-8 w-full max-w-md border border-border",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-foreground mb-2 tracking-tight",children:"Sodalicious.Co"}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm font-medium",children:"Premium POS System"})]}),(0,b.jsxs)("form",{onSubmit:l,className:"space-y-4 mb-8",children:[(0,b.jsx)("input",{type:"email",placeholder:"Email",value:d,onChange:a=>e(a.target.value),className:"w-full px-4 py-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-card text-foreground transition-all",required:!0}),(0,b.jsx)("input",{type:"password",placeholder:"Password",value:f,onChange:a=>g(a.target.value),className:"w-full px-4 py-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-card text-foreground transition-all",required:!0}),j&&(0,b.jsx)("div",{className:"p-3 bg-destructive/10 border border-destructive/20 rounded-lg text-destructive text-sm font-medium",children:j}),(0,b.jsx)("button",{type:"submit",disabled:h,className:"w-full py-3 bg-primary text-primary-foreground rounded-lg font-semibold hover:bg-primary/90 disabled:opacity-50 transition-all shadow-md hover:shadow-lg",children:h?"Logging in...":"Login"})]}),(0,b.jsxs)("div",{className:"space-y-2 pt-4 border-t border-border",children:[(0,b.jsx)("p",{className:"text-center text-xs text-muted-foreground font-medium mb-3",children:"Demo Credentials:"}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1",children:[(0,b.jsx)("p",{className:"font-semibold",children:"Cashier: cashier@sodalicious.com / 123456"}),(0,b.jsx)("p",{className:"font-semibold",children:"Manager: manager@sodalicious.com / 123456"})]})]})]})})}let M=q("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),N=q("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),O=q("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),P=q("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function Q({products:a}){let d=m(),[e,f]=(0,c.useState)(!1),g=d.menuItems.filter(a=>!a.ingredients_list||"Recipe Missing"===a.bottleneck_ingredient).length,[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(""),[l,n]=(0,c.useState)({name:"",price:0,category:"Hot Coffee",stock:0,minThreshold:5,description:"",size:"M"}),o=d.menuItems.filter(a=>a.name.toLowerCase().includes(j.toLowerCase()));return(0,b.jsxs)("div",{className:"p-8 max-w-[1600px] mx-auto",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Products"}),(0,b.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage your menu items and stock"}),g>0&&(0,b.jsxs)("span",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-rose-50 text-rose-600 text-[10px] font-black rounded border border-rose-100 animate-pulse",children:[(0,b.jsx)(P,{className:"w-3 h-3"}),g," ITEMS MISSING RECIPES"]})]})]}),(0,b.jsxs)("button",{onClick:()=>{f(!e),i(null),n({name:"",price:0,category:"Hot Coffee",stock:0,minThreshold:5,description:"",size:"M"})},className:"flex items-center gap-2 px-5 py-2.5 bg-primary text-primary-foreground rounded-lg font-bold hover:bg-primary/90 transition-all shadow-lg shadow-primary/20",children:[e?(0,b.jsx)(v,{className:"w-5 h-5"}):(0,b.jsx)(t,{className:"w-5 h-5"}),e?"Cancel":"Add Product"]})]}),e&&(0,b.jsxs)("div",{className:"bg-card border border-primary/20 rounded-xl p-8 mb-8 shadow-lg animate-in fade-in slide-in-from-top-4 duration-300 relative overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-primary to-purple-600"}),(0,b.jsxs)("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[h?(0,b.jsx)(M,{className:"w-5 h-5 text-primary"}):(0,b.jsx)(t,{className:"w-5 h-5 text-primary"}),h?"Edit Product":"Add New Product"]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-semibold",children:"Product Name"}),(0,b.jsx)("input",{type:"text",placeholder:"e.g. Camel Machiarro",value:l.name,onChange:a=>n({...l,name:a.target.value}),className:"w-full px-4 py-3 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-semibold",children:"Category"}),(0,b.jsx)("select",{value:l.category,onChange:a=>n({...l,category:a.target.value}),className:"w-full px-4 py-3 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50",children:d.getAllCategories().filter(a=>"All"!==a).map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-semibold",children:"Price (â‚±)"}),(0,b.jsx)("input",{type:"number",placeholder:"0.00",value:l.price,onChange:a=>n({...l,price:Number.parseFloat(a.target.value)}),className:"w-full px-4 py-3 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-semibold",children:"Size Variant"}),(0,b.jsx)("input",{type:"text",placeholder:"e.g. M, L, Regular",value:l.size,onChange:a=>n({...l,size:a.target.value}),className:"w-full px-4 py-3 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-semibold",children:"Initial Stock"}),(0,b.jsx)("input",{type:"number",placeholder:"0",value:l.stock,onChange:a=>n({...l,stock:Number.parseInt(a.target.value)}),className:"w-full px-4 py-3 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-semibold",children:"Low Stock Alert Threshold"}),(0,b.jsx)("input",{type:"number",placeholder:"5",value:l.minThreshold,onChange:a=>n({...l,minThreshold:Number.parseInt(a.target.value)}),className:"w-full px-4 py-3 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),(0,b.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-semibold",children:"Description"}),(0,b.jsx)("textarea",{placeholder:"Product description...",value:l.description||"",onChange:a=>n({...l,description:a.target.value}),className:"w-full px-4 py-3 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50 min-h-[100px]"})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 mt-8",children:[(0,b.jsx)("button",{onClick:()=>f(!1),className:"px-6 py-3 bg-muted text-foreground rounded-lg font-bold hover:bg-muted/80 transition-all",children:"Cancel"}),(0,b.jsxs)("button",{onClick:()=>{h?(a.updateProduct(parseInt(h),l),i(null)):a.addProduct(l),f(!1),n({name:"",price:0,category:"Hot Coffee",stock:0,minThreshold:5,description:"",size:"M"})},className:"flex items-center gap-2 px-8 py-3 bg-primary text-primary-foreground rounded-lg font-bold hover:bg-primary/90 transition-all shadow-lg shadow-primary/20",children:[(0,b.jsx)(O,{className:"w-5 h-5"}),h?"Update Product":"Save Product"]})]})]}),(0,b.jsxs)("div",{className:"bg-card border border-border rounded-xl overflow-hidden shadow-sm",children:[(0,b.jsx)("div",{className:"p-4 border-b border-border bg-muted/20 flex gap-4",children:(0,b.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,b.jsx)(r,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,b.jsx)("input",{type:"text",placeholder:"Search products...",value:j,onChange:a=>k(a.target.value),className:"w-full pl-9 pr-4 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50 text-sm"})]})}),(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{className:"bg-muted/50 border-b border-border",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground uppercase tracking-wider",children:"Name"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground uppercase tracking-wider",children:"Category"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground uppercase tracking-wider",children:"Size"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground uppercase tracking-wider",children:"Price"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground uppercase tracking-wider",children:"Stock"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground uppercase tracking-wider",children:"Ingredients"}),(0,b.jsx)("th",{className:"px-6 py-4 text-right font-bold text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-border",children:o.map(c=>{let d=c.sizes?.[0],e=d?.size||"â€”",g=d?.price||0;return(0,b.jsxs)("tr",{className:"hover:bg-muted/50 transition-colors",children:[(0,b.jsx)("td",{className:"px-6 py-4 font-semibold text-foreground",children:c.name}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:"px-2 py-1 bg-secondary rounded-md text-secondary-foreground text-xs font-medium",children:c.category})}),(0,b.jsx)("td",{className:"px-6 py-4",children:e}),(0,b.jsxs)("td",{className:"px-6 py-4 font-mono font-medium",children:["â‚±",g.toFixed(2)]}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:`w-2 h-2 rounded-full ${c.stock<=0?"bg-red-500 animate-pulse shadow-[0_0_8px_rgba(239,68,68,0.5)]":c.stock<=c.minThreshold?"bg-amber-500 shadow-[0_0_8px_rgba(245,158,11,0.5)]":"bg-green-500"}`}),(0,b.jsx)("span",{className:c.stock<=0?"text-red-600 font-black":c.stock<=c.minThreshold?"text-amber-600 font-bold":"font-medium",children:c.stock>0?`${c.stock} in stock`:"OUT OF STOCK"})]})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex flex-col gap-1.5 min-w-[200px]",children:[c.ingredients_list?(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:c.ingredients_list.split(", ").map(a=>(0,b.jsx)("span",{className:"px-2 py-0.5 bg-muted text-[10px] font-bold text-muted-foreground rounded border border-border",children:a},a))}):(0,b.jsxs)("span",{className:"text-[10px] font-black text-rose-500 bg-rose-50 px-2 py-1 rounded border border-rose-100 flex items-center gap-1 w-fit",children:[(0,b.jsx)(P,{className:"w-3 h-3 text-rose-500"}),"âš ï¸ NO RECIPE"]}),c.stock<=0&&c.bottleneck_ingredient&&"Recipe Missing"!==c.bottleneck_ingredient&&(0,b.jsxs)("div",{className:"mt-1 flex items-center gap-1.5 text-[9px] font-black text-rose-700 bg-rose-100 px-2 py-1 rounded-md border border-rose-200 uppercase w-fit animate-bounce",children:[(0,b.jsx)(P,{className:"w-2.5 h-2.5"}),"Critical: Add ",c.bottleneck_ingredient]})]})}),(0,b.jsxs)("td",{className:"px-6 py-4 text-right space-x-2",children:[(0,b.jsx)("button",{onClick:()=>{n(c),i(String(c.id)),f(!0)},className:"inline-flex items-center justify-center p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:(0,b.jsx)(M,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>a.deleteProduct(parseInt(c.id)),className:"inline-flex items-center justify-center p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:(0,b.jsx)(N,{className:"w-4 h-4"})})]})]},c.id)})})]})]})]})}function R({products:a,inventoryLogs:d}){let{ingredients:e,refetch:f}=l(),[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(null),[k,m]=(0,c.useState)({quantity:0,type:"restock",reason:""}),n=e.filter(a=>Number(a.stock_quantity)<=Number(a.reorder_level)),o=async()=>{if(i){let a=e.find(a=>a.id===i);if(a){let b="restock"===k.type?k.quantity:-k.quantity;try{(await fetch("/api/inventory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ingredient_id:a.id,user_id:1,log_type:k.type,quantity_changed:b,reason:k.reason})})).ok?(f(),d.refetch()):console.error("Failed to update inventory")}catch(a){console.error(a)}j(null),h(!1),m({quantity:0,type:"restock",reason:""})}}};return(0,b.jsxs)("div",{className:"p-8",children:[(0,b.jsx)("h2",{className:"text-3xl font-bold mb-8",children:"Ingredient Inventory Management"}),n.length>0&&(0,b.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-8",children:[(0,b.jsx)("p",{className:"text-sm font-bold text-yellow-800",children:"âš  Low Stock Alert"}),(0,b.jsxs)("p",{className:"text-sm text-yellow-700",children:[n.length," ingredients need restocking"]})]}),g&&(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6 mb-8",children:[(0,b.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Adjust Stock"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("select",{value:k.type,onChange:a=>m({...k,type:a.target.value}),className:"px-4 py-2 border border-border rounded bg-background",children:[(0,b.jsx)("option",{value:"restock",children:"Restock"}),(0,b.jsx)("option",{value:"damage",children:"Damage"}),(0,b.jsx)("option",{value:"waste",children:"Waste"})]}),(0,b.jsx)("input",{type:"number",placeholder:"Quantity",value:k.quantity,onChange:a=>m({...k,quantity:Number.parseInt(a.target.value)}),className:"px-4 py-2 border border-border rounded bg-background"}),(0,b.jsx)("textarea",{placeholder:"Reason",value:k.reason,onChange:a=>m({...k,reason:a.target.value}),className:"px-4 py-2 border border-border rounded bg-background col-span-2"})]}),(0,b.jsxs)("div",{className:"space-x-2 mt-4",children:[(0,b.jsx)("button",{onClick:o,className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:"Apply"}),(0,b.jsx)("button",{onClick:()=>{h(!1),j(null)},className:"px-4 py-2 border border-border rounded-md hover:bg-accent",children:"Cancel"})]})]}),(0,b.jsx)("div",{className:"bg-card border border-border rounded-lg overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-accent",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Ingredient"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Unit"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Current Stock"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Reorder Level"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-border",children:e.map(a=>{let c=Number(a.stock_quantity)<=Number(a.reorder_level);return(0,b.jsxs)("tr",{className:`hover:bg-accent/50 transition-colors ${c?"bg-red-50":""}`,children:[(0,b.jsx)("td",{className:"px-6 py-4 font-medium",children:a.name}),(0,b.jsx)("td",{className:"px-6 py-4",children:a.unit}),(0,b.jsx)("td",{className:`px-6 py-4 font-bold ${c?"text-red-600":"text-foreground"}`,children:a.stock_quantity}),(0,b.jsx)("td",{className:"px-6 py-4 font-medium text-muted-foreground",children:a.reorder_level}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest ${c?"bg-red-600 text-white shadow-lg shadow-red-200":"bg-green-100 text-green-700"}`,children:c?"LOW STOCK":"OK"})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("button",{onClick:()=>{j(a.id),h(!0)},className:"inline-flex items-center justify-center p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors font-bold",children:"Adjust"})})]},a.id)})})]})}),d.logs.length>0&&(0,b.jsxs)("div",{className:"mt-8",children:[(0,b.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Inventory History"}),(0,b.jsx)("div",{className:"bg-card border border-border rounded-lg overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-accent",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Ingredient"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Type"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Qty Changed"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Reason"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"User"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Timestamp"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-border",children:d.logs.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-accent/50",children:[(0,b.jsx)("td",{className:"px-6 py-4",children:a.ingredient_name||a.productName||"Unknown"}),(0,b.jsx)("td",{className:"px-6 py-4 capitalize",children:a.log_type||a.type}),(0,b.jsx)("td",{className:"px-6 py-4",children:a.quantity_changed||a.quantity}),(0,b.jsx)("td",{className:"px-6 py-4",children:a.reason||"-"}),(0,b.jsx)("td",{className:"px-6 py-4",children:a.user_name||a.userName}),(0,b.jsx)("td",{className:"px-6 py-4",children:a.created_at?new Date(a.created_at).toLocaleString():a.timestamp})]},a.id))})]})})]})]})}let S=q("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),T=q("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),U=q("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);function V({orders:a}){let d,e,f,g,h,[i,j]=(0,c.useState)(null),k=a.orders.filter(a=>"completed"===(a.order_status??a.status??"").toLowerCase());return(0,b.jsxs)("div",{className:"p-8 max-w-[1600px] mx-auto",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Order History"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"View past transactions"})]}),(0,b.jsxs)("div",{className:"px-4 py-2 bg-primary/10 text-primary font-medium rounded-lg flex items-center gap-2",children:[(0,b.jsx)(U,{className:"w-5 h-5"}),k.length," Total Orders"]})]}),(0,b.jsx)("div",{className:"bg-card border border-border rounded-xl overflow-hidden shadow-sm",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{className:"bg-muted/50 border-b border-border",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground uppercase tracking-wider",children:"Order ID"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground uppercase tracking-wider",children:"Customer"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground uppercase tracking-wider",children:"Total"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground uppercase tracking-wider",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground uppercase tracking-wider",children:"Date"}),(0,b.jsx)("th",{className:"px-6 py-4 text-right font-bold text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-border",children:k.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-muted/50 transition-colors",children:[(0,b.jsx)("td",{className:"px-6 py-4 font-bold font-mono",children:a.id}),(0,b.jsx)("td",{className:"px-6 py-4 font-medium",children:a.customer_name??a.customer??"â€”"}),(0,b.jsxs)("td",{className:"px-6 py-4 font-bold text-primary",children:["â‚±",Number(a.total_amount??a.total??0).toFixed(2)]}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("span",{className:"flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-bold bg-green-100 text-green-700 capitalize w-fit",children:[(0,b.jsx)(F,{className:"w-3 h-3"}),a.order_status??a.status??"Completed"]})}),(0,b.jsx)("td",{className:"px-6 py-4 text-muted-foreground",children:a.created_at?new Date(a.created_at).toLocaleString():"-"}),(0,b.jsx)("td",{className:"px-6 py-4 text-right",children:(0,b.jsxs)("button",{onClick:()=>j(i===String(a.id)?null:String(a.id)),className:"inline-flex items-center justify-center gap-2 px-4 py-2 bg-primary/10 hover:bg-primary/20 text-primary rounded-lg font-medium text-xs transition-colors",children:[i===String(a.id)?(0,b.jsx)(T,{className:"w-4 h-4"}):(0,b.jsx)(S,{className:"w-4 h-4"}),i===String(a.id)?"Hide Details":"View Details"]})})]},a.id))})]})}),i&&(0,b.jsx)("div",{className:"mt-8 bg-card border border-border rounded-xl p-8 shadow-md animate-in fade-in slide-in-from-bottom-4 duration-300",children:(d=a.orders.find(a=>String(a.id)===i))?(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,b.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-2",children:["Order Details",(0,b.jsxs)("span",{className:"text-muted-foreground font-normal",children:["#",d.id]})]}),(0,b.jsxs)("div",{className:"text-xs font-mono bg-muted px-3 py-1 rounded",children:["ID: ",d.id]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-8 mb-8 p-6 bg-muted/20 rounded-lg border border-border/50",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider mb-1",children:"Customer"}),(0,b.jsx)("p",{className:"font-bold text-lg",children:d.customer_name??d.customer??"â€”"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider mb-1",children:"Cashier"}),(0,b.jsx)("p",{className:"font-bold text-lg",children:d.cashier_name??d.cashierName??"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider mb-1",children:"Payment Method"}),(0,b.jsx)("p",{className:"font-bold text-lg capitalize flex items-center gap-2",children:d.payment_method??d.paymentMethod??"â€”"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider mb-1",children:"Date Logged"}),(0,b.jsx)("p",{className:"font-bold text-lg",children:d.created_at?new Date(d.created_at).toLocaleDateString():"-"})]})]}),(0,b.jsxs)("div",{className:"border border-border rounded-lg overflow-hidden",children:[(0,b.jsx)("div",{className:"bg-muted/50 px-6 py-3 border-b border-border font-bold text-sm",children:"Items Purchased"}),(0,b.jsx)("div",{className:"divide-y divide-border",children:Array.isArray(d.items)&&d.items.length>0?d.items.map(a=>(0,b.jsxs)("div",{className:"flex justify-between p-4 hover:bg-muted/20",children:[(0,b.jsxs)("span",{className:"font-medium",children:[(0,b.jsxs)("span",{className:"font-bold text-primary mr-2",children:[a.quantity??a.qty,"x"]}),a.name??a.product_name]}),(0,b.jsxs)("span",{className:"font-mono",children:["â‚±",Number((a.price??a.unit_price??0)*(a.quantity??a.qty??0)).toFixed(2)]})]},a.id??`${a.name}-${a.quantity}`)):(0,b.jsx)("div",{className:"p-4 text-sm text-muted-foreground text-center italic",children:"No item details available in history record."})}),(0,b.jsx)("div",{className:"bg-muted/20 p-4 border-t border-border space-y-1",children:(f=(e=(Array.isArray(d.items)?d.items:[]).reduce((a,b)=>a+Number((b.price??b.unit_price??0)*(b.quantity??b.qty??0)),0))>0?e:Number(d.subtotal??d.sub_total??0),g=Number(d.tax??d.tax_amount??0),h=Number(d.total_amount??d.total??f+g),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,b.jsxs)("div",{className:"flex justify-between w-64 text-sm text-muted-foreground",children:[(0,b.jsx)("span",{children:"Subtotal"}),(0,b.jsxs)("span",{children:["â‚±",f.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between w-64 text-sm text-muted-foreground",children:[(0,b.jsx)("span",{children:"Tax (8%)"}),(0,b.jsxs)("span",{children:["â‚±",g.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between w-64 text-xl font-black text-foreground border-t border-border pt-2 mt-2",children:[(0,b.jsx)("span",{children:"TOTAL"}),(0,b.jsxs)("span",{children:["â‚±",h.toFixed(2)]})]})]}))})]})]}):null})]})}function W({users:a}){let[d,e]=(0,c.useState)(!1),[f,g]=(0,c.useState)(null),[h,i]=(0,c.useState)({name:"",username:"",password:"",role:"cashier",status:"Active"});return(0,b.jsxs)("div",{className:"p-8",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,b.jsx)("h2",{className:"text-3xl font-bold",children:"User Management"}),(0,b.jsx)("button",{onClick:()=>{e(!d),g(null),i({name:"",username:"",password:"",role:"cashier",status:"Active"})},className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:d?"Cancel":"Add User"})]}),d&&(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6 mb-8",children:[(0,b.jsx)("h3",{className:"text-xl font-bold mb-4",children:f?"Edit User":"Add New User"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)("input",{type:"text",placeholder:"Full Name",value:h.name,onChange:a=>i({...h,name:a.target.value}),className:"px-4 py-2 border border-border rounded bg-background"}),(0,b.jsx)("input",{type:"text",placeholder:"Username",value:h.username,onChange:a=>i({...h,username:a.target.value}),className:"px-4 py-2 border border-border rounded bg-background"}),(0,b.jsx)("input",{type:"password",placeholder:"Password",value:h.password,onChange:a=>i({...h,password:a.target.value}),className:"px-4 py-2 border border-border rounded bg-background"}),(0,b.jsxs)("select",{value:h.role,onChange:a=>i({...h,role:a.target.value}),className:"px-4 py-2 border border-border rounded bg-background",children:[(0,b.jsx)("option",{value:"cashier",children:"Cashier"}),(0,b.jsx)("option",{value:"manager",children:"Manager"}),(0,b.jsx)("option",{value:"inventory",children:"Inventory Officer"})]}),(0,b.jsxs)("select",{value:h.status,onChange:a=>i({...h,status:a.target.value}),className:"px-4 py-2 border border-border rounded bg-background col-span-2",children:[(0,b.jsx)("option",{value:"Active",children:"Active"}),(0,b.jsx)("option",{value:"Inactive",children:"Inactive"})]})]}),(0,b.jsx)("button",{onClick:()=>{f?(a.updateUser(f,h),g(null)):a.addUser(h),e(!1),i({name:"",username:"",password:"",role:"cashier",status:"Active"})},className:"mt-4 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:f?"Update User":"Add User"})]}),(0,b.jsx)("div",{className:"bg-card border border-border rounded-lg overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-accent",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Name"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Username"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Role"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Last Login"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-border",children:a.users.filter(a=>"manager"!==a.role).map(c=>(0,b.jsxs)("tr",{className:"hover:bg-accent/50",children:[(0,b.jsx)("td",{className:"px-6 py-4",children:c.name}),(0,b.jsx)("td",{className:"px-6 py-4",children:c.username}),(0,b.jsx)("td",{className:"px-6 py-4 capitalize",children:c.role}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:`px-3 py-1 rounded text-sm font-bold ${"Active"===c.status?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:c.status})}),(0,b.jsx)("td",{className:"px-6 py-4",children:c.lastLogin||"N/A"}),(0,b.jsxs)("td",{className:"px-6 py-4 space-x-2",children:[(0,b.jsx)("button",{onClick:()=>{i({name:c.name,username:c.username,password:"",role:c.role,status:c.status}),g(c.id),e(!0)},className:"px-3 py-1 bg-blue-100 text-blue-700 rounded text-sm hover:bg-blue-200",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>a.deleteUser(c.id),className:"px-3 py-1 bg-red-100 text-red-700 rounded text-sm hover:bg-red-200",children:"Delete"})]})]},c.id))})]})})]})}function X(){m();let[a,d]=(0,c.useState)("daily"),[e,f]=(0,c.useState)({start:"",end:""}),[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null),n=(0,c.useCallback)(async()=>{j(!0),l(null);try{let b=new URLSearchParams;b.set("type",a),e.start&&e.end&&(b.set("start",e.start),b.set("end",e.end));let c=await fetch(`/api/reports?${b.toString()}`);if(!c.ok)throw Error(`Status ${c.status}`);let d=await c.json();d?.totals&&(d.totals.totalOrders=Number(d.totals.totalOrders||0),d.totals.totalSales=Number(d.totals.totalSales||0)),h(d)}catch(a){console.error("[Reports] fetch error",a),l("Failed to fetch report; showing local summary"),h(null)}finally{j(!1)}},[a,e.start,e.end]);(0,c.useEffect)(()=>{n();let a=setInterval(()=>{n()},5e3);return()=>clearInterval(a)},[n]);let o={title:"inventory"===a?"Inventory Report":"Daily Sales Report",totalSales:g?.totals?.totalSales??0,totalOrders:g?.totals?.totalOrders??0,itemsSold:g?.breakdown?g.breakdown.reduce((a,b)=>a+Number(b.orders_count||0),0):0,paymentMethods:{}};return(0,b.jsxs)("div",{className:"p-8",children:[(0,b.jsx)("h2",{className:"text-3xl font-bold mb-8",children:"Reports"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[{id:"daily",label:"Daily Sales Report"},{id:"weekly",label:"Weekly Sales Report"},{id:"monthly",label:"Monthly Sales Report"},{id:"payment",label:"Payment Summary"},{id:"inventory",label:"Inventory Report"}].map(c=>(0,b.jsxs)("button",{onClick:()=>d(c.id),className:`p-6 border rounded-lg hover:bg-accent transition-colors text-left ${a===c.id?"border-primary bg-primary/10":"border-border"}`,children:[(0,b.jsx)("h3",{className:"font-bold mb-2",children:c.label}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Generate and view report"})]},c.id))}),(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg p-8",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsx)("h3",{className:"text-2xl font-bold",children:g?g.meta?.type||"Report":o.title}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[i&&(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Refreshing..."}),(0,b.jsx)("button",{onClick:()=>n(),className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:"Refresh"})]})]}),"inventory"!==a&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"p-5 bg-blue-50 rounded-2xl border border-blue-100 shadow-sm hover:shadow-md transition-all",children:[(0,b.jsx)("p",{className:"text-[10px] font-black text-blue-400 uppercase tracking-widest mb-1",children:"Total Sales"}),(0,b.jsxs)("p",{className:"text-3xl font-black text-blue-600",children:["â‚±",Number(g?.totals?.totalSales??o.totalSales).toFixed(2)]}),(0,b.jsx)("div",{className:"mt-2 h-1 w-full bg-blue-200 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-blue-600 w-[70%]"})})]}),(0,b.jsxs)("div",{className:"p-5 bg-green-50 rounded-2xl border border-green-100 shadow-sm hover:shadow-md transition-all",children:[(0,b.jsx)("p",{className:"text-[10px] font-black text-green-400 uppercase tracking-widest mb-1",children:"Total Orders"}),(0,b.jsx)("p",{className:"text-3xl font-black text-green-600",children:g?.totals?.totalOrders??o.totalOrders})]}),(0,b.jsxs)("div",{className:"p-5 bg-purple-50 rounded-2xl border border-purple-100 shadow-sm hover:shadow-md transition-all",children:[(0,b.jsx)("p",{className:"text-[10px] font-black text-purple-400 uppercase tracking-widest mb-1",children:"Items Sold"}),(0,b.jsx)("p",{className:"text-3xl font-black text-purple-600",children:o.itemsSold})]}),(0,b.jsxs)("div",{className:"p-5 bg-orange-50 rounded-2xl border border-orange-100 shadow-sm hover:shadow-md transition-all",children:[(0,b.jsx)("p",{className:"text-[10px] font-black text-orange-400 uppercase tracking-widest mb-1",children:"Avg Ticket"}),(0,b.jsxs)("p",{className:"text-3xl font-black text-orange-600",children:["â‚±",(Number(g?.totals?.totalSales??o.totalSales)/Math.max(1,Number(g?.totals?.totalOrders??o.totalOrders))).toFixed(2)]})]})]}),(0,b.jsxs)("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl p-6",children:[(0,b.jsxs)("h4",{className:"font-black text-xs uppercase tracking-widest text-slate-400 mb-6 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"w-2 h-2 rounded-full bg-primary animate-pulse"}),"Sales Performance Trend"]}),(0,b.jsx)("div",{className:"space-y-5",children:[{label:"Morning Rush (7am - 10am)",value:45,color:"bg-blue-500"},{label:"Lunch Break (11am - 2pm)",value:85,color:"bg-orange-500"},{label:"Afternoon Chill (3pm - 6pm)",value:65,color:"bg-purple-500"},{label:"Evening Peak (7pm - 10pm)",value:92,color:"bg-green-500"}].map(a=>(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between text-[10px] font-bold text-slate-600 uppercase",children:[(0,b.jsx)("span",{children:a.label}),(0,b.jsxs)("span",{children:[a.value,"% busy"]})]}),(0,b.jsx)("div",{className:"h-2 w-full bg-slate-200 rounded-full overflow-hidden shadow-inner",children:(0,b.jsx)("div",{className:`h-full ${a.color} transition-all duration-1000`,style:{width:`${a.value}%`}})})]},a.label))})]})]}),(0,b.jsxs)("div",{className:"bg-white border border-slate-200 rounded-2xl p-6 shadow-sm flex flex-col",children:[(0,b.jsx)("h4",{className:"font-black text-xs uppercase tracking-widest text-slate-400 mb-6",children:"Popular Products Ranking"}),(0,b.jsxs)("div",{className:"flex-1 space-y-4 overflow-y-auto pr-2",children:[(g?.topProducts||[]).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-4 group",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-lg bg-slate-50 flex items-center justify-center font-black text-xs text-slate-400 group-hover:bg-primary group-hover:text-white transition-all shadow-sm",children:c+1}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex justify-between items-end mb-1",children:[(0,b.jsx)("span",{className:"font-bold text-sm text-slate-700",children:a.name}),(0,b.jsxs)("span",{className:"text-[10px] font-black text-primary uppercase",children:["â‚±",Number(a.revenue||0).toFixed(0)]})]}),(0,b.jsx)("div",{className:"h-1.5 w-full bg-slate-100 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-primary/40 group-hover:bg-primary transition-all duration-700",style:{width:`${Math.min(100,a.qty_sold/20*100)}%`}})}),(0,b.jsxs)("p",{className:"text-[9px] text-slate-400 font-bold mt-1 uppercase tracking-tighter",children:[a.qty_sold," Units Sold This period"]})]})]},a.id)),(!g?.topProducts||0===g.topProducts.length)&&(0,b.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-slate-300 py-20",children:[(0,b.jsx)(I,{className:"w-12 h-12 mb-3 opacity-20"}),(0,b.jsx)("p",{className:"text-xs font-black uppercase tracking-widest",children:"No Sales Data"})]})]})]})]}),"inventory"===a&&(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"p-6 bg-blue-50 rounded-2xl border border-blue-100 shadow-sm",children:[(0,b.jsx)("p",{className:"text-[10px] font-black text-blue-400 uppercase tracking-widest mb-1",children:"Total Catalog Items"}),(0,b.jsx)("p",{className:"text-4xl font-black text-blue-600",children:g?.topProducts?.length??0})]}),(0,b.jsxs)("div",{className:"p-6 bg-green-50 rounded-2xl border border-green-100 shadow-sm",children:[(0,b.jsx)("p",{className:"text-[10px] font-black text-green-400 uppercase tracking-widest mb-1",children:"Healthy Stock Level"}),(0,b.jsx)("p",{className:"text-4xl font-black text-green-600",children:"80%"})]})]}),k&&(0,b.jsx)("p",{className:"mt-6 p-4 bg-red-50 text-red-600 rounded-xl text-xs font-bold border border-red-100",children:k})]})]})}let Y=q("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Z=q("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),$=q("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),_=q("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);function aa({products:a,orders:c,inventoryLogs:d}){let e=m(),{ingredients:f}=l(),g=(c.orders||[]).filter(a=>new Date(a.created_at).toDateString()===new Date().toDateString()).reduce((a,b)=>a+(Number(b.total_amount)||0),0),h=(c.orders||[]).filter(a=>new Date(a.created_at).toDateString()===new Date().toDateString()).length,i=e.getLowStockItems(),j=(f||[]).filter(a=>Number(a.stock_quantity)<=Number(a.reorder_level)),k=i.length+j.length,n=e.menuItems.slice().sort((a,b)=>a.stock-b.stock).slice(0,3);return(0,b.jsxs)("div",{className:"p-8 max-w-[1600px] mx-auto",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Dashboard Overview"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Summary of today's performance"})]}),(0,b.jsxs)("div",{className:"px-4 py-2 bg-primary/10 text-primary font-bold rounded-lg flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),"Live Updates"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,b.jsx)(ab,{label:"Total Sales",value:`â‚±${Number(g||0).toFixed(2)}`,icon:(0,b.jsx)(Y,{className:"w-6 h-6 text-blue-600"}),className:"bg-blue-50 border-blue-100"}),(0,b.jsx)(ab,{label:"Total Orders",value:h.toString(),icon:(0,b.jsx)(Z,{className:"w-6 h-6 text-green-600"}),className:"bg-green-50 border-green-100"}),(0,b.jsx)(ab,{label:"Low Stock Items",value:k.toString(),icon:(0,b.jsx)($,{className:"w-6 h-6 text-yellow-600"}),className:"bg-yellow-50 border-yellow-100"}),(0,b.jsx)(ab,{label:"Total Products",value:e.menuItems.length.toString(),icon:(0,b.jsx)(I,{className:"w-6 h-6 text-purple-600"}),className:"bg-purple-50 border-purple-100"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-8",children:[(0,b.jsxs)("div",{className:"bg-card border border-border rounded-xl p-6 shadow-sm",children:[(0,b.jsxs)("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[(0,b.jsx)(_,{className:"w-5 h-5 text-primary"}),"Top Selling Products"]}),(0,b.jsx)("div",{className:"space-y-4",children:n.map((a,c)=>(0,b.jsxs)("div",{className:"flex justify-between items-center pb-4 border-b border-border last:border-b-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center font-bold text-muted-foreground",children:["#",c+1]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-bold text-foreground",children:a.name}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-0.5",children:["Stock Remaining: ",a.stock]})]})]}),(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)("p",{className:"text-sm font-medium text-muted-foreground",children:[a.sizes.length," Variants"]})})]},a.id))})]}),(0,b.jsxs)("div",{className:"bg-card border border-border rounded-xl p-6 shadow-sm",children:[(0,b.jsxs)("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[(0,b.jsx)(J,{className:"w-5 h-5 text-primary"}),"Recent Orders"]}),(0,b.jsx)("div",{className:"space-y-4",children:(c.orders||[]).slice(0,3).map(a=>(0,b.jsxs)("div",{className:"flex justify-between items-center pb-4 border-b border-border last:border-b-0 hover:bg-muted/50 transition-colors rounded-lg px-2 -mx-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"font-bold text-foreground flex items-center gap-2",children:[a.order_number,(0,b.jsx)("span",{className:"text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded-full font-medium",children:"Completed"})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:a.customer_name})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"font-bold text-lg text-primary",children:["â‚±",Number(a.total_amount||0).toFixed(2)]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground capitalize",children:a.payment_method})]})]},a.id))})]}),(0,b.jsxs)("div",{className:"bg-card border border-border rounded-xl p-6 shadow-sm",children:[(0,b.jsxs)("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[(0,b.jsx)($,{className:"w-5 h-5 text-yellow-500"}),"Low Stock Alert"]}),0===k?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground opacity-50 bg-muted/20 rounded-xl border border-dashed",children:[(0,b.jsx)(I,{className:"w-12 h-12 mb-3"}),(0,b.jsx)("p",{className:"font-bold",children:"All items are well-stocked"})]}):(0,b.jsxs)("div",{className:"space-y-4 max-h-[400px] overflow-y-auto pr-2",children:[i.map(a=>(0,b.jsxs)("div",{className:"p-4 bg-yellow-50/50 border border-yellow-200/50 rounded-xl flex justify-between items-center group hover:bg-yellow-50 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-orange-100 flex items-center justify-center text-orange-600 font-bold shrink-0 text-[10px]",children:"PROD"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-bold text-sm text-foreground",children:a.name}),(0,b.jsx)("p",{className:"text-[10px] text-muted-foreground mt-0.5 font-medium uppercase tracking-tighter",children:"Stock Level Low"})]})]}),(0,b.jsxs)("div",{className:"px-3 py-1.5 bg-white border border-yellow-200 rounded-lg text-xs font-black text-yellow-700 shadow-sm",children:[a.stock," LEFT"]})]},`m-${a.id}`)),j.map(a=>(0,b.jsxs)("div",{className:"p-4 bg-red-50/50 border border-red-200/50 rounded-xl flex justify-between items-center group hover:bg-red-50 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center text-red-600 font-bold shrink-0 text-[10px]",children:"INGR"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-bold text-sm text-foreground",children:a.name}),(0,b.jsx)("p",{className:"text-[10px] text-muted-foreground mt-0.5 font-medium uppercase tracking-tighter",children:"Critical Resource"})]})]}),(0,b.jsxs)("div",{className:"px-3 py-1.5 bg-white border border-red-200 rounded-lg text-xs font-black text-red-700 shadow-sm animate-pulse",children:[a.stock_quantity," ",a.unit]})]},`i-${a.id}`))]})]}),(0,b.jsxs)("div",{className:"bg-card border border-border rounded-xl p-6 shadow-sm",children:[(0,b.jsxs)("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[(0,b.jsx)(x,{className:"w-5 h-5 text-primary"}),"Payment Methods"]}),(0,b.jsx)("div",{className:"space-y-3",children:["Cash","GCash","Card"].map(a=>{let d=c.orders.filter(b=>(b.payment_method??b.paymentMethod??"").toString().toLowerCase().replace("-","")===a.toLowerCase().replace("-","")).length;return(0,b.jsxs)("div",{className:"flex justify-between items-center p-3 bg-muted/30 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"w-8 h-8 rounded-full bg-primary/5 flex items-center justify-center",children:["Cash"===a&&(0,b.jsx)(Y,{className:"w-4 h-4 text-primary"}),"GCash"===a&&(0,b.jsx)(x,{className:"w-4 h-4 text-blue-500"}),"Card"===a&&(0,b.jsx)(x,{className:"w-4 h-4 text-purple-500"})]}),(0,b.jsx)("span",{className:"font-bold text-foreground",children:a})]}),(0,b.jsxs)("span",{className:"font-medium text-muted-foreground",children:[d," transactions"]})]},a)})})]})]})]})}function ab({label:a,value:c,icon:d,className:e}){return(0,b.jsxs)("div",{className:`p-6 rounded-xl border flex items-start justify-between ${e}`,children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-foreground/60",children:a}),(0,b.jsx)("p",{className:"text-3xl font-black text-foreground mt-2 tracking-tight",children:c})]}),(0,b.jsx)("div",{className:"p-3 bg-white/50 rounded-xl backdrop-blur-sm",children:d})]})}let ac=q("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),ad=q("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),ae=q("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),af=q("ScrollText",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]);function ag({onLogout:a,currentUser:d}){let[e,f]=(0,c.useState)("dashboard"),h=i(),l=j(),m=function(){let[a,b]=(0,c.useState)(g),d=(0,c.useCallback)(c=>{let d={...c,id:Math.max(...a.map(a=>a.id),0)+1};return b([...a,d]),d},[a]),e=(0,c.useCallback)((c,d)=>{b(a.map(a=>a.id===c?{...a,...d}:a))},[a]),f=(0,c.useCallback)(c=>{b(a.filter(a=>a.id!==c))},[a]);return{users:a,addUser:d,updateUser:e,deleteUser:f}}(),n=k(),o=function(){let[a,b]=(0,c.useState)([]),[d,e]=(0,c.useState)(!0),f=(0,c.useCallback)(async()=>{try{e(!0);let a=await fetch("/api/activity-logs");if(!a.ok)throw Error("Failed to fetch activity logs");let c=await a.json();b(c||[])}catch(a){console.error("[ActivityLogs] Error fetching logs:",a)}finally{e(!1)}},[]);return(0,c.useEffect)(()=>{f();let a=setInterval(f,5e3);return()=>clearInterval(a)},[f]),{logs:a,addLog:(0,c.useCallback)(async a=>{try{await fetch("/api/activity-logs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),f()}catch(a){console.error(a)}},[f]),loading:d,refetch:f}}(),p=[{id:"dashboard",label:"Dashboard",icon:(0,b.jsx)(ac,{className:"w-5 h-5"})},{id:"products",label:"Products",icon:(0,b.jsx)(I,{className:"w-5 h-5"})},{id:"inventory",label:"Inventory",icon:(0,b.jsx)(U,{className:"w-5 h-5"})},{id:"orders",label:"Orders",icon:(0,b.jsx)(Z,{className:"w-5 h-5"})},{id:"reports",label:"Reports",icon:(0,b.jsx)(ad,{className:"w-5 h-5"})},{id:"users",label:"Users",icon:(0,b.jsx)(ae,{className:"w-5 h-5"})},{id:"logs",label:"Activity Logs",icon:(0,b.jsx)(af,{className:"w-5 h-5"})}];return(0,b.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,b.jsxs)("div",{className:"w-64 bg-card border-r border-border flex flex-col shadow-xl z-20",children:[(0,b.jsxs)("div",{className:"p-6 border-b border-border bg-primary/5 flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg text-primary",children:(0,b.jsx)(C,{className:"w-6 h-6"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-bold text-foreground tracking-tight",children:"Sodalicious"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground font-medium",children:"Manager Portal"})]})]}),(0,b.jsx)("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:p.map(a=>(0,b.jsxs)("button",{onClick:()=>f(a.id),className:`w-full text-left px-4 py-3 rounded-xl transition-all font-medium flex items-center gap-3 ${e===a.id?"bg-primary text-primary-foreground shadow-lg shadow-primary/20 scale-[1.02]":"text-muted-foreground hover:bg-muted hover:text-foreground"}`,children:[a.icon,a.label]},a.id))}),(0,b.jsx)("div",{className:"p-4 border-t border-border",children:(0,b.jsxs)("button",{onClick:a,className:"w-full px-4 py-3 bg-destructive/10 text-destructive hover:bg-destructive hover:text-destructive-foreground rounded-xl font-semibold transition-all flex items-center justify-center gap-2",children:[(0,b.jsx)(s,{className:"w-5 h-5"}),"Logout"]})})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-auto bg-background",children:["dashboard"===e&&(0,b.jsx)(aa,{products:h,orders:l,inventoryLogs:n}),"products"===e&&(0,b.jsx)(Q,{products:h}),"inventory"===e&&(0,b.jsx)(R,{products:h,inventoryLogs:n}),"orders"===e&&(0,b.jsx)(V,{orders:l}),"reports"===e&&(0,b.jsx)(X,{}),"users"===e&&(0,b.jsx)(W,{users:m}),"logs"===e&&(0,b.jsx)(ah,{logs:o.logs})]})]})}function ah({logs:a}){return a&&0!==a.length?(0,b.jsxs)("div",{className:"p-8 max-w-[1600px] mx-auto",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,b.jsxs)("h2",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[(0,b.jsx)(af,{className:"w-8 h-8 text-primary"}),"Activity Logs"]}),(0,b.jsx)("div",{className:"px-4 py-2 bg-primary/10 text-primary rounded-lg text-xs font-bold animate-pulse",children:"Monitoring Live Events"})]}),(0,b.jsx)("div",{className:"bg-card border border-border rounded-xl overflow-hidden shadow-xl",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-muted/50 border-b border-border",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground text-xs uppercase tracking-widest",children:"Type"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground text-xs uppercase tracking-widest",children:"Action"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground text-xs uppercase tracking-widest",children:"Details"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground text-xs uppercase tracking-widest",children:"User"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground text-xs uppercase tracking-widest",children:"Timestamp"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-border",children:a.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-muted/50 transition-colors",children:[(0,b.jsx)("td",{className:"px-6 py-4 font-semibold text-foreground capitalize",children:(0,b.jsx)("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded-md text-[10px] font-black uppercase",children:a.entity_type||"Event"})}),(0,b.jsx)("td",{className:"px-6 py-4 text-foreground font-bold text-sm",children:a.action_type?.replace("_"," ")||a.action}),(0,b.jsx)("td",{className:"px-6 py-4 text-muted-foreground text-xs font-mono max-w-md truncate",children:"string"==typeof a.details?a.details:JSON.stringify(a.details)}),(0,b.jsx)("td",{className:"px-6 py-4 text-foreground font-medium text-sm",children:a.user_name||"System"}),(0,b.jsx)("td",{className:"px-6 py-4 text-muted-foreground text-sm font-medium",children:a.created_at?new Date(a.created_at).toLocaleString():"Just now"})]},a.id))})]})})]}):(0,b.jsxs)("div",{className:"p-8 max-w-[1600px] mx-auto flex flex-col items-center justify-center min-h-[400px] text-center",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-muted rounded-full flex items-center justify-center mb-4",children:(0,b.jsx)(af,{className:"w-10 h-10 text-muted-foreground"})}),(0,b.jsx)("h3",{className:"text-xl font-bold",children:"No activity logs found"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Actions like new orders and inventory changes will appear here."})]})}function ai({onLogout:a,currentUser:d}){i();let e=k(),f=m(),[g,h]=(0,c.useState)("inventory");return(0,b.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,b.jsxs)("div",{className:"w-64 bg-sidebar border-r border-sidebar-border flex flex-col shadow-lg",children:[(0,b.jsxs)("div",{className:"p-6 border-b border-sidebar-border bg-sidebar-primary/10",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-sidebar-foreground tracking-tight",children:"Sodalicious"}),(0,b.jsx)("p",{className:"text-sm text-sidebar-foreground/70 font-medium",children:"Inventory Officer"})]}),(0,b.jsx)("nav",{className:"flex-1 p-4 space-y-1",children:[{id:"inventory",label:"Stock Management",icon:"ðŸ“¦"},{id:"logs",label:"Stock History",icon:"ðŸ“‹"}].map(a=>(0,b.jsxs)("button",{onClick:()=>h(a.id),className:`w-full text-left px-4 py-3 rounded-lg transition-all font-semibold flex items-center gap-3 ${g===a.id?"bg-sidebar-primary text-sidebar-primary-foreground shadow-md":"text-sidebar-foreground hover:bg-sidebar-accent"}`,children:[(0,b.jsx)("span",{className:"text-lg",children:a.icon}),a.label]},a.id))}),(0,b.jsx)("button",{onClick:a,className:"m-4 px-4 py-3 bg-destructive text-destructive-foreground rounded-lg hover:bg-destructive/90 font-semibold transition-all shadow-md",children:"Logout"})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-auto",children:["inventory"===g&&(0,b.jsx)(aj,{menuSync:f,inventoryLogs:e,currentUser:d}),"logs"===g&&(0,b.jsx)(ak,{inventoryLogs:e})]})]})}function aj({menuSync:a,inventoryLogs:d,currentUser:e}){let{ingredients:f,refetch:g}=l(),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)({quantity:0,type:"restock",reason:""}),m=f.filter(a=>a.stock_quantity<=a.reorder_level),n=async()=>{if(h){let a=f.find(a=>a.id===h);if(a){let b="restock"===j.type?j.quantity:-j.quantity;try{let c=await fetch("/api/inventory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ingredient_id:a.id,user_id:e?.id||1,log_type:j.type,quantity_changed:b,reason:j.reason})});c.ok?(console.log("[Inventory] API sync successful"),g(),d.refetch()):console.error("[Inventory] API sync failed:",await c.text())}catch(a){console.error("[Inventory] API error:",a)}i(null),k({quantity:0,type:"restock",reason:""})}}};return(0,b.jsxs)("div",{className:"p-8",children:[(0,b.jsx)("h2",{className:"text-3xl font-bold mb-8 text-foreground",children:"Ingredient Stock Management"}),m.length>0&&(0,b.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-5 mb-8",children:[(0,b.jsxs)("p",{className:"text-sm font-bold text-yellow-800",children:["âš  Low Stock Ingredients: ",m.length]}),(0,b.jsx)("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-3",children:m.map(a=>(0,b.jsxs)("p",{className:"text-sm text-yellow-700 font-medium",children:[a.name," (",a.stock_quantity," ",a.unit,")"]},a.id))})]}),h&&(0,b.jsxs)("div",{className:"bg-card border border-border rounded-xl p-6 mb-8 shadow-lg",children:[(0,b.jsx)("h3",{className:"text-xl font-bold mb-4 text-foreground",children:"Adjust Stock"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("select",{value:j.type,onChange:a=>k({...j,type:a.target.value}),className:"px-4 py-2 border border-border rounded-lg bg-card text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,b.jsx)("option",{value:"restock",children:"Restock"}),(0,b.jsx)("option",{value:"damage",children:"Damage"}),(0,b.jsx)("option",{value:"waste",children:"Waste"})]}),(0,b.jsx)("input",{type:"number",placeholder:"Quantity",value:j.quantity,onChange:a=>k({...j,quantity:Number.parseInt(a.target.value)}),className:"px-4 py-2 border border-border rounded-lg bg-card text-foreground focus:outline-none focus:ring-2 focus:ring-primary"}),(0,b.jsx)("textarea",{placeholder:"Reason",value:j.reason,onChange:a=>k({...j,reason:a.target.value}),className:"px-4 py-2 border border-border rounded-lg bg-card text-foreground col-span-2 focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,b.jsxs)("div",{className:"space-x-2 mt-4",children:[(0,b.jsx)("button",{onClick:n,className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 font-semibold transition-all",children:"Apply"}),(0,b.jsx)("button",{onClick:()=>i(null),className:"px-4 py-2 border border-border rounded-lg hover:bg-muted font-semibold transition-all text-foreground",children:"Cancel"})]})]}),(0,b.jsx)("div",{className:"bg-card border border-border rounded-xl overflow-hidden shadow-lg",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-primary/5 border-b border-border",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-foreground",children:"Ingredient"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-foreground",children:"Unit"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-foreground",children:"Stock"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-foreground",children:"Reorder Level"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-foreground",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-foreground",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-border",children:f.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-primary/5 transition-colors",children:[(0,b.jsx)("td",{className:"px-6 py-4 font-medium text-foreground",children:a.name}),(0,b.jsx)("td",{className:"px-6 py-4 text-foreground",children:a.unit}),(0,b.jsx)("td",{className:"px-6 py-4 text-foreground",children:a.stock_quantity}),(0,b.jsx)("td",{className:"px-6 py-4 text-foreground",children:a.reorder_level}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:`px-3 py-1 rounded-lg text-sm font-bold ${a.stock_quantity<=a.reorder_level?"bg-yellow-100 text-yellow-700 border border-yellow-200":"bg-green-100 text-green-700 border border-green-200"}`,children:a.stock_quantity<=a.reorder_level?"Low":"OK"})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("button",{onClick:()=>i(a.id),className:"px-3 py-1 bg-primary/10 text-primary rounded-lg text-sm hover:bg-primary/20 font-semibold transition-colors border border-primary/20",children:"Adjust"})})]},a.id))})]})})]})}function ak({inventoryLogs:a}){return(0,b.jsxs)("div",{className:"p-8",children:[(0,b.jsx)("h2",{className:"text-3xl font-bold mb-8 text-foreground",children:"Stock History"}),(0,b.jsx)("div",{className:"bg-card border border-border rounded-xl overflow-hidden shadow-lg",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-primary/5 border-b border-border",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-foreground",children:"Product"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-foreground",children:"Type"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-foreground",children:"Quantity"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-foreground",children:"Reason"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-foreground",children:"Officer"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-foreground",children:"Timestamp"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-border",children:a.logs.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-primary/5 transition-colors",children:[(0,b.jsx)("td",{className:"px-6 py-4 text-foreground",children:a.ingredient_name||a.productName||"Unknown"}),(0,b.jsx)("td",{className:"px-6 py-4 capitalize font-semibold text-foreground",children:a.log_type||a.type}),(0,b.jsx)("td",{className:"px-6 py-4 font-bold text-foreground",children:a.quantity_changed||a.quantity}),(0,b.jsx)("td",{className:"px-6 py-4 text-foreground",children:a.reason||"-"}),(0,b.jsx)("td",{className:"px-6 py-4 text-foreground",children:a.user_name||a.userName}),(0,b.jsx)("td",{className:"px-6 py-4 text-muted-foreground text-sm",children:a.created_at?new Date(a.created_at).toLocaleString():a.timestamp})]},a.id))})]})})]})}function al(){let[a,d]=(0,c.useState)(!1),[e,f]=(0,c.useState)("cashier"),[g,h]=(0,c.useState)(null),i=()=>{g?.id&&fetch("/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:g.id})}).catch(console.error),d(!1),h(null)};return a?(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:["cashier"===e&&(0,b.jsx)(K,{onLogout:i,currentUser:g}),"manager"===e&&(0,b.jsx)(ag,{onLogout:i,currentUser:g}),"inventory"===e&&(0,b.jsx)(ai,{onLogout:i,currentUser:g})]}):(0,b.jsx)(L,{onLogin:(a,b)=>{f(a),h(b),d(!0)}})}a.s(["default",()=>al],60350)}];

//# sourceMappingURL=app_page_tsx_55b2e5ee._.js.map