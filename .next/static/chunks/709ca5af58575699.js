(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var t=e.i(43476),s=e.i(71645);let r=[{id:"HC001",name:"Americano",category:"Hot Coffee",categoryCode:"HC",sizes:[{size:"S",price:45},{size:"M",price:55},{size:"L",price:65}],description:"Classic Italian espresso with hot water",stock:40,minThreshold:10},{id:"HC002",name:"CafÃ© Latte",category:"Hot Coffee",categoryCode:"HC",sizes:[{size:"S",price:55},{size:"M",price:65},{size:"L",price:75}],description:"Smooth espresso with steamed milk",stock:40,minThreshold:10},{id:"HC003",name:"Cappuccino",category:"Hot Coffee",categoryCode:"HC",sizes:[{size:"S",price:55},{size:"M",price:65},{size:"L",price:75}],description:"Espresso with equal parts milk and foam",stock:40,minThreshold:10},{id:"HC004",name:"Caramel Macchiato",category:"Hot Coffee",categoryCode:"HC",sizes:[{size:"S",price:60},{size:"M",price:70},{size:"L",price:80}],description:"Rich espresso with caramel and steamed milk",stock:40,minThreshold:8},{id:"HC005",name:"Mocha",category:"Hot Coffee",categoryCode:"HC",sizes:[{size:"S",price:60},{size:"M",price:70},{size:"L",price:80}],description:"Espresso, steamed milk, and chocolate",stock:40,minThreshold:8},{id:"IC001",name:"Iced Americano",category:"Iced Coffee",categoryCode:"IC",sizes:[{size:"R",price:55},{size:"L",price:65}],description:"Cold espresso with ice and water",stock:40,minThreshold:12},{id:"IC002",name:"Iced Latte",category:"Iced Coffee",categoryCode:"IC",sizes:[{size:"R",price:65},{size:"L",price:75}],description:"Smooth iced espresso with cold milk",stock:40,minThreshold:12},{id:"IC003",name:"Iced Caramel",category:"Iced Coffee",categoryCode:"IC",sizes:[{size:"R",price:70},{size:"L",price:80}],description:"Iced espresso with caramel and milk",stock:40,minThreshold:10},{id:"IC004",name:"Iced Vanilla Brew",category:"Iced Coffee",categoryCode:"IC",sizes:[{size:"R",price:65},{size:"L",price:75}],description:"Cold brew with vanilla essence",stock:40,minThreshold:12},{id:"IC005",name:"Iced Mocha",category:"Iced Coffee",categoryCode:"IC",sizes:[{size:"R",price:70},{size:"L",price:80}],description:"Iced espresso with chocolate and milk",stock:40,minThreshold:10},{id:"FR001",name:"Chocolate Frappe",category:"Frappes",categoryCode:"FR",sizes:[{size:"16oz",price:75}],description:"Blended chocolate frappe with whipped cream",stock:40,minThreshold:8},{id:"FR002",name:"Caramel Frappe",category:"Frappes",categoryCode:"FR",sizes:[{size:"16oz",price:75}],description:"Blended caramel frappe with whipped cream",stock:40,minThreshold:8},{id:"FR003",name:"Cookies & Cream Frappe",category:"Frappes",categoryCode:"FR",sizes:[{size:"16oz",price:80}],description:"Cookies and cream blended frappe",stock:40,minThreshold:8},{id:"FR004",name:"Matcha Frappe",category:"Frappes",categoryCode:"FR",sizes:[{size:"16oz",price:85}],description:"Blended matcha frappe with whipped cream",stock:40,minThreshold:6},{id:"FR005",name:"Coffee Jelly Frappe",category:"Frappes",categoryCode:"FR",sizes:[{size:"16oz",price:80}],description:"Coffee frappe with coffee jelly bits",stock:40,minThreshold:8},{id:"SS001",name:"Blue Lemon Soda",category:"Soda Series",categoryCode:"SS",sizes:[{size:"R",price:55},{size:"L",price:65}],description:"Refreshing blue lemon carbonated drink",stock:40,minThreshold:15},{id:"SS002",name:"Strawberry Fizz",category:"Soda Series",categoryCode:"SS",sizes:[{size:"R",price:55},{size:"L",price:65}],description:"Sweet strawberry flavored soda",stock:40,minThreshold:15},{id:"SS003",name:"Green Apple Soda",category:"Soda Series",categoryCode:"SS",sizes:[{size:"R",price:55},{size:"L",price:65}],description:"Crisp green apple soda",stock:40,minThreshold:15},{id:"SS004",name:"Lychee Pop Soda",category:"Soda Series",categoryCode:"SS",sizes:[{size:"R",price:60},{size:"L",price:70}],description:"Tropical lychee flavored soda",stock:40,minThreshold:12},{id:"SS005",name:"Mango Burst Soda",category:"Soda Series",categoryCode:"SS",sizes:[{size:"R",price:60},{size:"L",price:70}],description:"Tropical mango soda explosion",stock:40,minThreshold:12},{id:"YK001",name:"Blue Yakult",category:"Yakult Series",categoryCode:"YK",sizes:[{size:"R",price:60},{size:"L",price:70}],description:"Probiotic blue flavored Yakult",stock:40,minThreshold:10},{id:"YK002",name:"Strawberry Yakult",category:"Yakult Series",categoryCode:"YK",sizes:[{size:"R",price:60},{size:"L",price:70}],description:"Probiotic strawberry Yakult",stock:40,minThreshold:10},{id:"YK003",name:"Green Apple Yakult",category:"Yakult Series",categoryCode:"YK",sizes:[{size:"R",price:60},{size:"L",price:70}],description:"Probiotic green apple Yakult",stock:40,minThreshold:10},{id:"YK004",name:"Mango Yakult",category:"Yakult Series",categoryCode:"YK",sizes:[{size:"R",price:60},{size:"L",price:70}],description:"Probiotic mango Yakult",stock:40,minThreshold:10},{id:"YK005",name:"Lychee Yakult",category:"Yakult Series",categoryCode:"YK",sizes:[{size:"R",price:60},{size:"L",price:70}],description:"Probiotic lychee Yakult",stock:40,minThreshold:10},{id:"MC001",name:"Classic Matcha",category:"Matcha Series",categoryCode:"MC",sizes:[{size:"R",price:70},{size:"L",price:80}],description:"Traditional matcha powder blend",stock:40,minThreshold:8},{id:"MC002",name:"Matcha Latte",category:"Matcha Series",categoryCode:"MC",sizes:[{size:"R",price:75},{size:"L",price:85}],description:"Matcha with steamed milk",stock:40,minThreshold:8},{id:"MC003",name:"Matcha Caramel",category:"Matcha Series",categoryCode:"MC",sizes:[{size:"R",price:80},{size:"L",price:90}],description:"Matcha with caramel drizzle",stock:40,minThreshold:6},{id:"MC004",name:"Matcha Vanilla",category:"Matcha Series",categoryCode:"MC",sizes:[{size:"R",price:75},{size:"L",price:85}],description:"Matcha with vanilla essence",stock:40,minThreshold:8},{id:"MC005",name:"Dirty Matcha",category:"Matcha Series",categoryCode:"MC",sizes:[{size:"R",price:85},{size:"L",price:95}],description:"Matcha with espresso shot",stock:40,minThreshold:6},{id:"CM001",name:"Fries + Soda",category:"Combo Meals",categoryCode:"CM",sizes:[{size:"Combo",price:99}],description:"Regular Fries + Regular Soda",stock:40,minThreshold:10},{id:"CM002",name:"Siomai Rice + Soda",category:"Combo Meals",categoryCode:"CM",sizes:[{size:"Combo",price:110}],description:"Siomai Rice + Regular Soda",stock:40,minThreshold:8},{id:"CM003",name:"Burger + Soda",category:"Combo Meals",categoryCode:"CM",sizes:[{size:"Combo",price:120}],description:"Cheeseburger + Regular Soda",stock:40,minThreshold:8},{id:"CM004",name:"Nuggets + Soda",category:"Combo Meals",categoryCode:"CM",sizes:[{size:"Combo",price:115}],description:"6pcs Nuggets + Regular Soda",stock:40,minThreshold:8},{id:"CM005",name:"Hotdog + Soda",category:"Combo Meals",categoryCode:"CM",sizes:[{size:"Combo",price:99}],description:"Hotdog Sandwich + Regular Soda",stock:40,minThreshold:10},{id:"SN001",name:"Fries",category:"Snacks",categoryCode:"SN",sizes:[{size:"Reg",price:45},{size:"Lrg",price:60}],description:"Crispy golden fries",stock:40,minThreshold:15},{id:"SN002",name:"Kropek",category:"Snacks",categoryCode:"SN",sizes:[{size:"Solo",price:45}],description:"Crispy prawn cracker",stock:40,minThreshold:10},{id:"SN003",name:"Nachos",category:"Snacks",categoryCode:"SN",sizes:[{size:"Solo",price:60}],description:"Cheese nachos with dip",stock:40,minThreshold:8},{id:"SN004",name:"Cheese Sticks",category:"Snacks",categoryCode:"SN",sizes:[{size:"6 pcs",price:50}],description:"Golden fried cheese sticks",stock:40,minThreshold:10},{id:"SN005",name:"Siomai Rice",category:"Snacks",categoryCode:"SN",sizes:[{size:"Solo",price:55}],description:"Siomai served with rice",stock:40,minThreshold:10}],a=[{code:"HC",name:"Hot Coffee",emoji:"â˜•"},{code:"IC",name:"Iced Coffee",emoji:"ðŸ§Š"},{code:"FR",name:"Frappes",emoji:"ðŸ¥¤"},{code:"SS",name:"Soda Series",emoji:"ðŸ«§"},{code:"YK",name:"Yakult Series",emoji:"ðŸ§ƒ"},{code:"MC",name:"Matcha Series",emoji:"ðŸµ"},{code:"CM",name:"Combo Meals",emoji:"ðŸ±"},{code:"SN",name:"Snacks",emoji:"ðŸŸ"}],l=r.flatMap(e=>e.sizes.map((t,s)=>({id:`${e.id}-${t.size}`,baseId:e.id,name:e.name,size:t.size,price:t.price,category:e.category,categoryCode:e.categoryCode,stock:e.stock,minThreshold:e.minThreshold,description:e.description,image:e.image}))).map(e=>({id:e.id,baseId:e.baseId,name:e.name,price:e.price,size:e.size,category:e.category,categoryCode:e.categoryCode,stock:e.stock,minThreshold:e.minThreshold,description:e.description,image:e.image})),i=[{id:1,name:"Maria Santos",username:"maria",password:"password",role:"cashier",status:"Active",lastLogin:"2025-11-11 09:30"},{id:2,name:"Juan Dela Cruz",username:"juan",password:"password",role:"inventory",status:"Active",lastLogin:"2025-11-11 08:00"},{id:3,name:"Rosa Reyes",username:"rosa",password:"password",role:"cashier",status:"Inactive"},{id:4,name:"Admin Manager",username:"admin",password:"password",role:"manager",status:"Active",lastLogin:"2025-11-11 07:00"}],d={async getProducts(e){let t=new URL("/api/products",window.location.origin);e&&t.searchParams.append("category",e);let s=await fetch(t);if(!s.ok)throw Error("Failed to fetch products");return s.json()},async getOrders(){let e=await fetch("/api/orders");if(!e.ok)throw Error("Failed to fetch orders");return e.json()},async createOrder(e){let t=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create order");return t.json()},async createProduct(e){let t=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create product");return t.json()},async updateProduct(e,t){let s=await fetch(`/api/products/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw Error("Failed to update product");return s.json()},async deleteProduct(e){let t=await fetch(`/api/products/${e}`,{method:"DELETE"});if(!t.ok)throw Error("Failed to delete product");return t.json()},async logInventoryChange(e){let t=await fetch("/api/inventory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to log inventory change");return t.json()},async getInventoryLogs(){let e=await fetch("/api/inventory");if(!e.ok)throw Error("Failed to fetch inventory logs");return e.json()},async getActivityLogs(){let e=await fetch("/api/activity-logs");if(!e.ok)throw Error("Failed to fetch activity logs");return e.json()},async logActivity(e){let t=await fetch("/api/activity-logs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to log activity");return t.json()}};function o(){let[e,t]=(0,s.useState)(l),r=(0,s.useCallback)(s=>{let r={...s,id:Math.max(...e.map(e=>Number(e.id)),0)+1};return t([...e,r]),r},[e]),a=(0,s.useCallback)((s,r)=>{t(e.map(e=>e.id===s?{...e,...r}:e))},[e]),i=(0,s.useCallback)(s=>{t(e.filter(e=>e.id!==s))},[e]),d=(0,s.useCallback)(()=>e.filter(e=>e.stock<=e.minThreshold),[e]);return{products:e,addProduct:r,updateProduct:a,deleteProduct:i,getLowStockItems:d}}function n(){let[e,t]=(0,s.useState)([]),[r,a]=(0,s.useState)(!0),[l,i]=(0,s.useState)(null),o=(0,s.useCallback)(async()=>{try{a(!0);let e=await d.getOrders();t(e),i(null)}catch(e){console.error("[v0] Error fetching orders:",e),i(e instanceof Error?e.message:"Failed to fetch orders")}finally{a(!1)}},[]);return(0,s.useEffect)(()=>{o();let e=setInterval(()=>{o()},2e3);return()=>clearInterval(e)},[o]),{orders:e,loading:r,error:l,createOrder:(0,s.useCallback)(async e=>{try{let s=await d.createOrder(e);return t(e=>[s,...e]),s}catch(e){throw console.error("[v0] Error creating order:",e),e}},[]),refetch:o}}function c(){let[e,t]=(0,s.useState)([]),[r,a]=(0,s.useState)(!0),l=(0,s.useCallback)(async()=>{try{a(!0);let e=await fetch("/api/inventory");if(!e.ok)throw Error("Failed to fetch inventory logs");let s=await e.json();t(s||[])}catch(e){console.error("[Inventory] Error fetching logs:",e)}finally{a(!1)}},[]);(0,s.useEffect)(()=>{l();let e=setInterval(()=>{l()},2e3);return()=>clearInterval(e)},[l]);let i=(0,s.useCallback)(s=>{let r={...s,id:Math.max(...e.map(e=>e.id),0)+1};t([...e,r])},[e]);return{logs:e,addLog:i,refetch:l,loading:r}}function x(){let[e,t]=(0,s.useState)([]),[r,a]=(0,s.useState)(!0),l=(0,s.useCallback)(async()=>{try{a(!0);let e=await fetch("/api/ingredients");if(!e.ok)throw Error("Failed to fetch");let s=await e.json();t(s||[])}catch(e){console.error("[useIngredients] error",e)}finally{a(!1)}},[]);return(0,s.useEffect)(()=>{l();let e=setInterval(l,5e3);return()=>clearInterval(e)},[l]),{ingredients:e,loading:r,refetch:l}}function m(){let[e,t]=(0,s.useState)(r.map(e=>({id:e.id,name:e.name,category:e.category,categoryCode:e.categoryCode,sizes:e.sizes,description:e.description,stock:e.stock,minThreshold:e.minThreshold,image:e.image,bottleneck_ingredient:e.bottleneck_ingredient,ingredients_list:e.ingredients_list}))),[l]=(0,s.useState)(a),[i,d]=(0,s.useState)("All"),o=(0,s.useCallback)(t=>"All"===t?e:e.filter(e=>e.category===t),[e]),n=(0,s.useCallback)(t=>e.find(e=>e.id===t),[e]),c=(0,s.useCallback)(()=>["All",...l.map(e=>e.name)],[l]),x=(0,s.useCallback)(e=>{let t=l.find(t=>t.name===e);return t?.emoji||"ðŸ“Œ"},[l]),m=(0,s.useCallback)(()=>e.filter(e=>e.stock<=e.minThreshold),[e]),p=(0,s.useCallback)(async()=>{try{let e=await fetch(`/api/products?t=${Date.now()}`);if(!e.ok)return;let s=await e.json(),r=new Map(s.map(e=>[e.name,e]));t(e=>e.map(e=>{let t=r.get(e.name);return{...e,stock:t?Number(t.stock_quantity):e.stock,bottleneck_ingredient:t?.bottleneck_ingredient,ingredients_list:t?.ingredients_list}}))}catch(e){console.warn("[useMenuSync] poll error",e)}},[]);return(0,s.useEffect)(()=>{let e=()=>{p()};window.addEventListener("menu:update",e),p();let t=setInterval(p,5e3);return()=>{window.removeEventListener("menu:update",e),clearInterval(t)}},[p]),{menuItems:e,categories:l,selectedCategory:i,setSelectedCategory:d,getMenuByCategory:o,getMenuItemById:n,getAllCategories:c,getCategoryEmoji:x,getLowStockItems:m,refresh:p}}let p=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim();var h={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let u=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:l="",children:i,iconNode:d,...o},n)=>(0,s.createElement)("svg",{ref:n,...h,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:p("lucide",l),...o},[...d.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(i)?i:[i]])),b=(e,t)=>{let r=(0,s.forwardRef)(({className:r,...a},l)=>(0,s.createElement)(u,{ref:l,iconNode:t,className:p(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,r),...a}));return r.displayName=`${e}`,r},g=b("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),f=b("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),y=b("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),j=b("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),N=b("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),v=b("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),w=b("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),k=b("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),C=b("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),S=b("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),z=b("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]),M=b("CupSoda",[["path",{d:"m6 8 1.75 12.28a2 2 0 0 0 2 1.72h4.54a2 2 0 0 0 2-1.72L18 8",key:"8166m8"}],["path",{d:"M5 8h14",key:"pcz4l3"}],["path",{d:"M7 15a6.47 6.47 0 0 1 5 0 6.47 6.47 0 0 0 5 0",key:"yjz344"}],["path",{d:"m12 8 1-6h2",key:"3ybfa4"}]]),T=b("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]),L=b("IceCreamCone",[["path",{d:"m7 11 4.08 10.35a1 1 0 0 0 1.84 0L17 11",key:"1v6356"}],["path",{d:"M17 7A5 5 0 0 0 7 7",key:"151p3v"}],["path",{d:"M17 7a2 2 0 0 1 0 4H7a2 2 0 0 1 0-4",key:"1sdaij"}]]),_=b("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),I=b("GlassWater",[["path",{d:"M15.2 22H8.8a2 2 0 0 1-2-1.79L5 3h14l-1.81 17.21A2 2 0 0 1 15.2 22Z",key:"48rfw3"}],["path",{d:"M6 12a5 5 0 0 1 6 0 5 5 0 0 0 6 0",key:"mjntcy"}]]),A=b("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),R=b("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),F=b("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);function O({onLogout:e,currentUser:a}){let l=m(),i=n(),[d,o]=(0,s.useState)([]),[c,x]=(0,s.useState)("All"),[p,h]=(0,s.useState)(""),[u,b]=(0,s.useState)("cash"),[O,P]=(0,s.useState)(""),[q,E]=(0,s.useState)(!1),[D,H]=(0,s.useState)(!1),[$,U]=(0,s.useState)(null),[Y,V]=(0,s.useState)(!1),[K,X]=(0,s.useState)(!1),[B,J]=(0,s.useState)(!1),[G,W]=(0,s.useState)(null),Z=l.getAllCategories(),Q=l.getMenuByCategory(c).filter(e=>e.name.toLowerCase().includes(p.toLowerCase())),ee=e=>{o(d.filter(t=>t.id!==e))},et=(e,t)=>{t<=0?ee(e):o(d.map(s=>s.id===e?{...s,quantity:t}:s))},es=d.reduce((e,t)=>e+t.price*t.quantity,0),er=.08*es,ea=es+er,el=async()=>{V(!0);try{let e={customer_name:O||"Walk-in",items:d.map(e=>({product_id:e.productId,name:e.name,size:e.size,price:e.price,quantity:e.quantity})),total_amount:ea,payment_method:u,user_id:a.id||1},t=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to process order");let s=await t.json();try{d.forEach(e=>{var t,s;let a;e.productId&&(t=e.productId.toString(),s=e.quantity,(a=r.find(e=>e.id===t))&&!(a.stock<s)&&(a.stock-=s))}),window.dispatchEvent(new CustomEvent("menu:update"))}catch(e){console.warn("[Menu] Local stock update failed:",e)}U({...s,items:d,subtotal:es,tax:er,total:ea}),E(!0),H(!1),o([]),P("")}catch(e){console.error("[POS] Checkout error:",e),alert("Failed to complete order. Please try again.")}finally{V(!1)}};return q&&$?(0,t.jsx)("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"max-w-md w-full bg-white rounded-3xl p-8 text-center shadow-2xl animate-in zoom-in duration-300",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,t.jsx)(_,{className:"w-10 h-10"})}),(0,t.jsx)("h2",{className:"text-3xl font-black text-slate-900 mb-2",children:"Order Confirmed"}),(0,t.jsx)("p",{className:"text-slate-500 mb-8 font-medium italic",children:"Transaction processed successfully"}),(0,t.jsxs)("div",{id:"receipt-content",className:"text-left bg-slate-50 border border-slate-100 p-6 rounded-2xl mb-8 font-mono text-sm shadow-inner",children:[(0,t.jsxs)("div",{className:"text-center border-b border-dashed border-slate-300 pb-4 mb-4",children:[(0,t.jsx)("h3",{className:"text-xl font-black uppercase text-slate-800",children:"Sodalicious"}),(0,t.jsxs)("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-1",children:["Order #",$.order_number||$.id]})]}),(0,t.jsx)("div",{className:"space-y-3 mb-6",children:$.items?.map(e=>(0,t.jsxs)("div",{className:"flex justify-between items-start text-xs text-slate-600",children:[(0,t.jsxs)("span",{className:"flex-1 pr-4",children:[e.quantity,"x ",e.name," (",e.size,")"]}),(0,t.jsxs)("span",{className:"font-bold text-slate-900",children:["â‚±",(e.price*e.quantity).toFixed(2)]})]},e.id))}),(0,t.jsxs)("div",{className:"border-t border-dashed border-slate-300 pt-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs text-slate-500",children:[(0,t.jsx)("span",{children:"Subtotal"}),(0,t.jsxs)("span",{children:["â‚±",$.subtotal?.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-slate-500",children:[(0,t.jsx)("span",{children:"Tax (8%)"}),(0,t.jsxs)("span",{children:["â‚±",$.tax?.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-lg font-black text-slate-900 pt-2",children:[(0,t.jsx)("span",{children:"TOTAL"}),(0,t.jsxs)("span",{className:"text-primary",children:["â‚±",$.total?.toFixed(2)]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("button",{onClick:()=>window.print(),className:"py-4 bg-slate-100 text-slate-600 rounded-xl font-black text-xs uppercase tracking-widest hover:bg-slate-200 transition-all flex items-center justify-center gap-2",children:[(0,t.jsx)(S,{className:"w-4 h-4"}),"Print"]}),(0,t.jsx)("button",{onClick:()=>E(!1),className:"py-4 bg-primary text-white rounded-xl font-black text-xs uppercase tracking-widest hover:opacity-90 transition-all shadow-lg shadow-primary/20",children:"Next Order"})]})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-slate-50 flex flex-col font-sans text-slate-900 pb-12",children:[(0,t.jsxs)("header",{className:"bg-white border-b border-slate-200 px-8 py-5 flex justify-between items-center sticky top-0 z-50 shadow-sm backdrop-blur-md bg-white/90",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-primary rounded-2xl flex items-center justify-center text-white shadow-lg",children:(0,t.jsx)(M,{className:"w-7 h-7"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl font-black tracking-tighter text-slate-900",children:["SODALICIOUS",(0,t.jsx)("span",{className:"text-primary",children:".CO"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),(0,t.jsxs)("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:["Active Terminal #",a.id]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsxs)("div",{className:"text-right flex flex-col items-end",children:[(0,t.jsx)("p",{className:"font-black text-sm text-slate-800 uppercase tracking-tight",children:a.name}),(0,t.jsx)("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Station Cashier"})]}),(0,t.jsx)("button",{onClick:e,className:"w-10 h-10 rounded-xl bg-red-50 text-red-500 flex items-center justify-center hover:bg-red-500 hover:text-white transition-all border border-red-100",children:(0,t.jsx)(f,{className:"w-5 h-5"})})]})]}),(0,t.jsxs)("main",{className:"flex gap-6 p-6 items-start",children:[(0,t.jsxs)("section",{className:"flex-1 flex flex-col min-w-0 bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-slate-100 space-y-5",children:[(0,t.jsxs)("div",{className:"relative max-w-md",children:[(0,t.jsx)(g,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-300"}),(0,t.jsx)("input",{type:"text",placeholder:"Search premium beverages...",value:p,onChange:e=>h(e.target.value),className:"w-full pl-12 pr-4 py-3.5 bg-slate-50 border-none rounded-2xl focus:ring-2 focus:ring-primary/20 transition-all font-medium text-slate-600 placeholder:text-slate-300 shadow-inner"})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:Z.map(e=>(0,t.jsx)("button",{onClick:()=>x(e),className:`px-5 py-3 rounded-xl font-black text-[10px] uppercase tracking-widest transition-all whitespace-nowrap border-2 ${c===e?"bg-primary border-primary text-white shadow-lg shadow-primary/20 scale-105":"bg-white border-slate-100 text-slate-400 hover:border-slate-200"}`,children:e},`cat-tab-${e}`))})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 p-6 bg-slate-50/10",children:Q.map(e=>{let s;return(0,t.jsxs)("button",{onClick:()=>{W(e),J(!0)},disabled:e.stock<=0,className:"group flex flex-col bg-white border border-slate-200 rounded-2xl p-4 transition-all duration-300 hover:shadow-xl hover:border-primary/40 relative text-left h-72 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsxs)("div",{className:"w-full h-32 bg-slate-50 rounded-xl mb-4 flex items-center justify-center border border-slate-100 group-hover:bg-primary/5 transition-colors shrink-0 relative overflow-hidden",children:[(0,t.jsx)("div",{className:"text-amber-900/20 group-hover:text-primary/30 group-hover:scale-110 transition-all duration-500 scale-[1.3]",children:(s=e.category.toLowerCase()).includes("soda")||s.includes("drink")||s.includes("beverage")?(0,t.jsx)(M,{className:"w-5 h-5"}):s.includes("coffee")||s.includes("espresso")?(0,t.jsx)(z,{className:"w-5 h-5"}):s.includes("tea")?(0,t.jsx)(I,{className:"w-5 h-5"}):s.includes("dessert")||s.includes("sweet")||s.includes("cake")?(0,t.jsx)(L,{className:"w-5 h-5"}):s.includes("food")||s.includes("snack")||s.includes("meal")?(0,t.jsx)(T,{className:"w-5 h-5"}):(0,t.jsx)(A,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:`absolute top-2 right-2 px-2.5 py-1 rounded-lg text-[9px] font-black z-10 shadow-sm ${e.stock<18?"bg-red-600 text-white animate-pulse":"bg-primary text-white"}`,children:[e.stock," LEFT"]}),e.stock<=0&&(0,t.jsx)("div",{className:"absolute inset-0 bg-white/90 backdrop-blur-sm flex items-center justify-center z-20",children:(0,t.jsx)("span",{className:"bg-red-600 text-white px-3 py-1.5 rounded-xl text-[10px] font-black tracking-widest uppercase -rotate-12 shadow-xl border-2 border-white/20",children:"STAY TUNED"})})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col justify-between overflow-hidden",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("h3",{className:"text-slate-900 font-bold text-sm leading-tight group-hover:text-primary transition-colors line-clamp-2",children:e.name}),(0,t.jsx)("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-tight truncate",children:e.description||"Crafted Experience"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100 mt-2",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-[8px] font-black text-slate-300 uppercase leading-none mb-1",children:"VARIANTS"}),(0,t.jsxs)("span",{className:"text-[10px] font-black text-slate-600",children:[e.sizes.length," Options"]})]}),(0,t.jsx)("div",{className:"w-9 h-9 rounded-xl bg-slate-50 text-slate-400 flex items-center justify-center group-hover:bg-primary group-hover:text-white transition-all shadow-sm border border-slate-100",children:(0,t.jsx)(y,{className:"w-5 h-5 stroke-[3]"})})]})]})]},e.id)})})]}),(0,t.jsxs)("section",{className:"w-[450px] flex flex-col bg-white rounded-3xl border border-slate-200 shadow-xl overflow-hidden sticky top-[108px] h-[calc(100vh-140px)]",children:[(0,t.jsxs)("div",{className:"p-3 bg-slate-50 border-b border-slate-200 flex gap-2",children:[(0,t.jsxs)("button",{onClick:()=>X(!1),className:`flex-1 py-4 text-[10px] font-black uppercase tracking-[0.2em] transition-all rounded-2xl flex items-center justify-center gap-2 ${!K?"bg-white text-primary shadow-md shadow-primary/5":"text-slate-400 hover:text-slate-600"}`,children:[(0,t.jsx)(v,{className:"w-4 h-4"})," Cart"]}),(0,t.jsxs)("button",{onClick:()=>X(!0),className:`flex-1 py-4 text-[10px] font-black uppercase tracking-[0.2em] transition-all rounded-2xl flex items-center justify-center gap-2 ${K?"bg-white text-primary shadow-md shadow-primary/5":"text-slate-400 hover:text-slate-600"}`,children:[(0,t.jsx)(F,{className:"w-4 h-4"})," History"]})]}),K?(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-5 bg-slate-50/50",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("h3",{className:"font-black text-[10px] text-slate-400 uppercase tracking-widest",children:"Transaction History"}),(0,t.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-600 text-[9px] font-black rounded-full animate-pulse",children:"LIVE"})]}),(i.orders||[]).slice(0,20).map(e=>(0,t.jsxs)("div",{className:"bg-white border border-slate-200 rounded-2xl p-5 hover:shadow-lg transition-all group border-l-4 border-l-primary",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-black text-[10px] text-slate-400 leading-none mb-1",children:["TXN-",e.id]}),(0,t.jsx)("p",{className:"font-black text-sm text-slate-800 uppercase tracking-tighter",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"text-sm font-black text-primary",children:["â‚±",Number(e.total_amount).toFixed(2)]}),(0,t.jsx)("p",{className:"text-[9px] font-bold text-slate-300 uppercase tracking-widest",children:e.payment_method||"CASH"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 pt-4 border-t border-slate-50",children:[(0,t.jsx)("div",{className:"w-7 h-7 rounded-full bg-slate-100 flex items-center justify-center",children:(0,t.jsx)(F,{className:"w-4 h-4 text-slate-300"})}),(0,t.jsx)("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tight",children:"Verified & Logged"})]})]},e.id))]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:0===d.length?(0,t.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-slate-200",children:[(0,t.jsx)("div",{className:"w-24 h-24 bg-slate-50 rounded-full flex items-center justify-center mb-6",children:(0,t.jsx)(R,{className:"w-12 h-12 opacity-20"})}),(0,t.jsx)("p",{className:"text-[10px] font-black uppercase tracking-[0.3em]",children:"Selection Empty"})]}):d.map(e=>(0,t.jsxs)("div",{className:"bg-white border border-slate-100 p-5 rounded-2xl hover:shadow-xl transition-all group flex gap-5 relative",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-amber-50 rounded-2xl flex items-center justify-center text-amber-700/40 shrink-0 border border-amber-100",children:(0,t.jsx)(z,{className:"w-8 h-8"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0 flex flex-col justify-between py-1",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsx)("p",{className:"font-black text-xs text-slate-800 uppercase tracking-tighter truncate",children:e.name}),(0,t.jsxs)("p",{className:"font-black text-primary text-sm",children:["â‚±",(e.price*e.quantity).toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,t.jsx)("p",{className:"text-[10px] text-slate-400 font-black uppercase",children:e.size}),(0,t.jsxs)("div",{className:"flex items-center gap-3 bg-slate-50 border border-slate-100 rounded-xl px-2.5 py-1.5 shadow-inner",children:[(0,t.jsx)("button",{onClick:()=>et(e.id,e.quantity-1),className:"text-slate-400 hover:text-primary active:scale-90 transition-all",children:(0,t.jsx)(j,{className:"w-3.5 h-3.5"})}),(0,t.jsx)("span",{className:"text-xs font-black w-4 text-center text-slate-700",children:e.quantity}),(0,t.jsx)("button",{onClick:()=>et(e.id,e.quantity+1),className:"text-slate-400 hover:text-primary active:scale-90 transition-all",children:(0,t.jsx)(y,{className:"w-3.5 h-3.5"})})]})]})]}),(0,t.jsx)("button",{onClick:()=>ee(e.id),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1.5 shadow-xl scale-0 group-hover:scale-100 transition-all border-4 border-white",children:(0,t.jsx)(N,{className:"w-3 h-3"})})]},e.id))}),(0,t.jsxs)("div",{className:"p-8 border-t border-slate-100 bg-white space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between text-[11px] font-black uppercase tracking-widest text-slate-400",children:[(0,t.jsx)("span",{children:"Subtotal"}),(0,t.jsxs)("span",{className:"text-slate-900",children:["â‚±",es.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-2xl font-black text-slate-900 pt-2 border-t border-slate-50",children:[(0,t.jsx)("span",{children:"TOTAL"}),(0,t.jsxs)("span",{className:"text-primary tracking-tighter",children:["â‚±",ea.toFixed(2)]})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-3",children:[{id:"cash",icon:C,label:"Cash",color:"text-green-600",bg:"bg-green-50",bdr:"border-green-200"},{id:"gcash",icon:k,label:"GCash",color:"text-blue-600",bg:"bg-blue-50",bdr:"border-blue-200"},{id:"card",icon:w,label:"Card",color:"text-purple-600",bg:"bg-purple-50",bdr:"border-purple-200"}].map(e=>(0,t.jsxs)("button",{onClick:()=>b(e.id),className:`p-4 rounded-2xl flex flex-col items-center gap-3 transition-all border-2 ${u===e.id?`${e.bg} ${e.bdr} ${e.color} scale-105 shadow-md`:"bg-white border-slate-100 text-slate-300 hover:border-slate-200"}`,children:[(0,t.jsx)(e.icon,{className:"w-6 h-6"}),(0,t.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:e.label})]},e.id))}),(0,t.jsx)("button",{onClick:()=>{0!==d.length&&("cash"===u?el():H(!0))},disabled:0===d.length||Y,className:"w-full py-5 bg-primary text-white rounded-3xl font-black text-sm uppercase tracking-[0.2em] hover:opacity-90 active:scale-[0.98] transition-all disabled:opacity-30 disabled:pointer-events-none shadow-2xl shadow-primary/30 flex items-center justify-center gap-3",children:Y?"Synchronizing...":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_,{className:"w-5 h-5"})," Execute Order"]})})]})]})]})]}),B&&G&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50 backdrop-blur-sm animate-in fade-in duration-300",children:(0,t.jsxs)("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full shadow-2xl scale-in-95 animate-in duration-300",children:[(0,t.jsx)("h3",{className:"text-2xl font-black text-slate-900 mb-2",children:G.name}),(0,t.jsx)("p",{className:"text-sm text-slate-400 font-bold uppercase tracking-tight mb-8",children:"Select Desired Variant"}),(0,t.jsx)("div",{className:"space-y-3 mb-8",children:G.sizes.map(e=>(0,t.jsxs)("button",{onClick:()=>(e=>{if(G){let t=`${G.id}-${e.size}`;d.find(e=>e.id===t)?o(d.map(e=>e.id===t?{...e,quantity:e.quantity+1}:e)):o([...d,{id:t,productId:G.id,name:G.name,size:e.size,price:e.price,quantity:1}])}J(!1),W(null)})(e),className:"w-full py-5 px-6 bg-slate-50 hover:bg-primary hover:text-white border border-slate-100 rounded-2xl font-black text-sm uppercase tracking-widest transition-all flex justify-between items-center group shadow-sm",children:[(0,t.jsx)("span",{children:e.size}),(0,t.jsxs)("span",{className:"font-black text-primary group-hover:text-white",children:["â‚±",e.price]})]},e.size))}),(0,t.jsx)("button",{onClick:()=>{J(!1),W(null)},className:"w-full py-4 text-slate-400 font-black text-xs uppercase tracking-[0.2em] hover:text-slate-600 transition-all",children:"Cancel"})]})}),D&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50 backdrop-blur-md",children:(0,t.jsxs)("div",{className:"bg-white rounded-[2.5rem] p-10 max-w-md w-full shadow-2xl",children:[(0,t.jsxs)("div",{className:"text-center mb-10",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-primary/10 text-primary rounded-full flex items-center justify-center mx-auto mb-6",children:"gcash"===u?(0,t.jsx)(k,{className:"w-8 h-8"}):(0,t.jsx)(w,{className:"w-8 h-8"})}),(0,t.jsx)("h3",{className:"text-3xl font-black text-slate-900 mb-2",children:"gcash"===u?"GCash Checkout":"Card Checkout"}),(0,t.jsxs)("p",{className:"text-slate-400 font-bold uppercase tracking-widest text-xs",children:["Awaiting Confirmation â€¢ â‚±",ea.toFixed(2)]})]}),"gcash"===u&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white p-8 rounded-[2rem] flex flex-col items-center justify-center border border-slate-100 shadow-xl shadow-blue-500/5",children:[(0,t.jsxs)("div",{className:"w-48 h-48 bg-[#007DFE] p-4 rounded-3xl relative overflow-hidden group",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-white opacity-0 group-hover:opacity-10 transition-opacity"}),(0,t.jsxs)("div",{className:"w-full h-full bg-white rounded-xl flex flex-col items-center justify-center p-2 border-4 border-[#007DFE]",children:[(0,t.jsx)("div",{className:"grid grid-cols-5 grid-rows-5 gap-1.5 w-full h-full",children:Array.from({length:25}).map((e,s)=>(0,t.jsx)("div",{className:`rounded-sm ${s%3==0||s%7==1||s%13==0?"bg-[#007DFE]":"bg-slate-100"}`},s))}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,t.jsx)("div",{className:"w-12 h-12 bg-[#007DFE] rounded-xl flex items-center justify-center shadow-2xl border-2 border-white",children:(0,t.jsx)("span",{className:"text-white font-black text-[10px]",children:"GC"})})})]})]}),(0,t.jsx)("p",{className:"text-[10px] text-slate-300 mt-6 font-black uppercase tracking-[0.3em]",children:"Merchant ID: 1599302"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest pl-1",children:"Reference Number"}),(0,t.jsx)("input",{type:"text",placeholder:"Enter receipt # from GCash",className:"w-full px-6 py-4 bg-slate-50 border-none rounded-2xl focus:ring-2 focus:ring-primary/20 transition-all font-black text-sm tracking-widest",autoFocus:!0})]})]}),"card"===u&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-br from-[#1e293b] to-[#0f172a] p-8 rounded-[2rem] text-white shadow-2xl relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full -mr-16 -mt-16 blur-3xl"}),(0,t.jsxs)("div",{className:"flex justify-between mb-12",children:[(0,t.jsx)("div",{className:"w-14 h-10 bg-gradient-to-br from-amber-400 to-amber-200 rounded-lg opacity-90 shadow-lg"}),(0,t.jsx)("span",{className:"font-black italic text-lg opacity-40",children:"SODAPAY"})]}),(0,t.jsx)("div",{className:"font-mono text-2xl tracking-[0.2em] mb-6 drop-shadow-lg",children:"â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢"}),(0,t.jsxs)("div",{className:"flex justify-between text-[10px] font-black uppercase opacity-40 tracking-widest",children:[(0,t.jsx)("span",{children:"Terminal Verified"}),(0,t.jsxs)("span",{children:["No. ",Math.random().toString().slice(2,6)]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest pl-1",children:"Swipe or Insert Card"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-y-0 right-4 flex items-center",children:(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"})}),(0,t.jsx)("input",{type:"text",placeholder:"XXXX XXXX XXXX XXXX",autoFocus:!0,className:"w-full px-6 py-4 bg-slate-50 border-2 border-slate-100 rounded-2xl font-black text-sm tracking-[0.3em] focus:border-primary focus:bg-white focus:outline-none transition-all placeholder:text-slate-200"})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-4 mt-10",children:[(0,t.jsx)("button",{onClick:()=>H(!1),className:"flex-1 py-4 text-slate-400 font-black text-xs uppercase tracking-widest hover:text-slate-600 transition-all",children:"Cancel"}),(0,t.jsx)("button",{onClick:el,className:"flex-2 px-8 py-4 bg-primary text-white rounded-2xl font-black text-xs uppercase tracking-[0.2em] hover:opacity-90 transition-all shadow-xl shadow-primary/20",children:"Authorize"})]})]})})]})}function P({onLogin:e}){let[r,a]=(0,s.useState)(""),[l,i]=(0,s.useState)(""),[d,o]=(0,s.useState)(!1),[n,c]=(0,s.useState)(""),x=async t=>{t.preventDefault(),o(!0),c("");try{let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:l})});if(!t.ok){let e=t.headers.get("content-type"),s="Login failed";if(e?.includes("application/json"))try{s=(await t.json()).error||s}catch{s=`Server error (${t.status})`}else s=`Server error (${t.status})`;c(s);return}let s=await t.json();e({cashier:"cashier",manager:"manager"}[s.user.role]||"cashier",s.user),a(""),i("")}catch(e){c("Network error. Please try again."),console.error("[v0] Login error:",e)}finally{o(!1)}};return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary to-primary/80 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-card rounded-2xl shadow-2xl p-8 w-full max-w-md border border-border",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-foreground mb-2 tracking-tight",children:"Sodalicious.Co"}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm font-medium",children:"Premium POS System"})]}),(0,t.jsxs)("form",{onSubmit:x,className:"space-y-4 mb-8",children:[(0,t.jsx)("input",{type:"email",placeholder:"Email",value:r,onChange:e=>a(e.target.value),className:"w-full px-4 py-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-card text-foreground transition-all",required:!0}),(0,t.jsx)("input",{type:"password",placeholder:"Password",value:l,onChange:e=>i(e.target.value),className:"w-full px-4 py-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-card text-foreground transition-all",required:!0}),n&&(0,t.jsx)("div",{className:"p-3 bg-destructive/10 border border-destructive/20 rounded-lg text-destructive text-sm font-medium",children:n}),(0,t.jsx)("button",{type:"submit",disabled:d,className:"w-full py-3 bg-primary text-primary-foreground rounded-lg font-semibold hover:bg-primary/90 disabled:opacity-50 transition-all shadow-md hover:shadow-lg",children:d?"Logging in...":"Login"})]}),(0,t.jsxs)("div",{className:"space-y-2 pt-4 border-t border-border",children:[(0,t.jsx)("p",{className:"text-center text-xs text-muted-foreground font-medium mb-3",children:"Demo Credentials:"}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1",children:[(0,t.jsx)("p",{className:"font-semibold",children:"Cashier: cashier@sodalicious.com / 123456"}),(0,t.jsx)("p",{className:"font-semibold",children:"Manager: manager@sodalicious.com / 123456"})]})]})]})})}let q=b("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),E=b("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),D=b("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),H=b("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function $({products:e}){let r=m(),[a,l]=(0,s.useState)(!1),i=r.menuItems.filter(e=>!e.ingredients_list||"Recipe Missing"===e.bottleneck_ingredient).length,[d,o]=(0,s.useState)(null),[n,c]=(0,s.useState)(""),[x,p]=(0,s.useState)({name:"",price:0,category:"Hot Coffee",stock:0,minThreshold:5,description:"",size:"M"}),h=r.menuItems.filter(e=>e.name.toLowerCase().includes(n.toLowerCase()));return(0,t.jsxs)("div",{className:"p-8 max-w-[1600px] mx-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Products"}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage your menu items and stock"}),i>0&&(0,t.jsxs)("span",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-rose-50 text-rose-600 text-[10px] font-black rounded border border-rose-100 animate-pulse",children:[(0,t.jsx)(H,{className:"w-3 h-3"}),i," ITEMS MISSING RECIPES"]})]})]}),(0,t.jsxs)("button",{onClick:()=>{l(!a),o(null),p({name:"",price:0,category:"Hot Coffee",stock:0,minThreshold:5,description:"",size:"M"})},className:"flex items-center gap-2 px-5 py-2.5 bg-primary text-primary-foreground rounded-lg font-bold hover:bg-primary/90 transition-all shadow-lg shadow-primary/20",children:[a?(0,t.jsx)(N,{className:"w-5 h-5"}):(0,t.jsx)(y,{className:"w-5 h-5"}),a?"Cancel":"Add Product"]})]}),a&&(0,t.jsxs)("div",{className:"bg-card border border-primary/20 rounded-xl p-8 mb-8 shadow-lg animate-in fade-in slide-in-from-top-4 duration-300 relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-primary to-purple-600"}),(0,t.jsxs)("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[d?(0,t.jsx)(q,{className:"w-5 h-5 text-primary"}):(0,t.jsx)(y,{className:"w-5 h-5 text-primary"}),d?"Edit Product":"Add New Product"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-semibold",children:"Product Name"}),(0,t.jsx)("input",{type:"text",placeholder:"e.g. Camel Machiarro",value:x.name,onChange:e=>p({...x,name:e.target.value}),className:"w-full px-4 py-3 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-semibold",children:"Category"}),(0,t.jsx)("select",{value:x.category,onChange:e=>p({...x,category:e.target.value}),className:"w-full px-4 py-3 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50",children:r.getAllCategories().filter(e=>"All"!==e).map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-semibold",children:"Price (â‚±)"}),(0,t.jsx)("input",{type:"number",placeholder:"0.00",value:x.price,onChange:e=>p({...x,price:Number.parseFloat(e.target.value)}),className:"w-full px-4 py-3 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-semibold",children:"Size Variant"}),(0,t.jsx)("input",{type:"text",placeholder:"e.g. M, L, Regular",value:x.size,onChange:e=>p({...x,size:e.target.value}),className:"w-full px-4 py-3 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-semibold",children:"Initial Stock"}),(0,t.jsx)("input",{type:"number",placeholder:"0",value:x.stock,onChange:e=>p({...x,stock:Number.parseInt(e.target.value)}),className:"w-full px-4 py-3 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-semibold",children:"Low Stock Alert Threshold"}),(0,t.jsx)("input",{type:"number",placeholder:"5",value:x.minThreshold,onChange:e=>p({...x,minThreshold:Number.parseInt(e.target.value)}),className:"w-full px-4 py-3 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),(0,t.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-semibold",children:"Description"}),(0,t.jsx)("textarea",{placeholder:"Product description...",value:x.description||"",onChange:e=>p({...x,description:e.target.value}),className:"w-full px-4 py-3 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50 min-h-[100px]"})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 mt-8",children:[(0,t.jsx)("button",{onClick:()=>l(!1),className:"px-6 py-3 bg-muted text-foreground rounded-lg font-bold hover:bg-muted/80 transition-all",children:"Cancel"}),(0,t.jsxs)("button",{onClick:()=>{d?(e.updateProduct(parseInt(d),x),o(null)):e.addProduct(x),l(!1),p({name:"",price:0,category:"Hot Coffee",stock:0,minThreshold:5,description:"",size:"M"})},className:"flex items-center gap-2 px-8 py-3 bg-primary text-primary-foreground rounded-lg font-bold hover:bg-primary/90 transition-all shadow-lg shadow-primary/20",children:[(0,t.jsx)(D,{className:"w-5 h-5"}),d?"Update Product":"Save Product"]})]})]}),(0,t.jsxs)("div",{className:"bg-card border border-border rounded-xl overflow-hidden shadow-sm",children:[(0,t.jsx)("div",{className:"p-4 border-b border-border bg-muted/20 flex gap-4",children:(0,t.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,t.jsx)(g,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,t.jsx)("input",{type:"text",placeholder:"Search products...",value:n,onChange:e=>c(e.target.value),className:"w-full pl-9 pr-4 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary/50 text-sm"})]})}),(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{className:"bg-muted/50 border-b border-border",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground uppercase tracking-wider",children:"Name"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground uppercase tracking-wider",children:"Category"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground uppercase tracking-wider",children:"Size"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground uppercase tracking-wider",children:"Price"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground uppercase tracking-wider",children:"Stock"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground uppercase tracking-wider",children:"Ingredients"}),(0,t.jsx)("th",{className:"px-6 py-4 text-right font-bold text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-border",children:h.map(s=>{let r=s.sizes?.[0],a=r?.size||"â€”",i=r?.price||0;return(0,t.jsxs)("tr",{className:"hover:bg-muted/50 transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-4 font-semibold text-foreground",children:s.name}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:"px-2 py-1 bg-secondary rounded-md text-secondary-foreground text-xs font-medium",children:s.category})}),(0,t.jsx)("td",{className:"px-6 py-4",children:a}),(0,t.jsxs)("td",{className:"px-6 py-4 font-mono font-medium",children:["â‚±",i.toFixed(2)]}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:`w-2 h-2 rounded-full ${s.stock<=0?"bg-red-500 animate-pulse shadow-[0_0_8px_rgba(239,68,68,0.5)]":s.stock<=s.minThreshold?"bg-amber-500 shadow-[0_0_8px_rgba(245,158,11,0.5)]":"bg-green-500"}`}),(0,t.jsx)("span",{className:s.stock<=0?"text-red-600 font-black":s.stock<=s.minThreshold?"text-amber-600 font-bold":"font-medium",children:s.stock>0?`${s.stock} in stock`:"OUT OF STOCK"})]})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex flex-col gap-1.5 min-w-[200px]",children:[s.ingredients_list?(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:s.ingredients_list.split(", ").map(e=>(0,t.jsx)("span",{className:"px-2 py-0.5 bg-muted text-[10px] font-bold text-muted-foreground rounded border border-border",children:e},e))}):(0,t.jsxs)("span",{className:"text-[10px] font-black text-rose-500 bg-rose-50 px-2 py-1 rounded border border-rose-100 flex items-center gap-1 w-fit",children:[(0,t.jsx)(H,{className:"w-3 h-3 text-rose-500"}),"âš ï¸ NO RECIPE"]}),s.stock<=0&&s.bottleneck_ingredient&&"Recipe Missing"!==s.bottleneck_ingredient&&(0,t.jsxs)("div",{className:"mt-1 flex items-center gap-1.5 text-[9px] font-black text-rose-700 bg-rose-100 px-2 py-1 rounded-md border border-rose-200 uppercase w-fit animate-bounce",children:[(0,t.jsx)(H,{className:"w-2.5 h-2.5"}),"Critical: Add ",s.bottleneck_ingredient]})]})}),(0,t.jsxs)("td",{className:"px-6 py-4 text-right space-x-2",children:[(0,t.jsx)("button",{onClick:()=>{p(s),o(String(s.id)),l(!0)},className:"inline-flex items-center justify-center p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:(0,t.jsx)(q,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>e.deleteProduct(parseInt(s.id)),className:"inline-flex items-center justify-center p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:(0,t.jsx)(E,{className:"w-4 h-4"})})]})]},s.id)})})]})]})]})}function U({products:e,inventoryLogs:r}){let{ingredients:a,refetch:l}=x(),[i,d]=(0,s.useState)(!1),[o,n]=(0,s.useState)(null),[c,m]=(0,s.useState)({quantity:0,type:"restock",reason:""}),p=a.filter(e=>Number(e.stock_quantity)<=Number(e.reorder_level)),h=async()=>{if(o){let e=a.find(e=>e.id===o);if(e){let t="restock"===c.type?c.quantity:-c.quantity;try{(await fetch("/api/inventory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ingredient_id:e.id,user_id:1,log_type:c.type,quantity_changed:t,reason:c.reason})})).ok?(l(),r.refetch()):console.error("Failed to update inventory")}catch(e){console.error(e)}n(null),d(!1),m({quantity:0,type:"restock",reason:""})}}};return(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold mb-8",children:"Ingredient Inventory Management"}),p.length>0&&(0,t.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-8",children:[(0,t.jsx)("p",{className:"text-sm font-bold text-yellow-800",children:"âš  Low Stock Alert"}),(0,t.jsxs)("p",{className:"text-sm text-yellow-700",children:[p.length," ingredients need restocking"]})]}),i&&(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6 mb-8",children:[(0,t.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Adjust Stock"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("select",{value:c.type,onChange:e=>m({...c,type:e.target.value}),className:"px-4 py-2 border border-border rounded bg-background",children:[(0,t.jsx)("option",{value:"restock",children:"Restock"}),(0,t.jsx)("option",{value:"damage",children:"Damage"}),(0,t.jsx)("option",{value:"waste",children:"Waste"})]}),(0,t.jsx)("input",{type:"number",placeholder:"Quantity",value:c.quantity,onChange:e=>m({...c,quantity:Number.parseInt(e.target.value)}),className:"px-4 py-2 border border-border rounded bg-background"}),(0,t.jsx)("textarea",{placeholder:"Reason",value:c.reason,onChange:e=>m({...c,reason:e.target.value}),className:"px-4 py-2 border border-border rounded bg-background col-span-2"})]}),(0,t.jsxs)("div",{className:"space-x-2 mt-4",children:[(0,t.jsx)("button",{onClick:h,className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:"Apply"}),(0,t.jsx)("button",{onClick:()=>{d(!1),n(null)},className:"px-4 py-2 border border-border rounded-md hover:bg-accent",children:"Cancel"})]})]}),(0,t.jsx)("div",{className:"bg-card border border-border rounded-lg overflow-hidden",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-accent",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Ingredient"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Unit"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Current Stock"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Reorder Level"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-border",children:a.map(e=>{let s=Number(e.stock_quantity)<=Number(e.reorder_level);return(0,t.jsxs)("tr",{className:`hover:bg-accent/50 transition-colors ${s?"bg-red-50":""}`,children:[(0,t.jsx)("td",{className:"px-6 py-4 font-medium",children:e.name}),(0,t.jsx)("td",{className:"px-6 py-4",children:e.unit}),(0,t.jsx)("td",{className:`px-6 py-4 font-bold ${s?"text-red-600":"text-foreground"}`,children:e.stock_quantity}),(0,t.jsx)("td",{className:"px-6 py-4 font-medium text-muted-foreground",children:e.reorder_level}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest ${s?"bg-red-600 text-white shadow-lg shadow-red-200":"bg-green-100 text-green-700"}`,children:s?"LOW STOCK":"OK"})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("button",{onClick:()=>{n(e.id),d(!0)},className:"inline-flex items-center justify-center p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors font-bold",children:"Adjust"})})]},e.id)})})]})}),r.logs.length>0&&(0,t.jsxs)("div",{className:"mt-8",children:[(0,t.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Inventory History"}),(0,t.jsx)("div",{className:"bg-card border border-border rounded-lg overflow-hidden",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-accent",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Ingredient"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Type"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Qty Changed"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Reason"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"User"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Timestamp"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-border",children:r.logs.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-accent/50",children:[(0,t.jsx)("td",{className:"px-6 py-4",children:e.ingredient_name||e.productName||"Unknown"}),(0,t.jsx)("td",{className:"px-6 py-4 capitalize",children:e.log_type||e.type}),(0,t.jsx)("td",{className:"px-6 py-4",children:e.quantity_changed||e.quantity}),(0,t.jsx)("td",{className:"px-6 py-4",children:e.reason||"-"}),(0,t.jsx)("td",{className:"px-6 py-4",children:e.user_name||e.userName}),(0,t.jsx)("td",{className:"px-6 py-4",children:e.created_at?new Date(e.created_at).toLocaleString():e.timestamp})]},e.id))})]})})]})]})}let Y=b("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),V=b("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),K=b("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);function X({orders:e}){let r,a,l,i,d,[o,n]=(0,s.useState)(null),c=e.orders.filter(e=>"completed"===(e.order_status??e.status??"").toLowerCase());return(0,t.jsxs)("div",{className:"p-8 max-w-[1600px] mx-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Order History"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"View past transactions"})]}),(0,t.jsxs)("div",{className:"px-4 py-2 bg-primary/10 text-primary font-medium rounded-lg flex items-center gap-2",children:[(0,t.jsx)(K,{className:"w-5 h-5"}),c.length," Total Orders"]})]}),(0,t.jsx)("div",{className:"bg-card border border-border rounded-xl overflow-hidden shadow-sm",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{className:"bg-muted/50 border-b border-border",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground uppercase tracking-wider",children:"Order ID"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground uppercase tracking-wider",children:"Customer"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground uppercase tracking-wider",children:"Total"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground uppercase tracking-wider",children:"Date"}),(0,t.jsx)("th",{className:"px-6 py-4 text-right font-bold text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-border",children:c.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-muted/50 transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-4 font-bold font-mono",children:e.id}),(0,t.jsx)("td",{className:"px-6 py-4 font-medium",children:e.customer_name??e.customer??"â€”"}),(0,t.jsxs)("td",{className:"px-6 py-4 font-bold text-primary",children:["â‚±",Number(e.total_amount??e.total??0).toFixed(2)]}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("span",{className:"flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-bold bg-green-100 text-green-700 capitalize w-fit",children:[(0,t.jsx)(_,{className:"w-3 h-3"}),e.order_status??e.status??"Completed"]})}),(0,t.jsx)("td",{className:"px-6 py-4 text-muted-foreground",children:e.created_at?new Date(e.created_at).toLocaleString():"-"}),(0,t.jsx)("td",{className:"px-6 py-4 text-right",children:(0,t.jsxs)("button",{onClick:()=>n(o===String(e.id)?null:String(e.id)),className:"inline-flex items-center justify-center gap-2 px-4 py-2 bg-primary/10 hover:bg-primary/20 text-primary rounded-lg font-medium text-xs transition-colors",children:[o===String(e.id)?(0,t.jsx)(V,{className:"w-4 h-4"}):(0,t.jsx)(Y,{className:"w-4 h-4"}),o===String(e.id)?"Hide Details":"View Details"]})})]},e.id))})]})}),o&&(0,t.jsx)("div",{className:"mt-8 bg-card border border-border rounded-xl p-8 shadow-md animate-in fade-in slide-in-from-bottom-4 duration-300",children:(r=e.orders.find(e=>String(e.id)===o))?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-2",children:["Order Details",(0,t.jsxs)("span",{className:"text-muted-foreground font-normal",children:["#",r.id]})]}),(0,t.jsxs)("div",{className:"text-xs font-mono bg-muted px-3 py-1 rounded",children:["ID: ",r.id]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-8 mb-8 p-6 bg-muted/20 rounded-lg border border-border/50",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider mb-1",children:"Customer"}),(0,t.jsx)("p",{className:"font-bold text-lg",children:r.customer_name??r.customer??"â€”"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider mb-1",children:"Cashier"}),(0,t.jsx)("p",{className:"font-bold text-lg",children:r.cashier_name??r.cashierName??"N/A"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider mb-1",children:"Payment Method"}),(0,t.jsx)("p",{className:"font-bold text-lg capitalize flex items-center gap-2",children:r.payment_method??r.paymentMethod??"â€”"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider mb-1",children:"Date Logged"}),(0,t.jsx)("p",{className:"font-bold text-lg",children:r.created_at?new Date(r.created_at).toLocaleDateString():"-"})]})]}),(0,t.jsxs)("div",{className:"border border-border rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"bg-muted/50 px-6 py-3 border-b border-border font-bold text-sm",children:"Items Purchased"}),(0,t.jsx)("div",{className:"divide-y divide-border",children:Array.isArray(r.items)&&r.items.length>0?r.items.map(e=>(0,t.jsxs)("div",{className:"flex justify-between p-4 hover:bg-muted/20",children:[(0,t.jsxs)("span",{className:"font-medium",children:[(0,t.jsxs)("span",{className:"font-bold text-primary mr-2",children:[e.quantity??e.qty,"x"]}),e.name??e.product_name]}),(0,t.jsxs)("span",{className:"font-mono",children:["â‚±",Number((e.price??e.unit_price??0)*(e.quantity??e.qty??0)).toFixed(2)]})]},e.id??`${e.name}-${e.quantity}`)):(0,t.jsx)("div",{className:"p-4 text-sm text-muted-foreground text-center italic",children:"No item details available in history record."})}),(0,t.jsx)("div",{className:"bg-muted/20 p-4 border-t border-border space-y-1",children:(l=(a=(Array.isArray(r.items)?r.items:[]).reduce((e,t)=>e+Number((t.price??t.unit_price??0)*(t.quantity??t.qty??0)),0))>0?a:Number(r.subtotal??r.sub_total??0),i=Number(r.tax??r.tax_amount??0),d=Number(r.total_amount??r.total??l+i),(0,t.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,t.jsxs)("div",{className:"flex justify-between w-64 text-sm text-muted-foreground",children:[(0,t.jsx)("span",{children:"Subtotal"}),(0,t.jsxs)("span",{children:["â‚±",l.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between w-64 text-sm text-muted-foreground",children:[(0,t.jsx)("span",{children:"Tax (8%)"}),(0,t.jsxs)("span",{children:["â‚±",i.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between w-64 text-xl font-black text-foreground border-t border-border pt-2 mt-2",children:[(0,t.jsx)("span",{children:"TOTAL"}),(0,t.jsxs)("span",{children:["â‚±",d.toFixed(2)]})]})]}))})]})]}):null})]})}function B({users:e}){let[r,a]=(0,s.useState)(!1),[l,i]=(0,s.useState)(null),[d,o]=(0,s.useState)({name:"",username:"",password:"",role:"cashier",status:"Active"});return(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold",children:"User Management"}),(0,t.jsx)("button",{onClick:()=>{a(!r),i(null),o({name:"",username:"",password:"",role:"cashier",status:"Active"})},className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:r?"Cancel":"Add User"})]}),r&&(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6 mb-8",children:[(0,t.jsx)("h3",{className:"text-xl font-bold mb-4",children:l?"Edit User":"Add New User"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)("input",{type:"text",placeholder:"Full Name",value:d.name,onChange:e=>o({...d,name:e.target.value}),className:"px-4 py-2 border border-border rounded bg-background"}),(0,t.jsx)("input",{type:"text",placeholder:"Username",value:d.username,onChange:e=>o({...d,username:e.target.value}),className:"px-4 py-2 border border-border rounded bg-background"}),(0,t.jsx)("input",{type:"password",placeholder:"Password",value:d.password,onChange:e=>o({...d,password:e.target.value}),className:"px-4 py-2 border border-border rounded bg-background"}),(0,t.jsxs)("select",{value:d.role,onChange:e=>o({...d,role:e.target.value}),className:"px-4 py-2 border border-border rounded bg-background",children:[(0,t.jsx)("option",{value:"cashier",children:"Cashier"}),(0,t.jsx)("option",{value:"manager",children:"Manager"}),(0,t.jsx)("option",{value:"inventory",children:"Inventory Officer"})]}),(0,t.jsxs)("select",{value:d.status,onChange:e=>o({...d,status:e.target.value}),className:"px-4 py-2 border border-border rounded bg-background col-span-2",children:[(0,t.jsx)("option",{value:"Active",children:"Active"}),(0,t.jsx)("option",{value:"Inactive",children:"Inactive"})]})]}),(0,t.jsx)("button",{onClick:()=>{l?(e.updateUser(l,d),i(null)):e.addUser(d),a(!1),o({name:"",username:"",password:"",role:"cashier",status:"Active"})},className:"mt-4 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:l?"Update User":"Add User"})]}),(0,t.jsx)("div",{className:"bg-card border border-border rounded-lg overflow-hidden",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-accent",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Name"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Username"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Role"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Last Login"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-border",children:e.users.filter(e=>"manager"!==e.role).map(s=>(0,t.jsxs)("tr",{className:"hover:bg-accent/50",children:[(0,t.jsx)("td",{className:"px-6 py-4",children:s.name}),(0,t.jsx)("td",{className:"px-6 py-4",children:s.username}),(0,t.jsx)("td",{className:"px-6 py-4 capitalize",children:s.role}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:`px-3 py-1 rounded text-sm font-bold ${"Active"===s.status?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:s.status})}),(0,t.jsx)("td",{className:"px-6 py-4",children:s.lastLogin||"N/A"}),(0,t.jsxs)("td",{className:"px-6 py-4 space-x-2",children:[(0,t.jsx)("button",{onClick:()=>{o({name:s.name,username:s.username,password:"",role:s.role,status:s.status}),i(s.id),a(!0)},className:"px-3 py-1 bg-blue-100 text-blue-700 rounded text-sm hover:bg-blue-200",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>e.deleteUser(s.id),className:"px-3 py-1 bg-red-100 text-red-700 rounded text-sm hover:bg-red-200",children:"Delete"})]})]},s.id))})]})})]})}function J(){m();let[e,r]=(0,s.useState)("daily"),[a,l]=(0,s.useState)({start:"",end:""}),[i,d]=(0,s.useState)(null),[o,n]=(0,s.useState)(!1),[c,x]=(0,s.useState)(null),p=(0,s.useCallback)(async()=>{n(!0),x(null);try{let t=new URLSearchParams;t.set("type",e),a.start&&a.end&&(t.set("start",a.start),t.set("end",a.end));let s=await fetch(`/api/reports?${t.toString()}`);if(!s.ok)throw Error(`Status ${s.status}`);let r=await s.json();r?.totals&&(r.totals.totalOrders=Number(r.totals.totalOrders||0),r.totals.totalSales=Number(r.totals.totalSales||0)),d(r)}catch(e){console.error("[Reports] fetch error",e),x("Failed to fetch report; showing local summary"),d(null)}finally{n(!1)}},[e,a.start,a.end]);(0,s.useEffect)(()=>{p();let e=setInterval(()=>{p()},5e3);return()=>clearInterval(e)},[p]);let h={title:"inventory"===e?"Inventory Report":"Daily Sales Report",totalSales:i?.totals?.totalSales??0,totalOrders:i?.totals?.totalOrders??0,itemsSold:i?.breakdown?i.breakdown.reduce((e,t)=>e+Number(t.orders_count||0),0):0,paymentMethods:{}};return(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold mb-8",children:"Reports"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[{id:"daily",label:"Daily Sales Report"},{id:"weekly",label:"Weekly Sales Report"},{id:"monthly",label:"Monthly Sales Report"},{id:"payment",label:"Payment Summary"},{id:"inventory",label:"Inventory Report"}].map(s=>(0,t.jsxs)("button",{onClick:()=>r(s.id),className:`p-6 border rounded-lg hover:bg-accent transition-colors text-left ${e===s.id?"border-primary bg-primary/10":"border-border"}`,children:[(0,t.jsx)("h3",{className:"font-bold mb-2",children:s.label}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Generate and view report"})]},s.id))}),(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg p-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold",children:i?i.meta?.type||"Report":h.title}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[o&&(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Refreshing..."}),(0,t.jsx)("button",{onClick:()=>p(),className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:"Refresh"})]})]}),"inventory"!==e&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"p-5 bg-blue-50 rounded-2xl border border-blue-100 shadow-sm hover:shadow-md transition-all",children:[(0,t.jsx)("p",{className:"text-[10px] font-black text-blue-400 uppercase tracking-widest mb-1",children:"Total Sales"}),(0,t.jsxs)("p",{className:"text-3xl font-black text-blue-600",children:["â‚±",Number(i?.totals?.totalSales??h.totalSales).toFixed(2)]}),(0,t.jsx)("div",{className:"mt-2 h-1 w-full bg-blue-200 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-blue-600 w-[70%]"})})]}),(0,t.jsxs)("div",{className:"p-5 bg-green-50 rounded-2xl border border-green-100 shadow-sm hover:shadow-md transition-all",children:[(0,t.jsx)("p",{className:"text-[10px] font-black text-green-400 uppercase tracking-widest mb-1",children:"Total Orders"}),(0,t.jsx)("p",{className:"text-3xl font-black text-green-600",children:i?.totals?.totalOrders??h.totalOrders})]}),(0,t.jsxs)("div",{className:"p-5 bg-purple-50 rounded-2xl border border-purple-100 shadow-sm hover:shadow-md transition-all",children:[(0,t.jsx)("p",{className:"text-[10px] font-black text-purple-400 uppercase tracking-widest mb-1",children:"Items Sold"}),(0,t.jsx)("p",{className:"text-3xl font-black text-purple-600",children:h.itemsSold})]}),(0,t.jsxs)("div",{className:"p-5 bg-orange-50 rounded-2xl border border-orange-100 shadow-sm hover:shadow-md transition-all",children:[(0,t.jsx)("p",{className:"text-[10px] font-black text-orange-400 uppercase tracking-widest mb-1",children:"Avg Ticket"}),(0,t.jsxs)("p",{className:"text-3xl font-black text-orange-600",children:["â‚±",(Number(i?.totals?.totalSales??h.totalSales)/Math.max(1,Number(i?.totals?.totalOrders??h.totalOrders))).toFixed(2)]})]})]}),(0,t.jsxs)("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl p-6",children:[(0,t.jsxs)("h4",{className:"font-black text-xs uppercase tracking-widest text-slate-400 mb-6 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-2 h-2 rounded-full bg-primary animate-pulse"}),"Sales Performance Trend"]}),(0,t.jsx)("div",{className:"space-y-5",children:[{label:"Morning Rush (7am - 10am)",value:45,color:"bg-blue-500"},{label:"Lunch Break (11am - 2pm)",value:85,color:"bg-orange-500"},{label:"Afternoon Chill (3pm - 6pm)",value:65,color:"bg-purple-500"},{label:"Evening Peak (7pm - 10pm)",value:92,color:"bg-green-500"}].map(e=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-[10px] font-bold text-slate-600 uppercase",children:[(0,t.jsx)("span",{children:e.label}),(0,t.jsxs)("span",{children:[e.value,"% busy"]})]}),(0,t.jsx)("div",{className:"h-2 w-full bg-slate-200 rounded-full overflow-hidden shadow-inner",children:(0,t.jsx)("div",{className:`h-full ${e.color} transition-all duration-1000`,style:{width:`${e.value}%`}})})]},e.label))})]})]}),(0,t.jsxs)("div",{className:"bg-white border border-slate-200 rounded-2xl p-6 shadow-sm flex flex-col",children:[(0,t.jsx)("h4",{className:"font-black text-xs uppercase tracking-widest text-slate-400 mb-6",children:"Popular Products Ranking"}),(0,t.jsxs)("div",{className:"flex-1 space-y-4 overflow-y-auto pr-2",children:[(i?.topProducts||[]).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-4 group",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-slate-50 flex items-center justify-center font-black text-xs text-slate-400 group-hover:bg-primary group-hover:text-white transition-all shadow-sm",children:s+1}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex justify-between items-end mb-1",children:[(0,t.jsx)("span",{className:"font-bold text-sm text-slate-700",children:e.name}),(0,t.jsxs)("span",{className:"text-[10px] font-black text-primary uppercase",children:["â‚±",Number(e.revenue||0).toFixed(0)]})]}),(0,t.jsx)("div",{className:"h-1.5 w-full bg-slate-100 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-primary/40 group-hover:bg-primary transition-all duration-700",style:{width:`${Math.min(100,e.qty_sold/20*100)}%`}})}),(0,t.jsxs)("p",{className:"text-[9px] text-slate-400 font-bold mt-1 uppercase tracking-tighter",children:[e.qty_sold," Units Sold This period"]})]})]},e.id)),(!i?.topProducts||0===i.topProducts.length)&&(0,t.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-slate-300 py-20",children:[(0,t.jsx)(R,{className:"w-12 h-12 mb-3 opacity-20"}),(0,t.jsx)("p",{className:"text-xs font-black uppercase tracking-widest",children:"No Sales Data"})]})]})]})]}),"inventory"===e&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"p-6 bg-blue-50 rounded-2xl border border-blue-100 shadow-sm",children:[(0,t.jsx)("p",{className:"text-[10px] font-black text-blue-400 uppercase tracking-widest mb-1",children:"Total Catalog Items"}),(0,t.jsx)("p",{className:"text-4xl font-black text-blue-600",children:i?.topProducts?.length??0})]}),(0,t.jsxs)("div",{className:"p-6 bg-green-50 rounded-2xl border border-green-100 shadow-sm",children:[(0,t.jsx)("p",{className:"text-[10px] font-black text-green-400 uppercase tracking-widest mb-1",children:"Healthy Stock Level"}),(0,t.jsx)("p",{className:"text-4xl font-black text-green-600",children:"80%"})]})]}),c&&(0,t.jsx)("p",{className:"mt-6 p-4 bg-red-50 text-red-600 rounded-xl text-xs font-bold border border-red-100",children:c})]})]})}let G=b("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),W=b("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),Z=b("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Q=b("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);function ee({products:e,orders:s,inventoryLogs:r}){let a=m(),{ingredients:l}=x(),i=(s.orders||[]).filter(e=>new Date(e.created_at).toDateString()===new Date().toDateString()).reduce((e,t)=>e+(Number(t.total_amount)||0),0),d=(s.orders||[]).filter(e=>new Date(e.created_at).toDateString()===new Date().toDateString()).length,o=a.getLowStockItems(),n=(l||[]).filter(e=>Number(e.stock_quantity)<=Number(e.reorder_level)),c=o.length+n.length,p=a.menuItems.slice().sort((e,t)=>e.stock-t.stock).slice(0,3);return(0,t.jsxs)("div",{className:"p-8 max-w-[1600px] mx-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Dashboard Overview"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"Summary of today's performance"})]}),(0,t.jsxs)("div",{className:"px-4 py-2 bg-primary/10 text-primary font-bold rounded-lg flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),"Live Updates"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,t.jsx)(et,{label:"Total Sales",value:`â‚±${Number(i||0).toFixed(2)}`,icon:(0,t.jsx)(G,{className:"w-6 h-6 text-blue-600"}),className:"bg-blue-50 border-blue-100"}),(0,t.jsx)(et,{label:"Total Orders",value:d.toString(),icon:(0,t.jsx)(W,{className:"w-6 h-6 text-green-600"}),className:"bg-green-50 border-green-100"}),(0,t.jsx)(et,{label:"Low Stock Items",value:c.toString(),icon:(0,t.jsx)(Z,{className:"w-6 h-6 text-yellow-600"}),className:"bg-yellow-50 border-yellow-100"}),(0,t.jsx)(et,{label:"Total Products",value:a.menuItems.length.toString(),icon:(0,t.jsx)(R,{className:"w-6 h-6 text-purple-600"}),className:"bg-purple-50 border-purple-100"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"bg-card border border-border rounded-xl p-6 shadow-sm",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[(0,t.jsx)(Q,{className:"w-5 h-5 text-primary"}),"Top Selling Products"]}),(0,t.jsx)("div",{className:"space-y-4",children:p.map((e,s)=>(0,t.jsxs)("div",{className:"flex justify-between items-center pb-4 border-b border-border last:border-b-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center font-bold text-muted-foreground",children:["#",s+1]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-foreground",children:e.name}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-0.5",children:["Stock Remaining: ",e.stock]})]})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("p",{className:"text-sm font-medium text-muted-foreground",children:[e.sizes.length," Variants"]})})]},e.id))})]}),(0,t.jsxs)("div",{className:"bg-card border border-border rounded-xl p-6 shadow-sm",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[(0,t.jsx)(F,{className:"w-5 h-5 text-primary"}),"Recent Orders"]}),(0,t.jsx)("div",{className:"space-y-4",children:(s.orders||[]).slice(0,3).map(e=>(0,t.jsxs)("div",{className:"flex justify-between items-center pb-4 border-b border-border last:border-b-0 hover:bg-muted/50 transition-colors rounded-lg px-2 -mx-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-bold text-foreground flex items-center gap-2",children:[e.order_number,(0,t.jsx)("span",{className:"text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded-full font-medium",children:"Completed"})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:e.customer_name})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"font-bold text-lg text-primary",children:["â‚±",Number(e.total_amount||0).toFixed(2)]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground capitalize",children:e.payment_method})]})]},e.id))})]}),(0,t.jsxs)("div",{className:"bg-card border border-border rounded-xl p-6 shadow-sm",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[(0,t.jsx)(Z,{className:"w-5 h-5 text-yellow-500"}),"Low Stock Alert"]}),0===c?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground opacity-50 bg-muted/20 rounded-xl border border-dashed",children:[(0,t.jsx)(R,{className:"w-12 h-12 mb-3"}),(0,t.jsx)("p",{className:"font-bold",children:"All items are well-stocked"})]}):(0,t.jsxs)("div",{className:"space-y-4 max-h-[400px] overflow-y-auto pr-2",children:[o.map(e=>(0,t.jsxs)("div",{className:"p-4 bg-yellow-50/50 border border-yellow-200/50 rounded-xl flex justify-between items-center group hover:bg-yellow-50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-orange-100 flex items-center justify-center text-orange-600 font-bold shrink-0 text-[10px]",children:"PROD"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-sm text-foreground",children:e.name}),(0,t.jsx)("p",{className:"text-[10px] text-muted-foreground mt-0.5 font-medium uppercase tracking-tighter",children:"Stock Level Low"})]})]}),(0,t.jsxs)("div",{className:"px-3 py-1.5 bg-white border border-yellow-200 rounded-lg text-xs font-black text-yellow-700 shadow-sm",children:[e.stock," LEFT"]})]},`m-${e.id}`)),n.map(e=>(0,t.jsxs)("div",{className:"p-4 bg-red-50/50 border border-red-200/50 rounded-xl flex justify-between items-center group hover:bg-red-50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center text-red-600 font-bold shrink-0 text-[10px]",children:"INGR"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-sm text-foreground",children:e.name}),(0,t.jsx)("p",{className:"text-[10px] text-muted-foreground mt-0.5 font-medium uppercase tracking-tighter",children:"Critical Resource"})]})]}),(0,t.jsxs)("div",{className:"px-3 py-1.5 bg-white border border-red-200 rounded-lg text-xs font-black text-red-700 shadow-sm animate-pulse",children:[e.stock_quantity," ",e.unit]})]},`i-${e.id}`))]})]}),(0,t.jsxs)("div",{className:"bg-card border border-border rounded-xl p-6 shadow-sm",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[(0,t.jsx)(w,{className:"w-5 h-5 text-primary"}),"Payment Methods"]}),(0,t.jsx)("div",{className:"space-y-3",children:["Cash","GCash","Card"].map(e=>{let r=s.orders.filter(t=>(t.payment_method??t.paymentMethod??"").toString().toLowerCase().replace("-","")===e.toLowerCase().replace("-","")).length;return(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 bg-muted/30 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"w-8 h-8 rounded-full bg-primary/5 flex items-center justify-center",children:["Cash"===e&&(0,t.jsx)(G,{className:"w-4 h-4 text-primary"}),"GCash"===e&&(0,t.jsx)(w,{className:"w-4 h-4 text-blue-500"}),"Card"===e&&(0,t.jsx)(w,{className:"w-4 h-4 text-purple-500"})]}),(0,t.jsx)("span",{className:"font-bold text-foreground",children:e})]}),(0,t.jsxs)("span",{className:"font-medium text-muted-foreground",children:[r," transactions"]})]},e)})})]})]})]})}function et({label:e,value:s,icon:r,className:a}){return(0,t.jsxs)("div",{className:`p-6 rounded-xl border flex items-start justify-between ${a}`,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-foreground/60",children:e}),(0,t.jsx)("p",{className:"text-3xl font-black text-foreground mt-2 tracking-tight",children:s})]}),(0,t.jsx)("div",{className:"p-3 bg-white/50 rounded-xl backdrop-blur-sm",children:r})]})}let es=b("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),er=b("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),ea=b("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),el=b("ScrollText",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]);function ei({onLogout:e,currentUser:r}){let[a,l]=(0,s.useState)("dashboard"),d=o(),x=n(),m=function(){let[e,t]=(0,s.useState)(i),r=(0,s.useCallback)(s=>{let r={...s,id:Math.max(...e.map(e=>e.id),0)+1};return t([...e,r]),r},[e]),a=(0,s.useCallback)((s,r)=>{t(e.map(e=>e.id===s?{...e,...r}:e))},[e]),l=(0,s.useCallback)(s=>{t(e.filter(e=>e.id!==s))},[e]);return{users:e,addUser:r,updateUser:a,deleteUser:l}}(),p=c(),h=function(){let[e,t]=(0,s.useState)([]),[r,a]=(0,s.useState)(!0),l=(0,s.useCallback)(async()=>{try{a(!0);let e=await fetch("/api/activity-logs");if(!e.ok)throw Error("Failed to fetch activity logs");let s=await e.json();t(s||[])}catch(e){console.error("[ActivityLogs] Error fetching logs:",e)}finally{a(!1)}},[]);return(0,s.useEffect)(()=>{l();let e=setInterval(l,5e3);return()=>clearInterval(e)},[l]),{logs:e,addLog:(0,s.useCallback)(async e=>{try{await fetch("/api/activity-logs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),l()}catch(e){console.error(e)}},[l]),loading:r,refetch:l}}(),u=[{id:"dashboard",label:"Dashboard",icon:(0,t.jsx)(es,{className:"w-5 h-5"})},{id:"products",label:"Products",icon:(0,t.jsx)(R,{className:"w-5 h-5"})},{id:"inventory",label:"Inventory",icon:(0,t.jsx)(K,{className:"w-5 h-5"})},{id:"orders",label:"Orders",icon:(0,t.jsx)(W,{className:"w-5 h-5"})},{id:"reports",label:"Reports",icon:(0,t.jsx)(er,{className:"w-5 h-5"})},{id:"users",label:"Users",icon:(0,t.jsx)(ea,{className:"w-5 h-5"})},{id:"logs",label:"Activity Logs",icon:(0,t.jsx)(el,{className:"w-5 h-5"})}];return(0,t.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,t.jsxs)("div",{className:"w-64 bg-card border-r border-border flex flex-col shadow-xl z-20",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-border bg-primary/5 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg text-primary",children:(0,t.jsx)(M,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-bold text-foreground tracking-tight",children:"Sodalicious"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground font-medium",children:"Manager Portal"})]})]}),(0,t.jsx)("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:u.map(e=>(0,t.jsxs)("button",{onClick:()=>l(e.id),className:`w-full text-left px-4 py-3 rounded-xl transition-all font-medium flex items-center gap-3 ${a===e.id?"bg-primary text-primary-foreground shadow-lg shadow-primary/20 scale-[1.02]":"text-muted-foreground hover:bg-muted hover:text-foreground"}`,children:[e.icon,e.label]},e.id))}),(0,t.jsx)("div",{className:"p-4 border-t border-border",children:(0,t.jsxs)("button",{onClick:e,className:"w-full px-4 py-3 bg-destructive/10 text-destructive hover:bg-destructive hover:text-destructive-foreground rounded-xl font-semibold transition-all flex items-center justify-center gap-2",children:[(0,t.jsx)(f,{className:"w-5 h-5"}),"Logout"]})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-auto bg-background",children:["dashboard"===a&&(0,t.jsx)(ee,{products:d,orders:x,inventoryLogs:p}),"products"===a&&(0,t.jsx)($,{products:d}),"inventory"===a&&(0,t.jsx)(U,{products:d,inventoryLogs:p}),"orders"===a&&(0,t.jsx)(X,{orders:x}),"reports"===a&&(0,t.jsx)(J,{}),"users"===a&&(0,t.jsx)(B,{users:m}),"logs"===a&&(0,t.jsx)(ed,{logs:h.logs})]})]})}function ed({logs:e}){return e&&0!==e.length?(0,t.jsxs)("div",{className:"p-8 max-w-[1600px] mx-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsxs)("h2",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[(0,t.jsx)(el,{className:"w-8 h-8 text-primary"}),"Activity Logs"]}),(0,t.jsx)("div",{className:"px-4 py-2 bg-primary/10 text-primary rounded-lg text-xs font-bold animate-pulse",children:"Monitoring Live Events"})]}),(0,t.jsx)("div",{className:"bg-card border border-border rounded-xl overflow-hidden shadow-xl",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-muted/50 border-b border-border",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground text-xs uppercase tracking-widest",children:"Type"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground text-xs uppercase tracking-widest",children:"Action"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground text-xs uppercase tracking-widest",children:"Details"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground text-xs uppercase tracking-widest",children:"User"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground text-xs uppercase tracking-widest",children:"Timestamp"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-border",children:e.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-muted/50 transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-4 font-semibold text-foreground capitalize",children:(0,t.jsx)("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded-md text-[10px] font-black uppercase",children:e.entity_type||"Event"})}),(0,t.jsx)("td",{className:"px-6 py-4 text-foreground font-bold text-sm",children:e.action_type?.replace("_"," ")||e.action}),(0,t.jsx)("td",{className:"px-6 py-4 text-muted-foreground text-xs font-mono max-w-md truncate",children:"string"==typeof e.details?e.details:JSON.stringify(e.details)}),(0,t.jsx)("td",{className:"px-6 py-4 text-foreground font-medium text-sm",children:e.user_name||"System"}),(0,t.jsx)("td",{className:"px-6 py-4 text-muted-foreground text-sm font-medium",children:e.created_at?new Date(e.created_at).toLocaleString():"Just now"})]},e.id))})]})})]}):(0,t.jsxs)("div",{className:"p-8 max-w-[1600px] mx-auto flex flex-col items-center justify-center min-h-[400px] text-center",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-muted rounded-full flex items-center justify-center mb-4",children:(0,t.jsx)(el,{className:"w-10 h-10 text-muted-foreground"})}),(0,t.jsx)("h3",{className:"text-xl font-bold",children:"No activity logs found"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:"Actions like new orders and inventory changes will appear here."})]})}function eo({onLogout:e,currentUser:r}){o();let a=c(),l=m(),[i,d]=(0,s.useState)("inventory");return(0,t.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,t.jsxs)("div",{className:"w-64 bg-sidebar border-r border-sidebar-border flex flex-col shadow-lg",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-sidebar-border bg-sidebar-primary/10",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-sidebar-foreground tracking-tight",children:"Sodalicious"}),(0,t.jsx)("p",{className:"text-sm text-sidebar-foreground/70 font-medium",children:"Inventory Officer"})]}),(0,t.jsx)("nav",{className:"flex-1 p-4 space-y-1",children:[{id:"inventory",label:"Stock Management",icon:"ðŸ“¦"},{id:"logs",label:"Stock History",icon:"ðŸ“‹"}].map(e=>(0,t.jsxs)("button",{onClick:()=>d(e.id),className:`w-full text-left px-4 py-3 rounded-lg transition-all font-semibold flex items-center gap-3 ${i===e.id?"bg-sidebar-primary text-sidebar-primary-foreground shadow-md":"text-sidebar-foreground hover:bg-sidebar-accent"}`,children:[(0,t.jsx)("span",{className:"text-lg",children:e.icon}),e.label]},e.id))}),(0,t.jsx)("button",{onClick:e,className:"m-4 px-4 py-3 bg-destructive text-destructive-foreground rounded-lg hover:bg-destructive/90 font-semibold transition-all shadow-md",children:"Logout"})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-auto",children:["inventory"===i&&(0,t.jsx)(en,{menuSync:l,inventoryLogs:a,currentUser:r}),"logs"===i&&(0,t.jsx)(ec,{inventoryLogs:a})]})]})}function en({menuSync:e,inventoryLogs:r,currentUser:a}){let{ingredients:l,refetch:i}=x(),[d,o]=(0,s.useState)(null),[n,c]=(0,s.useState)({quantity:0,type:"restock",reason:""}),m=l.filter(e=>e.stock_quantity<=e.reorder_level),p=async()=>{if(d){let e=l.find(e=>e.id===d);if(e){let t="restock"===n.type?n.quantity:-n.quantity;try{let s=await fetch("/api/inventory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ingredient_id:e.id,user_id:a?.id||1,log_type:n.type,quantity_changed:t,reason:n.reason})});s.ok?(console.log("[Inventory] API sync successful"),i(),r.refetch()):console.error("[Inventory] API sync failed:",await s.text())}catch(e){console.error("[Inventory] API error:",e)}o(null),c({quantity:0,type:"restock",reason:""})}}};return(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold mb-8 text-foreground",children:"Ingredient Stock Management"}),m.length>0&&(0,t.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-5 mb-8",children:[(0,t.jsxs)("p",{className:"text-sm font-bold text-yellow-800",children:["âš  Low Stock Ingredients: ",m.length]}),(0,t.jsx)("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-3",children:m.map(e=>(0,t.jsxs)("p",{className:"text-sm text-yellow-700 font-medium",children:[e.name," (",e.stock_quantity," ",e.unit,")"]},e.id))})]}),d&&(0,t.jsxs)("div",{className:"bg-card border border-border rounded-xl p-6 mb-8 shadow-lg",children:[(0,t.jsx)("h3",{className:"text-xl font-bold mb-4 text-foreground",children:"Adjust Stock"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("select",{value:n.type,onChange:e=>c({...n,type:e.target.value}),className:"px-4 py-2 border border-border rounded-lg bg-card text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,t.jsx)("option",{value:"restock",children:"Restock"}),(0,t.jsx)("option",{value:"damage",children:"Damage"}),(0,t.jsx)("option",{value:"waste",children:"Waste"})]}),(0,t.jsx)("input",{type:"number",placeholder:"Quantity",value:n.quantity,onChange:e=>c({...n,quantity:Number.parseInt(e.target.value)}),className:"px-4 py-2 border border-border rounded-lg bg-card text-foreground focus:outline-none focus:ring-2 focus:ring-primary"}),(0,t.jsx)("textarea",{placeholder:"Reason",value:n.reason,onChange:e=>c({...n,reason:e.target.value}),className:"px-4 py-2 border border-border rounded-lg bg-card text-foreground col-span-2 focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,t.jsxs)("div",{className:"space-x-2 mt-4",children:[(0,t.jsx)("button",{onClick:p,className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 font-semibold transition-all",children:"Apply"}),(0,t.jsx)("button",{onClick:()=>o(null),className:"px-4 py-2 border border-border rounded-lg hover:bg-muted font-semibold transition-all text-foreground",children:"Cancel"})]})]}),(0,t.jsx)("div",{className:"bg-card border border-border rounded-xl overflow-hidden shadow-lg",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-primary/5 border-b border-border",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-foreground",children:"Ingredient"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-foreground",children:"Unit"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-foreground",children:"Stock"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-foreground",children:"Reorder Level"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-foreground",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-foreground",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-border",children:l.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-primary/5 transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-4 font-medium text-foreground",children:e.name}),(0,t.jsx)("td",{className:"px-6 py-4 text-foreground",children:e.unit}),(0,t.jsx)("td",{className:"px-6 py-4 text-foreground",children:e.stock_quantity}),(0,t.jsx)("td",{className:"px-6 py-4 text-foreground",children:e.reorder_level}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:`px-3 py-1 rounded-lg text-sm font-bold ${e.stock_quantity<=e.reorder_level?"bg-yellow-100 text-yellow-700 border border-yellow-200":"bg-green-100 text-green-700 border border-green-200"}`,children:e.stock_quantity<=e.reorder_level?"Low":"OK"})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("button",{onClick:()=>o(e.id),className:"px-3 py-1 bg-primary/10 text-primary rounded-lg text-sm hover:bg-primary/20 font-semibold transition-colors border border-primary/20",children:"Adjust"})})]},e.id))})]})})]})}function ec({inventoryLogs:e}){return(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold mb-8 text-foreground",children:"Stock History"}),(0,t.jsx)("div",{className:"bg-card border border-border rounded-xl overflow-hidden shadow-lg",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-primary/5 border-b border-border",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-foreground",children:"Product"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-foreground",children:"Type"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-foreground",children:"Quantity"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-foreground",children:"Reason"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-foreground",children:"Officer"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left font-bold text-foreground",children:"Timestamp"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-border",children:e.logs.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-primary/5 transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-4 text-foreground",children:e.ingredient_name||e.productName||"Unknown"}),(0,t.jsx)("td",{className:"px-6 py-4 capitalize font-semibold text-foreground",children:e.log_type||e.type}),(0,t.jsx)("td",{className:"px-6 py-4 font-bold text-foreground",children:e.quantity_changed||e.quantity}),(0,t.jsx)("td",{className:"px-6 py-4 text-foreground",children:e.reason||"-"}),(0,t.jsx)("td",{className:"px-6 py-4 text-foreground",children:e.user_name||e.userName}),(0,t.jsx)("td",{className:"px-6 py-4 text-muted-foreground text-sm",children:e.created_at?new Date(e.created_at).toLocaleString():e.timestamp})]},e.id))})]})})]})}function ex(){let[e,r]=(0,s.useState)(!1),[a,l]=(0,s.useState)("cashier"),[i,d]=(0,s.useState)(null),o=()=>{i?.id&&fetch("/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:i.id})}).catch(console.error),r(!1),d(null)};return e?(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:["cashier"===a&&(0,t.jsx)(O,{onLogout:o,currentUser:i}),"manager"===a&&(0,t.jsx)(ei,{onLogout:o,currentUser:i}),"inventory"===a&&(0,t.jsx)(eo,{onLogout:o,currentUser:i})]}):(0,t.jsx)(P,{onLogin:(e,t)=>{l(e),d(t),r(!0)}})}e.s(["default",()=>ex],31713)}]);